var $jscomp={};$jscomp.scope={};$jscomp.defineProperty=typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=(a);if(a.get||a.set){throw new TypeError('ES3 does not support getters and setters.')}if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(c,b,a){var d=this.length;c=Number(c);b=Number(b);a=Number(a!=null?a:d);if(c<b){a=Math.min(a,d);while(b<a){if(b in this){this[c++]=this[b++]}else {delete this[c++];b++}}}else {a=Math.min(a,d+b-c);c+=a-b;while(a>b){if(--a in this){this[--c]=this[a]}else {delete this[c]}}}return this};return b},'es6-impl','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global.Symbol){$jscomp.global.Symbol=$jscomp.Symbol}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return ($jscomp.SYMBOL_PREFIX+(a||'')+$jscomp.symbolCounter_++)};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;if(!a){a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global.Symbol.iterator]=function(){return this};return (a)};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a,b){return [a,b]})};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(e,b,a){var c=this.length||0;if(b<0){b=Math.max(0,c+(b))}if(a==null||a>c){a=c}a=Number(a);if(a<0){a=Math.max(0,c+a)}for(var d=Number(b||0);d<a;d++){this[d]=e}return this};return b},'es6-impl','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=(String(a))}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).v};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(b,a){return $jscomp.findInternal(this,b,a).i};return b},'es6-impl','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(a,b,f){$jscomp.initSymbolIterator();b=b!=null?b:function(a){return a};var c=[];var e=(a)[Symbol.iterator];if(typeof e=='function'){a=e.call(a);var g;while(!(g=a.next()).done){c.push(b.call((f),g.value))}}else {var h=a.length;for(var d=0;d<h;d++){c.push(b.call((f),a[d]))}}return c};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(a){return a})};return b},'es6-impl','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(a){return Array.from(arguments)};return b},'es6-impl','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,a){return a})};return b},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(a){if(a.done){b(a.value)}else {Promise.resolve(a.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=(a)[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator((a))};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new (c)([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var c={};$jscomp.defineProperty(b,a,{value:c})}}function patch(a){var b=Object[a];if(b){Object[a]=function(a){insert(a);return b(a)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var b;while(!(b=e.next()).done){var c=b.value;this.set((c[0]),(c[1]))}}};b.prototype.set=function(b,c){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=c;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6-impl','es3');$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.polyfill('Map',function(b){var h=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(k){return !1}}();if(h){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=new WeakMap();var c=function(){};c.prototype.previous;c.prototype.next;c.prototype.head;c.prototype.key;c.prototype.value;var a=function(a){this.data_={};this.head_=g();this.size=0;if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.set((c[0]),(c[1]))}}};a.prototype.set=function(c,b){var a=d(this,c);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:c,value:b};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=b}return this};a.prototype['delete']=function(b){var a=d(this,b);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};a.prototype.has=function(a){return !!d(this,a).entry};a.prototype.get=function(b){var a=d(this,b).entry;return (a&&(a.value))};a.prototype.entries=function(){return e(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return e(this,function(a){return a.key})};a.prototype.values=function(){return e(this,function(a){return a.value})};a.prototype.forEach=function(d,c){var e=this.entries();var b;while(!(b=e.next()).done){var a=b.value;d.call((c),(a[1]),(a[0]),this)}};(a.prototype)[Symbol.iterator]=a.prototype.entries;var d=function(f,d){var e=j(d);var a=f.data_[e];if(a&&$jscomp.owns(f.data_,e)){for(var c=0;c<a.length;c++){var b=a[c];if(d!==d&&b.key!==b.key||d===b.key){return {id:e,list:a,index:c,entry:b}}}}return {id:e,list:a,index:-1,entry:undefined}};var e=function(b,c){var a=b.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=b.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:c(a)}}a=null}return {done:!0,value:void 0}})};var g=function(){var a={};a.previous=a.next=a.head=a;return a};var i=0;var j=function(a){var b=a&&typeof a;if(b=='object'||b=='function'){a=(a);if(!f.has(a)){var c=''+ ++i;f.set(a,c);return c}return f.get(a)}return 'p_'+a};return a},'es6-impl','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))};return b},'es6-impl','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var e=a;var f=1;var b=a;var c=0;var d=1;while(c!=b){e*=a;d*=-1;b=(c=b)+d*e/++f}return b}return Math.log(1+a)};return b},'es6-impl','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(b){b=Number(b);return (a(b)-a(-b))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(a){if(a===0){return a}a=Number(a);var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(a){a=Number(a)>>>0;if(a===0){return 32}var b=0;if((a&4.29490176E9)===0){a<<=16;b+=16}if((a&4.27819008E9)===0){a<<=8;b+=8}if((a&4.02653184E9)===0){a<<=4;b+=4}if((a&3.221225472E9)===0){a<<=2;b+=2}if((a&2.147483648E9)===0){b++}return b};return b},'es6-impl','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);return (b(a)+b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(a){a=Number(a);if(a<0.25&&a>-0.25){var d=a;var e=1;var b=a;var c=0;while(c!=b){d*=a/++e;b=(c=b)+d}return b}return Math.exp(a)-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(b,c,g){b=Number(b);c=Number(c);var a,f,e;var d=Math.max(Math.abs(b),Math.abs(c));for(a=2;a<arguments.length;a++){d=Math.max(d,Math.abs(arguments[a]))}if(d>1.0E100||d<1.0E-100){b=b/d;c=c/d;e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a])/d;e+=f*f}return Math.sqrt(e)*d}else {e=b*b+c*c;for(a=2;a<arguments.length;a++){f=Number(arguments[a]);e+=f*f}return Math.sqrt(e)}};return b},'es6-impl','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(a,b){a=Number(a);b=Number(b);var e=a>>>16&65535;var c=a&65535;var f=b>>>16&65535;var d=b&65535;var g=e*d+c*f<<16>>>0;return c*d+g|0};return b},'es6-impl','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN10};return b},'es6-impl','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(a){return Math.log(a)/Math.LN2};return b},'es6-impl','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(a){a=Number(a);return a===0||isNaN(a)?a:a>0?1:-1};return b},'es6-impl','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(a){a=Number(a);if(a===0){return a}return (b(a)-b(-a))/2};return c},'es6-impl','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(a){a=Number(a);if(a===0){return a}var b=Math.exp(-2*Math.abs(a));var c=(1-b)/(1+b);return a<0?-c:c};return b},'es6-impl','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(a){a=Number(a);if(isNaN(a)||a===Infinity||a===-Infinity||a===0){return a}var b=Math.floor(Math.abs(a));return a<0?-b:b};return b},'es6-impl','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6-impl','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6-impl','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(a){if(typeof a!=='number'){return !1}return !isNaN(a)&&a!==Infinity&&a!==-Infinity};return b},'es6-impl','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(a){if(!Number.isFinite(a)){return !1}return a===Math.floor(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(a){return typeof a==='number'&&isNaN(a)};return b},'es6-impl','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(a){return Number.isInteger(a)&&Math.abs(a)<=Number.MAX_SAFE_INTEGER};return b},'es6-impl','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(d,e){for(var c=1;c<arguments.length;c++){var a=arguments[c];if(!a){continue}for(var b in a){if($jscomp.owns(a,b)){d[b]=a[b]}}}return d};return b},'es6-impl','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6-impl','es5');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(a,b){if(a===b){return a!==0||1/a===1/(b)}else {return a!==a&&b!==b}};return b},'es6-impl','es3');$jscomp.polyfill('Object.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a};return b},'es6','es5');$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var c=b[a];delete b[a];try{c()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(c){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(c){return function(d){if(!a){a=!0;c.call(b,d)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_((b))}else {if(isObject(b)){this.resolveToNonPromiseObj_((b))}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,(b))}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(c,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+c+', '+a|'): Promise already settled in state'+this.state_)}this.state_=c;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){(b[a]).call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,c){var a=this.createResolveAndReject_();try{b.call(c,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(e,f){var b;var c;var d=new a(function(a,d){b=a;c=d});function createCallback(a,d){if(typeof a=='function'){return function(d){try{b(a(d))}catch(g){c(g)}}}else {return d}}this.callWhenSettled_(createCallback(e,b),createCallback(f,c));return d};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(c,e){var a=this;function callback(){switch(a.state_){case b.FULFILLED:c(a.result_);break;case b.REJECTED:e(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};a.resolve=function(b){if(b instanceof a){return b}else {return new a(function(a,c){a(b)})}};a.reject=function(b){return new a(function(c,a){a(b)})};a.race=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var c=d.next();!c.done;c=d.next()){a.resolve(c.value).callWhenSettled_(e,f)}})};a.all=function(d){var c=$jscomp.makeIterator(d);var b=c.next();if(b.done){return a.resolve([])}else {return new a(function(f,g){var d=[];var e=0;function onFulfilled(a){return function(b){d[a]=b;e--;if(e==0){f(d)}}}do{d.push(undefined);e++;a.resolve(b.value).callWhenSettled_(onFulfilled(d.length-1),g);b=c.next()}while(!b.done)})}};if($jscomp.EXPOSE_ASYNC_EXECUTOR){a['$jscomp$new$AsyncExecutor']=function(){return new AsyncExecutor()}}return a},'es6-impl','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(d,b,a){return c.call(d,b,a)};return b},'es6','es3');$jscomp.polyfill('Reflect.construct',function(a){if(a){return a}var b=function(b,d,a){if(a===undefined){a=b}var e=a.prototype||Object.prototype;var c=Object.create(e);var f=Reflect.apply(b,c,d);return f||c};return b},'es6','es5');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(d,c,b){try{Object.defineProperty(d,c,b);var a=Object.getOwnPropertyDescriptor(d,c);if(!a){return !1}return a.configurable===(b.configurable||!1)&&a.enumerable===(b.enumerable||!1)&&('value' in a?a.value===b.value&&a.writable===(b.writable||!1):a.get===b.get&&a.set===b.set)}catch(e){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(b,a){if(!$jscomp.owns(b,a)){return !0}try{return delete b[a]}catch(c){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(c,b,d){if(arguments.length<=2){return c[b]}var a=$jscomp.findDescriptor(c,b);if(a){return a.get?a.get.call(d):a.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(b,a){return a in b};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if(typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(b){return b.substring(0,a.length)==a}var c=function(d){var e=[];var b=Object.getOwnPropertyNames(d);var c=Object.getOwnPropertySymbols(d);for(var a=0;a<b.length;a++){(isSymbol(b[a])?c:e).push(b[a])}return e.concat(c)};return c},'es6','es5');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(typeof Object.preventExtensions!='function'){return function(){return !1}}var b=function(a){Object.preventExtensions(a);return !Object.isExtensible(a)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(a,c,d,e){var b=$jscomp.findDescriptor(a,c);if(!b){if(Reflect.isExtensible(a)){a[c]=d;return !0}return !1}if(b.set){b.set.call(arguments.length>3?e:a,d);return !0}else {if(b.writable&&!Object.isFrozen(a)){a[c]=d;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}if(typeof ''.__proto__!='object'){return null}var b=function(a,b){try{a.__proto__=b;return a.__proto__===b}catch(c){return !1}};return b},'es6','es5');$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=(b);var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=(b).value;this.add(c)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(b){var a=this.map_['delete'](b);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};(a.prototype)[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(b,a){var c=this;this.map_.forEach(function(d){return b.call((a),d,d,c)})};return a},'es6-impl','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(a){var d=$jscomp.checkStringArgs(this,null,'codePointAt');var e=d.length;a=Number(a)||0;if(!(a>=0&&a<e)){return void 0}a=a|0;var b=d.charCodeAt(a);if(b<55296||b>56319||a+1===e){return b}var c=d.charCodeAt(a+1);if(c<56320||c>57343){return b}return (b-55296)*1024+c+9216};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'endsWith');a=a+'';if(b===void 0){b=c.length}var e=Math.max(0,Math.min(b|0,c.length));var d=a.length;while(d>0&&e>0){if(c[--e]!=a[--d]){return !1}}return d<=0};return b},'es6-impl','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(d){var b='';for(var c=0;c<arguments.length;c++){var a=Number(arguments[c]);if(a<0||a>1114111||a!==Math.floor(a)){throw new RangeError('invalid_code_point '+a)}if(a<=65535){b+=String.fromCharCode(a)}else {a-=65536;b+=String.fromCharCode(a>>>10&1023|55296);b+=String.fromCharCode(a&1023|56320)}}return b};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(a,b){var c=$jscomp.checkStringArgs(this,a,'includes');return c.indexOf(a,b||0)!==-1};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(a){var b=$jscomp.checkStringArgs(this,null,'repeat');if(a<0||a>1342177279){throw new RangeError('Invalid count value')}a=a|0;var c='';while(a){if(a&1){c+=b}if(a>>>=1){b+=b}}return c};return b},'es6-impl','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(a,f){var b=$jscomp.checkStringArgs(this,a,'startsWith');a=a+'';var g=b.length;var d=a.length;var e=Math.max(0,Math.min((f)|0,b.length));var c=0;while(c<d&&e<g){if(b[e++]!=a[c++]){return !1}}return c>=d};return b},'es6-impl','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){function tempCtor(){}tempCtor.prototype=b.prototype;a.prototype=new tempCtor();a.prototype.constructor=a;for(var c in b){if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new (b)([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var d=$jscomp.makeIterator(a);var b;while(!(b=d.next()).done){var c=b.value;this.add(c)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6-impl','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}(function(b,a){'object'===typeof exports&&'undefined'!==typeof module?module.exports=a():'function'===typeof define&&define.amd?define(a):b.CodeMirror=a()})(this,function(){function Fa(a){return new RegExp('(^|\\s)'+a+'(?:$|\\s)\\s*')}function ea(a){for(var b=a.childNodes.length;0<b;--b){a.removeChild(a.firstChild)}return a}function aa(a,b){return ea(a).appendChild(b)}function u(a,c,b,d){a=document.createElement(a);b&&(a.className=b);d&&(a.style.cssText=d);if('string'==typeof c){a.appendChild(document.createTextNode(c))}else {if(c){for(b=0;b<c.length;++b){a.appendChild(c[b])}}}return a}function ab(a,b,c,d){a=u(a,b,c,d);a.setAttribute('role','presentation');return a}function xa(b,a){3==a.nodeType&&(a=a.parentNode);if(b.contains){return b.contains(a)}do{if(11==a.nodeType&&(a=a.host),a==b){return !0}}while(a=a.parentNode)}function ta(){try{var a=document.activeElement}catch(aT){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;){a=a.shadowRoot.activeElement}return a}function Ga(a,b){var c=a.className;Fa(b).test(c)||(a.className+=(c?' ':'')+b)}function Nc(d,c){for(var b=d.split(' '),a=0;a<b.length;a++){b[a]&&!Fa(b[a]).test(c)&&(c+=' '+b[a])}return c}function Oc(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Ha(c,a,d){a||(a={});for(var b in c){!c.hasOwnProperty(b)||!1===d&&a.hasOwnProperty(b)||(a[b]=c[b])}return a}function fa(e,a,f,b,c){null==a&&(a=e.search(/[^\s\u00a0]/),-1==a&&(a=e.length));b=b||0;for(c=c||0;;){var d=e.indexOf('\t',b);if(0>d||d>=a){return c+(a-b)}c+=d-b;c+=f-c%f;b=d+1}}function N(b,c){for(var a=0;a<b.length;++a){if(b[a]==c){return a}}return -1}function Pc(d,e,f){for(var a=0,b=0;;){var c=d.indexOf('\t',a);-1==c&&(c=d.length);var g=c-a;if(c==d.length||b+g>=e){return a+Math.min(g,e-b)}b+=c-a;b+=f-b%f;a=c+1;if(b>=e){return a}}}function Qc(a){for(;_.length<=a;){_.push(z(_)+' ')}return _[a]}function z(a){return a[a.length-1]}function hc(b,d){for(var c=[],a=0;a<b.length;a++){c[a]=d(b[a],a)}return c}function hg(b,c,d){for(var a=0,e=d(c);a<b.length&&d(b[a])<=e;){a++}b.splice(a,0,c)}function Wd(){}function Xd(b,c){if(Object.create){var a=Object.create(b)}else {Wd.prototype=b,a=new Wd()}c&&Ha(c,a);return a}function Rc(a){return /\w/.test(a)||''<a&&(a.toUpperCase()!=a.toLowerCase()||aI.test(a))}function ic(a,b){return b?-1<b.source.indexOf('\\w')&&Rc(a)?!0:b.test(a):Rc(a)}function Yd(a){for(var b in a){if(a.hasOwnProperty(b)&&a[b]){return !1}}return !0}function Sc(a){return 768<=a.charCodeAt(0)&&aJ.test(a)}function Zd(b,a,c){for(;(0>c?0<a:a<b.length)&&Sc(b.charAt(a));){a+=c}return a}function rb(d,b,c){for(var e=b>c?-1:1;;){if(b==c){return b}var a=(b+c)/2;a=0>e?Math.ceil(a):Math.floor(a);if(a==b){return d(a)?b:c}d(a)?c=a:b=a+e}}function kg(a,d,c){this.input=c;this.scrollbarFiller=u('div',null,'CodeMirror-scrollbar-filler');this.scrollbarFiller.setAttribute('cm-not-content','true');this.gutterFiller=u('div',null,'CodeMirror-gutter-filler');this.gutterFiller.setAttribute('cm-not-content','true');this.lineDiv=ab('div',null,'CodeMirror-code');this.selectionDiv=u('div',null,null,'position: relative; z-index: 1');this.cursorDiv=u('div',null,'CodeMirror-cursors');this.measure=u('div',null,'CodeMirror-measure');this.lineMeasure=u('div',null,'CodeMirror-measure');this.lineSpace=ab('div',[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,'position: relative; outline: none');var f=ab('div',[this.lineSpace],'CodeMirror-lines');this.mover=u('div',[f],null,'position: relative');this.sizer=u('div',[this.mover],'CodeMirror-sizer');this.sizerWidth=null;this.heightForcer=u('div',null,null,'position: absolute; height: 30px; width: 1px;');this.gutters=u('div',null,'CodeMirror-gutters');this.lineGutter=null;this.scroller=u('div',[this.sizer,this.heightForcer,this.gutters],'CodeMirror-scroll');this.scroller.setAttribute('tabIndex','-1');this.wrapper=u('div',[this.scrollbarFiller,this.gutterFiller,this.scroller],'CodeMirror');b&&8>e&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);h||t&&U||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=d.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function t(b,a){a-=b.first;if(0>a||a>=b.size){throw Error('There is no line '+(a+b.first)+' in the document.')}for(var c=b;!c.lines;){for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(a<f){c=e;break}a-=f}}return c.lines[a]}function Ia(e,a,b){var d=[],c=a.line;e.iter(a.line,b.line+1,function(e){e=e.text;c==b.line&&(e=e.slice(0,b.ch));c==a.line&&(e=e.slice(a.ch));d.push(e);++c});return d}function Tc(b,c,d){var a=[];b.iter(c,d,function(b){a.push(b.text)});return a}function na(b,d){var c=d-b.height;if(c){for(var a=b;a;a=a.parent){a.height+=c}}}function C(a){if(null==a.parent){return null}var c=a.parent;a=N(c.lines,a);for(var b=c.parent;b;c=b,b=b.parent){for(var d=0;b.children[d]!=c;++d){a+=b.children[d].chunkSize()}}return a+c.first}function Ja(a,d){var e=a.first;a: do{for(var b=0;b<a.children.length;++b){var c=a.children[b],f=c.height;if(d<f){a=c;continue a}d-=f;e+=c.chunkSize()}return e}while(!a.lines);for(b=0;b<a.lines.length;++b){c=a.lines[b].height;if(d<c){break}d-=c}return e+b}function tb(a,b){return b>=a.first&&b<a.first+a.size}function Uc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function p(b,c,a){void 0===a&&(a=null);if(!(this instanceof p)){return new p(b,c,a)}this.line=b;this.ch=c;this.sticky=a}function x(a,b){return a.line-b.line||a.ch-b.ch}function Vc(a,b){return a.sticky==b.sticky&&0==x(a,b)}function Wc(a){return p(a.line,a.ch)}function jc(a,b){return 0>x(a,b)?b:a}function kc(a,b){return 0>x(a,b)?a:b}function v(c,b){if(b.line<c.first){return p(c.first,0)}var a=c.first+c.size-1;if(b.line>a){return p(a,t(c,a).text.length)}a=t(c,b.line).text.length;var d=b.ch;a=null==d||d>a?p(b.line,a):0>d?p(b.line,0):b;return a}function $d(d,b){for(var c=[],a=0;a<b.length;a++){c[a]=v(d,b[a])}return c}function lc(a,b,c){this.marker=a;this.from=b;this.to=c}function ub(a,d){if(a){for(var b=0;b<a.length;++b){var c=a[b];if(c.marker==d){return c}}}}function Xc(l,h){if(h.full){return null}var a=tb(l,h.from.line)&&t(l,h.from.line).markedSpans,g=tb(l,h.to.line)&&t(l,h.to.line).markedSpans;if(!a&&!g){return null}var f=h.from.ch,c=h.to.ch,i=0==x(h.from,h.to),j;if(a){for(var b=0;b<a.length;++b){var d=a[b],k=d.marker;if(null==d.from||(k.inclusiveLeft?d.from<=f:d.from<f)||!(d.from!=f||'bookmark'!=k.type||i&&d.marker.insertLeft)){var n=null==d.to||(k.inclusiveRight?d.to>=f:d.to>f);(j||(j=[])).push(new lc(k,d.from,n?null:d.to))}}}a=j;var e;if(g){for(j=0;j<g.length;++j){if(b=g[j],d=b.marker,null==b.to||(d.inclusiveRight?b.to>=c:b.to>c)||b.from==c&&'bookmark'==d.type&&(!i||b.marker.insertLeft)){k=null==b.from||(d.inclusiveLeft?b.from<=c:b.from<c),(e||(e=[])).push(new lc(d,k?null:b.from-c,null==b.to?null:b.to-c))}}}g=e;c=1==h.text.length;i=z(h.text).length+(c?f:0);if(a){for(e=0;e<a.length;++e){if(j=a[e],null==j.to){(b=ub(g,j.marker),b)?c&&(j.to=null==b.to?null:b.to+i):j.to=f}}}if(g){for(f=0;f<g.length;++f){e=g[f],null!=e.to&&(e.to+=i),null==e.from?ub(a,e.marker)||(e.from=i,c&&(a||(a=[])).push(e)):(e.from+=i,c&&(a||(a=[])).push(e))}}a&&(a=ae(a));g&&g!=a&&(g=ae(g));f=[a];if(!c){c=h.text.length-2;var m;if(0<c&&a){for(i=0;i<a.length;++i){null==a[i].to&&(m||(m=[])).push(new lc(a[i].marker,null,null))}}for(a=0;a<c;++a){f.push(m)}f.push(g)}return f}function ae(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function lg(a,c,d){var b=null;a.iter(c.line,d.line+1,function(a){if(a.markedSpans){for(var c=0;c<a.markedSpans.length;++c){var d=a.markedSpans[c].marker;!d.readOnly||b&&-1!=N(b,d)||(b||(b=[])).push(d)}}});if(!b){return null}a=[{from:c,to:d}];for(c=0;c<b.length;++c){d=b[c];for(var e=d.find(0),g=0;g<a.length;++g){var f=a[g];if(!(0>x(f.to,e.from)||0<x(f.from,e.to))){var h=[g,1],i=x(f.from,e.from),j=x(f.to,e.to);(0>i||!d.inclusiveLeft&&!i)&&h.push({from:f.from,to:e.from});(0<j||!d.inclusiveRight&&!j)&&h.push({from:e.to,to:f.to});a.splice.apply(a,h);g+=h.length-3}}}return a}function be(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){b[c].marker.detachLine(a)}a.markedSpans=null}}function ce(c,a){if(a){for(var b=0;b<a.length;++b){a[b].marker.attachLine(c)}c.markedSpans=a}}function de(b,c){var a=b.lines.length-c.lines.length;if(0!=a){return a}a=b.find();var d=c.find(),e=x(a.from,d.from)||(b.inclusiveLeft?-1:0)-(c.inclusiveLeft?-1:0);return e?-e:(a=x(a.to,d.to)||(b.inclusiveRight?1:0)-(c.inclusiveRight?1:0))?a:c.id-b.id}function Ka(e,f){var b=u&&e.markedSpans;if(b){for(var a,c=0;c<b.length;++c){if(a=b[c],a.marker.collapsed&&null==(f?a.from:a.to)&&(!d||0>de(d,a.marker))){var d=a.marker}}}return d}function ee(a,d,g,h,e){a=t(a,d);if(a=u&&a.markedSpans){for(d=0;d<a.length;++d){var b=a[d];if(b.marker.collapsed){var c=b.marker.find(0),f=x(c.from,g)||(b.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),i=x(c.to,h)||(b.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=f&&0>=i||0>=f&&0<=i)&&(0>=f&&(b.marker.inclusiveRight&&e.inclusiveLeft?0<=x(c.to,g):0<x(c.to,g))||0<=f&&(b.marker.inclusiveRight&&e.inclusiveLeft?0>=x(c.from,h):0>x(c.from,h)))){return !0}}}}}function oa(a){for(var b;b=Ka(a,!0);){a=b.find(-1,!0).line}return a}function Yc(d,a){var b=t(d,a),c=oa(b);return b==c?a:C(c)}function fe(c,a){if(a>c.lastLine()){return a}var b=t(c,a),d;if(!La(c,b)){return a}for(;d=Ka(b,!1);){b=d.find(1,!0).line}return C(b)+1}function La(e,d){var b=u&&d.markedSpans;if(b){for(var a,c=0;c<b.length;++c){if(a=b[c],a.marker.collapsed&&(null==a.from||!a.marker.widgetNode&&0==a.from&&a.marker.inclusiveLeft&&Zc(e,d,a))){return !0}}}}function Zc(e,c,a){if(null==a.to){return c=a.marker.find(1,!0),Zc(e,c.line,ub(c.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==c.text.length){return !0}for(var b,d=0;d<c.markedSpans.length;++d){if(b=c.markedSpans[d],b.marker.collapsed&&!b.marker.widgetNode&&b.from==a.to&&(null==b.to||b.to!=a.from)&&(b.marker.inclusiveLeft||a.marker.inclusiveRight)&&Zc(e,c,b)){return !0}}}function pa(a){a=oa(a);for(var e=0,c=a.parent,b=0;b<c.lines.length;++b){var d=c.lines[b];if(d==a){break}else {e+=d.height}}for(a=c.parent;a;c=a,a=c.parent){for(b=0;b<a.children.length&&(d=a.children[b],d!=c);++b){e+=d.height}}return e}function mc(a){if(0==a.height){return 0}for(var d=a.text.length,b,c=a;b=Ka(c,!0);){b=b.find(0,!0),c=b.from.line,d+=b.from.ch-b.to.ch}for(c=a;b=Ka(c,!1);){a=b.find(0,!0),d-=c.text.length-a.from.ch,c=a.to.line,d+=c.text.length-a.to.ch}return d}function $c(b){var a=b.display;b=b.doc;a.maxLine=t(b,b.first);a.maxLineLength=mc(a.maxLine);a.maxLineChanged=!0;b.iter(function(b){var c=mc(b);c>a.maxLineLength&&(a.maxLineLength=c,a.maxLine=b)})}function mg(e,a,c,f){if(!e){return f(a,c,'ltr',0)}for(var g=!1,d=0;d<e.length;++d){var b=e[d];if(b.from<c&&b.to>a||a==c&&b.to==a){f(Math.max(b.from,a),Math.min(b.to,c),1==b.level?'rtl':'ltr',d),g=!0}}g||f(a,c,'ltr')}function vb(e,c,f){var d;V=null;for(var a=0;a<e.length;++a){var b=e[a];if(b.from<c&&b.to>c){return a}b.to==c&&(b.from!=b.to&&'before'==f?d=a:V=a);b.from==c&&(b.from!=b.to&&'before'!=f?d=a:V=a)}return null!=d?d:V}function ua(a,c){var b=a.order;null==b&&(b=a.order=aK(a.text,c));return b}function ba(a,c,b){if(a.removeEventListener){a.removeEventListener(c,b,!1)}else {if(a.detachEvent){a.detachEvent('on'+c,b)}else {var d=(a=a._handlers)&&a[c];d&&(b=N(d,b),-1<b&&(a[c]=d.slice(0,b).concat(d.slice(b+1))))}}}function G(c,d){var a=c._handlers&&c._handlers[d]||aa;if(a.length){for(var e=Array.prototype.slice.call(arguments,2),b=0;b<a.length;++b){a[b].apply(null,e)}}}function K(b,a,c){'string'==typeof a&&(a={type:a,preventDefault:function(){this.defaultPrevented=!0}});G(b,c||a.type,b,a);return ad(a)||a.codemirrorIgnore}function ge(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c){-1==N(a,b[c])&&a.push(b[c])}}}function ha(a,b){return 0<(a._handlers&&a._handlers[b]||aa).length}function bb(b){b.prototype.on=function(b,c){a(this,b,c)};b.prototype.off=function(a,b){ba(this,a,b)}}function U(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function he(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function ad(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function xb(a){U(a);he(a)}function ie(b){var a=b.which;null==a&&(b.button&1?a=1:b.button&2?a=3:b.button&4&&(a=2));n&&b.ctrlKey&&1==a&&(a=3);return a}function og(a){if(null==al){var c=u('span','​');aa(a,u('span',[c,document.createTextNode('x')]));0!=a.firstChild.offsetHeight&&(al=1>=c.offsetWidth&&2<c.offsetHeight&&!(b&&8>e))}a=al?u('span','​'):u('span',' ',null,'display: inline-block; width: 1px; margin-right: -1px');a.setAttribute('cm-text','');return a}function pg(b,a){2<arguments.length&&(a.dependencies=Array.prototype.slice.call(arguments,2));am[b]=a}function oc(a){if('string'==typeof a&&A.hasOwnProperty(a)){a=A[a]}else {if(a&&'string'==typeof a.name&&A.hasOwnProperty(a.name)){var b=A[a.name];'string'==typeof b&&(b={name:b});a=Xd(b,a);a.name=b.name}else {if('string'==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a)){return oc('application/xml')}if('string'==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a)){return oc('application/json')}}}return 'string'==typeof a?{name:a}:a||{name:'null'}}function dd(e,a){a=oc(a);var b=am[a.name];if(!b){return dd(e,'text/plain')}b=b(e,a);if(B.hasOwnProperty(a.name)){var d=B[a.name],c;for(c in d){d.hasOwnProperty(c)&&(b.hasOwnProperty(c)&&(b['_'+c]=b[c]),b[c]=d[c])}}b.name=a.name;a.helperType&&(b.helperType=a.helperType);if(a.modeProps){for(var f in a.modeProps){b[f]=a.modeProps[f]}}return b}function qg(a,b){var c=B.hasOwnProperty(a)?B[a]:B[a]={};Ha(b,c)}function Ma(d,a){if(!0===a){return a}if(d.copyState){return d.copyState(a)}var e={},c;for(c in a){var b=a[c];b instanceof Array&&(b=b.concat([]));e[c]=b}return e}function ed(b,c){for(var a;b.innerMode;){a=b.innerMode(c);if(!a||a.mode==b){break}c=a.state;b=a.mode}return a||{mode:b,state:c}}function je(a,b,c){return a.startState?a.startState(b,c):!0}function ke(c,g,b,e){var a=[c.state.modeGen],d={};le(c,g.text,c.doc.mode,b,function(b,c){return a.push(b,c)},d,e);var h=b.state;e=function(j){b.baseTokens=a;var f=c.state.overlays[j],e=1,i=0;b.state=!0;le(c,g.text,f.mode,b,function(d,g){for(var b=e;i<d;){var c=a[e];c>d&&a.splice(e,1,d,a[e+1],c);e+=2;i=Math.min(d,c)}if(g){if(f.opaque){a.splice(b,e-b,d,'overlay '+g),e=b+2}else {for(;b<e;b+=2){c=a[b+1],a[b+1]=(c?c+' ':'')+'overlay '+g}}}},d);b.state=h;b.baseTokens=null;b.baseTokenPos=1};for(var f=0;f<c.state.overlays.length;++f){e(f)}return {styles:a,classes:d.bgClass||d.textClass?d:null}}function me(b,a,f){if(!a.styles||a.styles[0]!=b.state.modeGen){var c=yb(b,C(a)),d=a.text.length>b.options.maxHighlightLength&&Ma(b.doc.mode,c.state),e=ke(b,a,c);d&&(c.state=d);a.stateAfter=c.save(!d);a.styles=e.styles;e.classes?a.styleClasses=e.classes:a.styleClasses&&(a.styleClasses=null);f===b.doc.highlightFrontier&&(b.doc.modeFrontier=Math.max(b.doc.modeFrontier,++b.doc.highlightFrontier))}return a.styles}function yb(d,e,f){var a=d.doc,g=d.display;if(!a.mode.startState){return new p(a,!0,e)}var c=rg(d,e,f),h=c>a.first&&t(a,c-1).stateAfter,b=h?p.fromSaved(a,h,c):new p(a,je(a.mode),c);a.iter(c,e,function(c){fd(d,c.text,b);var a=b.line;c.stateAfter=a==e-1||0==a%5||a>=g.viewFrom&&a<g.viewTo?b.save():null;b.nextLine()});f&&(a.modeFrontier=b.line);return b}function fd(a,c,b,e){var d=a.doc.mode;a=new f(c,a.options.tabSize,b);a.start=a.pos=e||0;for(''==c&&ne(d,b.state);!a.eol();){gd(d,a,b.state),a.start=a.pos}}function ne(a,c){if(a.blankLine){return a.blankLine(c)}if(a.innerMode){var b=ed(a,c);if(b.mode.blankLine){return b.mode.blankLine(b.state)}}}function gd(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=ed(a,c).mode);var f=a.token(b,c);if(b.pos>b.start){return f}}throw Error('Mode '+a.name+' failed to advance stream.')}function oe(a,c,b,d){var e=a.doc,i=e.mode;c=v(e,c);var j=t(e,c.line);b=yb(a,c.line,b);a=new f(j.text,a.options.tabSize,b);var g;for(d&&(g=[]);(d||a.pos<c.ch)&&!a.eol();){a.start=a.pos;var h=gd(i,a,b.state);d&&g.push(new aA(a,h,Ma(e.mode,b.state)))}return d?g:new aA(a,h,b.state)}function qe(b,c){if(b){for(;;){var a=b.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a){break}b=b.slice(0,a.index)+b.slice(a.index+a[0].length);var d=a[1]?'bgClass':'textClass';null==c[d]?c[d]=a[2]:(new RegExp('(?:^|s)'+a[2]+'(?:$|s)')).test(c[d])||(c[d]+=' '+a[2])}}return b}function le(b,e,j,g,m,n,o){var h=j.flattenSpans;null==h&&(h=b.options.flattenSpans);var c=0,i=null,a=new f(e,b.options.tabSize,g),l=b.options.addModeClass&&[null];for(''==e&&qe(ne(j,g.state),n);!a.eol();){if(a.pos>b.options.maxHighlightLength){h=!1;o&&fd(b,e,g,a.pos);a.pos=e.length;var d=null}else {d=qe(gd(j,a,g.state,l),n)}if(l){var k=l[0].name;k&&(d='m-'+(d?k+' '+d:k))}if(!h||i!=d){for(;c<a.start;){c=Math.min(a.start,c+5000),m(c,i)}i=d}a.start=a.pos}for(;c<a.pos;){b=Math.min(a.pos,c+5000),m(b,i),c=b}}function rg(d,a,g){for(var h,e,c=d.doc,i=g?-1:a-(d.doc.mode.innerMode?1000:100);a>i;--a){if(a<=c.first){return c.first}var b=t(c,a-1),f=b.stateAfter;if(f&&(!g||a+(f instanceof ab?f.lookAhead:0)<=c.modeFrontier)){return a}b=fa(b.text,null,d.options.tabSize);if(null==e||h>b){e=a-1,h=b}}return e}function sg(a,c){a.modeFrontier=Math.min(a.modeFrontier,c);if(!(a.highlightFrontier<c-10)){for(var d=a.first,b=c-1;b>d;b--){var e=t(a,b).stateAfter;if(e&&(!(e instanceof ab)||b+e.lookAhead<c)){d=b+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,d)}}function re(a,c){if(!a||/^\s*$/.test(a)){return null}var b=c.addModeClass?aQ:aS;return b[a]||(b[a]=a.replace(/\S+/g,'cm-$&'))}function se(l,i){var c=ab('span',null,null,h?'padding-right: .1px':null);c={pre:ab('pre',[c],'CodeMirror-line'),content:c,col:0,pos:0,cm:l,trailingSpace:!1,splitSpaces:(b||h)&&l.getOption('lineWrapping')};i.measure={};for(var p=0;p<=(i.rest?i.rest.length:0);p++){var m=p?i.rest[p-1]:i.line,j=void 0;c.pos=0;c.addToken=vg;var a=l.display.measure;if(null!=an){a=an}else {var q=aa(a,document.createTextNode('AخA')),r=W(q,0,1).getBoundingClientRect();q=W(q,1,2).getBoundingClientRect();ea(a);a=r&&r.left!=r.right?an=3>q.right-r.right:!1}a&&(j=ua(m,l.doc.direction))&&(c.addToken=wg(c.addToken,j));c.map=[];var s=i!=l.display.externalMeasured&&C(m);a: {var v=q=r=a=void 0,w=void 0,u=void 0,A=void 0;j=c;s=me(l,m,s);var y=m.markedSpans,z=m.text,x=0;if(y){for(var B=z.length,d=0,C=1,t='',n=0;;){if(n==d){w=v=q=r=u='';a=null;n=Infinity;for(var o=[],g=void 0,k=0;k<y.length;++k){var e=y[k],f=e.marker;'bookmark'==f.type&&e.from==d&&f.widgetNode?o.push(f):e.from<=d&&(null==e.to||e.to>d||f.collapsed&&e.to==d&&e.from==d)?(null!=e.to&&e.to!=d&&n>e.to&&(n=e.to,v=''),f.className&&(w+=' '+f.className),f.css&&(u=(u?u+';':'')+f.css),f.startStyle&&e.from==d&&(q+=' '+f.startStyle),f.endStyle&&e.to==n&&(g||(g=[])).push(f.endStyle,e.to),f.title&&!r&&(r=f.title),f.collapsed&&(!a||0>de(a.marker,f))&&(a=e)):e.from>d&&n>e.from&&(n=e.from)}if(g){for(k=0;k<g.length;k+=2){g[k+1]==n&&(v+=' '+g[k])}}if(!a||a.from==d){for(g=0;g<o.length;++g){te(j,0,o[g])}}if(a&&(a.from||0)==d){te(j,(null==a.to?B+1:a.to)-d,a.marker,null==a.from);if(null==a.to){break l}a.to==d&&(a=!1)}}if(d>=B){break}for(o=Math.min(B,n);;){if(t){g=d+t.length;a||(k=g>o?t.slice(0,o-d):t,j.addToken(j,k,A?A+w:w,q,d+k.length==n?v:'',r,u));if(g>=o){t=t.slice(o-d);d=o;break}d=g;q=''}t=z.slice(x,x=s[C++]);A=re(s[C++],j.cm.options)}}}else {for(a=1;a<s.length;a+=2){j.addToken(j,z.slice(x,x=s[a]),re(s[a+1],j.cm.options))}}}m.styleClasses&&(m.styleClasses.bgClass&&(c.bgClass=Nc(m.styleClasses.bgClass,c.bgClass||'')),m.styleClasses.textClass&&(c.textClass=Nc(m.styleClasses.textClass,c.textClass||'')));0==c.map.length&&c.map.push(0,0,c.content.appendChild(og(l.display.measure)));0==p?(i.measure.map=c.map,i.measure.cache={}):((i.measure.maps||(i.measure.maps=[])).push(c.map),(i.measure.caches||(i.measure.caches=[])).push({}))}h&&(p=c.content.lastChild,/\bcm-tab\b/.test(p.className)||p.querySelector&&p.querySelector('.cm-tab'))&&(c.content.className='cm-tab-wrap-hack');G(l,'renderLine',l,i.line,c.pre);c.pre.className&&(c.textClass=Nc(c.pre.className,c.textClass||''));return c}function xg(b){var a=u('span','•','cm-invalidchar');a.title='\\u'+b.charCodeAt(0).toString(16);a.setAttribute('aria-label',a.title);return a}function vg(a,c,o,j,n,p,q){if(c){if(a.splitSpaces){var d=a.trailingSpace;if(1<c.length&&!/  /.test(c)){d=c}else {for(var k='',h=0;h<c.length;h++){var i=c.charAt(h);' '!=i||!d||h!=c.length-1&&32!=c.charCodeAt(h+1)||(i=' ');k+=i;d=' '==i}d=k}}else {d=c}k=d;h=a.cm.state.specialChars;i=!1;if(h.test(c)){d=document.createDocumentFragment();for(var l=0;;){h.lastIndex=l;var g=h.exec(c),f=g?g.index-l:c.length-l;if(f){var m=document.createTextNode(k.slice(l,l+f));b&&9>e?d.appendChild(u('span',[m])):d.appendChild(m);a.map.push(a.pos,a.pos+f,m);a.col+=f;a.pos+=f}if(!g){break}l+=f+1;'\t'==g[0]?(g=a.cm.options.tabSize,g-=a.col%g,f=d.appendChild(u('span',Qc(g),'cm-tab')),f.setAttribute('role','presentation'),f.setAttribute('cm-text','\t'),a.col+=g):('\r'==g[0]||'\n'==g[0]?(f=d.appendChild(u('span','\r'==g[0]?'␍':'␤','cm-invalidchar')),f.setAttribute('cm-text',g[0])):(f=a.cm.options.specialCharPlaceholder(g[0]),f.setAttribute('cm-text',g[0]),b&&9>e?d.appendChild(u('span',[f])):d.appendChild(f)),a.col+=1);a.map.push(a.pos,a.pos+1,f);a.pos++}}else {a.col+=c.length,d=document.createTextNode(k),a.map.push(a.pos,a.pos+c.length,d),b&&9>e&&(i=!0),a.pos+=c.length}a.trailingSpace=32==k.charCodeAt(c.length-1);if(o||j||n||i||q){return c=o||'',j&&(c+=j),n&&(c+=n),j=u('span',[d],c,q),p&&(j.title=p),a.content.appendChild(j)}a.content.appendChild(d)}}function wg(a,b){return function(g,e,f,h,l,j,k){f=f?f+' cm-force-border':'cm-force-border';for(var d=g.pos,m=d+e.length;;){for(var c=void 0,i=0;i<b.length&&!(c=b[i],c.to>d&&c.from<=d);i++){}if(c.to>=m){return a(g,e,f,h,l,j,k)}a(g,e.slice(0,c.to-d),f,h,null,j,k);h=null;e=e.slice(c.to-d);d=c.to}}}function te(a,c,d,e){var b=!e&&d.widgetNode;b&&a.map.push(a.pos,a.pos+c,b);!e&&a.cm.display.input.needsContentAttribute&&(b||(b=a.content.appendChild(document.createElement('span'))),b.setAttribute('cm-marker',d.id));b&&(a.cm.display.input.setUneditable(b),a.content.appendChild(b));a.pos+=c;a.trailingSpace=!1}function ue(d,c,e){for(var a=this.line=c,b;a=Ka(a,!1);){a=a.find(1,!0).line,(b||(b=[])).push(a)}this.size=(this.rest=b)?C(z(this.rest))-e+1:1;this.node=this.text=null;this.hidden=La(d,c)}function qc(c,b,e){var d=[],a;for(a=b;a<e;){b=new ue(c.doc,t(c.doc,a),a),a+=b.size,d.push(b)}return d}function yg(f,g){var b=f.ownsGroup;if(b){try{var d=b.delayedCallbacks,c=0;do{for(;c<d.length;c++){d[c].call(null)}for(var e=0;e<b.ops.length;e++){var a=b.ops[e];if(a.cursorActivityHandlers){for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;){a.cursorActivityHandlers[a.cursorActivityCalled++].call(null,a.cm)}}}}while(c<d.length)}finally{C=null,g(b)}}}function P(d,e){var a=d._handlers&&d._handlers[e]||aa;if(a.length){var f=Array.prototype.slice.call(arguments,2);if(C){var b=C.delayedCallbacks}else {G?b=G:(b=G=[],setTimeout(zg,0))}for(var g=function(c){b.push(function(){return a[c].apply(null,f)})},c=0;c<a.length;++c){g(c)}}}function zg(){var b=G;G=null;for(var a=0;a<b.length;++a){b[a]()}}function ve(e,d,j,h){for(var g=0;g<d.changes.length;g++){var c=d.changes[g];if('text'==c){c=e;var a=d,f=a.text.className,b=we(c,a);a.text==a.node&&(a.node=b.pre);a.text.parentNode.replaceChild(b.pre,a.text);a.text=b.pre;b.bgClass!=a.bgClass||b.textClass!=a.textClass?(a.bgClass=b.bgClass,a.textClass=b.textClass,id(c,a)):f&&(a.text.className=f)}else {if('gutter'==c){xe(e,d,j,h)}else {if('class'==c){id(e,d)}else {if('widget'==c){c=e;a=d;f=h;a.alignable&&(a.alignable=null);b=a.node.firstChild;for(var i;b;b=i){i=b.nextSibling,'CodeMirror-linewidget'==b.className&&a.node.removeChild(b)}ye(c,a,f)}}}}}d.changes=null}function Bb(a){a.node==a.text&&(a.node=u('div',null,null,'position: relative'),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),b&&8>e&&(a.node.style.zIndex=2));return a.node}function we(b,c){var a=b.display.externalMeasured;return a&&a.line==c.line?(b.display.externalMeasured=null,c.measure=a.measure,a.built):se(b,c)}function id(d,a){var b=a.bgClass?a.bgClass+' '+(a.line.bgClass||''):a.line.bgClass;b&&(b+=' CodeMirror-linebackground');if(a.background){b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null)}else {if(b){var c=Bb(a);a.background=c.insertBefore(u('div',null,b),c.firstChild);d.display.input.setUneditable(a.background)}}a.line.wrapClass?Bb(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className='');a.text.className=(a.textClass?a.textClass+' '+(a.line.textClass||''):a.line.textClass)||''}function xe(b,a,e,c){a.gutter&&(a.node.removeChild(a.gutter),a.gutter=null);a.gutterBackground&&(a.node.removeChild(a.gutterBackground),a.gutterBackground=null);if(a.line.gutterClass){var d=Bb(a);a.gutterBackground=u('div',null,'CodeMirror-gutter-background '+a.line.gutterClass,'left: '+(b.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+'px; width: '+c.gutterTotalWidth+'px');b.display.input.setUneditable(a.gutterBackground);d.insertBefore(a.gutterBackground,a.text)}d=a.line.gutterMarkers;if(b.options.lineNumbers||d){var g=Bb(a),f=a.gutter=u('div',null,'CodeMirror-gutter-wrapper','left: '+(b.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+'px');b.display.input.setUneditable(f);g.insertBefore(f,a.text);a.line.gutterClass&&(f.className+=' '+a.line.gutterClass);!b.options.lineNumbers||d&&d['CodeMirror-linenumbers']||(a.lineNumber=f.appendChild(u('div',Uc(b.options,e),'CodeMirror-linenumber CodeMirror-gutter-elt','left: '+c.gutterLeft['CodeMirror-linenumbers']+'px; width: '+b.display.lineNumInnerWidth+'px')));if(d){for(a=0;a<b.options.gutters.length;++a){e=b.options.gutters[a],(g=d.hasOwnProperty(e)&&d[e])&&f.appendChild(u('div',[g],'CodeMirror-gutter-elt','left: '+c.gutterLeft[e]+'px; width: '+c.gutterWidth[e]+'px'))}}}}function Ag(c,a,e,d){var b=we(c,a);a.text=a.node=b.pre;b.bgClass&&(a.bgClass=b.bgClass);b.textClass&&(a.textClass=b.textClass);id(c,a);xe(c,a,e,d);ye(c,a,d);return a.node}function ye(c,a,d){ze(c,a.line,a,d,!0);if(a.rest){for(var b=0;b<a.rest.length;b++){ze(c,a.rest[b],a,d,!1)}}}function ze(k,b,c,l,m){if(b.widgets){var i=Bb(c),h=0;for(b=b.widgets;h<b.length;++h){var d=b[h],e=u('div',[d.node],'CodeMirror-linewidget');d.handleMouseEvents||e.setAttribute('cm-ignore-events','true');var g=d,a=e,f=l;if(g.noHScroll){(c.alignable||(c.alignable=[])).push(a);var j=f.wrapperWidth;a.style.left=f.fixedPos+'px';g.coverGutter||(j-=f.gutterTotalWidth,a.style.paddingLeft=f.gutterTotalWidth+'px');a.style.width=j+'px'}g.coverGutter&&(a.style.zIndex=5,a.style.position='relative',g.noHScroll||(a.style.marginLeft=-f.gutterTotalWidth+'px'));k.display.input.setUneditable(e);m&&d.above?i.insertBefore(e,c.gutter||c.text):i.appendChild(e);P(d,'redraw')}}}function Cb(a){if(null!=a.height){return a.height}var b=a.doc.cm;if(!b){return 0}if(!xa(document.body,a.node)){var c='position: relative;';a.coverGutter&&(c+='margin-left: -'+b.display.gutters.offsetWidth+'px;');a.noHScroll&&(c+='width: '+b.display.wrapper.clientWidth+'px;');aa(b.display.measure,u('div',[a.node],null,c))}return a.height=a.node.parentNode.offsetHeight}function va(b,c){for(var a=c.target||c.srcElement;a!=b.wrapper;a=a.parentNode){if(!a||1==a.nodeType&&'true'==a.getAttribute('cm-ignore-events')||a.parentNode==b.sizer&&a!=b.mover){return !0}}}function jd(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Ae(b){if(b.cachedPaddingH){return b.cachedPaddingH}var a=aa(b.measure,u('pre','x'));a=window.getComputedStyle?window.getComputedStyle(a):a.currentStyle;a={left:parseInt(a.paddingLeft),right:parseInt(a.paddingRight)};isNaN(a.left)||isNaN(a.right)||(b.cachedPaddingH=a);return a}function ra(a){return 30-a.display.nativeBarWidth}function Na(a){return a.display.scroller.clientWidth-ra(a)-a.display.barWidth}function kd(a){return a.display.scroller.clientHeight-ra(a)-a.display.barHeight}function Be(a,b,d){if(a.line==b){return {map:a.measure.map,cache:a.measure.cache}}for(var c=0;c<a.rest.length;c++){if(a.rest[c]==b){return {map:a.measure.maps[c],cache:a.measure.caches[c]}}}for(b=0;b<a.rest.length;b++){if(C(a.rest[b])>d){return {map:a.measure.maps[b],cache:a.measure.caches[b],before:!0}}}}function ld(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo){return a.display.view[Oa(a,b)]}var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size){return c}}function Pa(b,e){var d=C(e),a=ld(b,d);a&&!a.text?a=null:a&&a.changes&&(ve(b,a,d,md(b)),b.curOp.forceUpdate=!0);if(!a){var c=oa(e);a=C(c);c=b.display.externalMeasured=new ue(b.doc,c,a);c.lineN=a;a=c.built=se(b,c);c.text=a.pre;aa(b.display.lineMeasure,a.pre);a=c}d=Be(a,e,d);return {line:e,view:a,rect:null,map:d.map,cache:d.cache,before:d.before,hasHeights:!1}}function ja(j,g,k,m,o){g.before&&(k=-1);var n=k+(m||'');if(g.cache.hasOwnProperty(n)){j=g.cache[n]}else {g.rect||(g.rect=g.view.text.getBoundingClientRect());if(!g.hasHeights){var c=g.view,i=g.rect,d=j.options.lineWrapping,l=d&&Na(j);if(!c.measure.heights||d&&c.measure.width!=l){var f=c.measure.heights=[];if(d){for(c.measure.width=l,c=c.text.firstChild.getClientRects(),d=0;d<c.length-1;d++){l=c[d];var p=c[d+1];2<Math.abs(l.bottom-p.bottom)&&f.push((l.bottom+p.top)/2-i.top)}}f.push(i.bottom-i.top)}g.hasHeights=!0}f=m;c=Ce(g.map,k,f);m=c.node;i=c.start;d=c.end;k=c.collapse;if(3==m.nodeType){for(var h=0;4>h;h++){for(;i&&Sc(g.line.text.charAt(c.coverStart+i));){--i}for(;c.coverStart+d<c.coverEnd&&Sc(g.line.text.charAt(c.coverStart+d));){++d}if(b&&9>e&&0==i&&d==c.coverEnd-c.coverStart){var a=m.parentNode.getBoundingClientRect()}else {a=W(m,i,d).getClientRects();d=aq;if('left'==f){for(l=0;l<a.length&&(d=a[l]).left==d.right;l++){}}else {for(l=a.length-1;0<=l&&(d=a[l]).left==d.right;l--){}}a=d}if(a.left||a.right||0==i){break}d=i;--i;k='right'}b&&11>e&&((h=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=ao?h=ao:(f=aa(j.display.measure,u('span','x')),h=f.getBoundingClientRect(),f=W(f,0,1).getBoundingClientRect(),h=ao=1<Math.abs(h.left-f.left)),h=!h),h||(h=screen.logicalXDPI/screen.deviceXDPI,f=screen.logicalYDPI/screen.deviceYDPI,a={left:a.left*h,right:a.right*h,top:a.top*f,bottom:a.bottom*f}))}else {0<i&&(k=f='right'),a=j.options.lineWrapping&&1<(h=m.getClientRects()).length?h['right'==f?h.length-1:0]:m.getBoundingClientRect()}!(b&&9>e)||i||a&&(a.left||a.right)||(a=(a=m.parentNode.getClientRects()[0])?{left:a.left,right:a.left+Db(j.display),top:a.top,bottom:a.bottom}:aq);m=a.top-g.rect.top;i=a.bottom-g.rect.top;h=(m+i)/2;f=g.view.measure.heights;for(c=0;c<f.length-1&&!(h<f[c]);c++){}k={left:('right'==k?a.right:a.left)-g.rect.left,right:('left'==k?a.left:a.right)-g.rect.left,top:c?f[c-1]:0,bottom:f[c]};a.left||a.right||(k.bogus=!0);j.options.singleCursorHeightPerLine||(k.rtop=m,k.rbottom=i);j=k;j.bogus||(g.cache[n]=j)}return {left:j.left,right:j.right,top:o?j.rtop:j.top,bottom:o?j.rbottom:j.bottom}}function Ce(b,f,j){for(var h,c,i,g,e,d,a=0;a<b.length;a+=3){e=b[a];d=b[a+1];if(f<e){c=0,i=1,g='left'}else {if(f<d){c=f-e,i=c+1}else {if(a==b.length-3||f==d&&b[a+3]>f){i=d-e,c=i-1,f>=d&&(g='right')}}}if(null!=c){h=b[a+2];e==d&&j==(h.insertLeft?'left':'right')&&(g=j);if('left'==j&&0==c){for(;a&&b[a-2]==b[a-3]&&b[a-1].insertLeft;){h=b[(a-=3)+2],g='left'}}if('right'==j&&c==d-e){for(;a<b.length-3&&b[a+3]==b[a+4]&&!b[a+5].insertLeft;){h=b[(a+=3)+2],g='right'}}break}}return {node:h,start:c,end:i,collapse:g,coverStart:e,coverEnd:d}}function Ee(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest)){for(var b=0;b<a.rest.length;b++){a.measure.caches[b]={}}}}function Fe(a){a.display.externalMeasure=null;ea(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++){Ee(a.display.view[b])}}function Eb(a){Fe(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Ge(){return ac&&ad?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function He(){return ac&&ad?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function od(a){var c=0;if(a.widgets){for(var b=0;b<a.widgets.length;++b){a.widgets[b].above&&(c+=Cb(a.widgets[b]))}}return c}function tc(d,b,c,a,e){e||(e=od(b),c.top+=e,c.bottom+=e);if('line'==a){return c}a||(a='local');b=pa(b);b='local'==a?b+d.display.lineSpace.offsetTop:b-d.display.viewOffset;if('page'==a||'window'==a){d=d.display.lineSpace.getBoundingClientRect(),b+=d.top+('window'==a?0:He()),a=d.left+('window'==a?0:Ge()),c.left+=a,c.right+=a}c.top+=b;c.bottom+=b;return c}function Ie(c,a,b){if('div'==b){return a}var d=a.left;a=a.top;'page'==b?(d-=Ge(),a-=He()):'local'!=b&&b||(b=c.display.sizer.getBoundingClientRect(),d+=b.left,a+=b.top);c=c.display.lineSpace.getBoundingClientRect();return {left:d-c.left,top:a-c.top}}function pd(b,c,d,a,e){a||(a=t(b.doc,c.line));var f=a;c=c.ch;a=ja(b,Pa(b,a),c,e);return tc(b,f,a,d)}function ka(d,a,i,c,f,j){function g(e,b){var a=ja(d,f,e,b?'right':'left',j);b?a.left=a.right:a.right=a.left;return tc(d,c,a,i)}function h(a,c,b){return g(b?a-1:a,1==g[c].level!=b)}c=c||t(d.doc,a.line);f||(f=Pa(d,c));var g=ua(c,d.doc.direction),b=a.ch;a=a.sticky;b>=c.text.length?(b=c.text.length,a='before'):0>=b&&(b=0,a='after');if(!g){return g('before'==a?b-1:b,'before'==a)}var e=vb(g,b,a),h=V;e=h(b,e,'before'==a);null!=h&&(e.other=h(b,h,'before'!=a));return e}function Je(a,b){var c=0;b=v(a.doc,b);a.options.lineWrapping||(c=Db(a.display)*b.ch);var d=t(a.doc,b.line),e=pa(d)+a.display.lineSpace.offsetTop;return {left:c,right:c,top:e,bottom:e+d.height}}function qd(a,b,c,d,e){a=p(a,b,c);a.xRel=e;d&&(a.outside=!0);return a}function rd(e,f,d){var a=e.doc;d+=e.display.viewOffset;if(0>d){return qd(a.first,0,null,!0,-1)}var b=Ja(a,d),c=a.first+a.size-1;if(b>c){return qd(a.first+a.size-1,t(a,c).text.length,null,!0,1)}0>f&&(f=0);for(a=t(a,b);;){if(b=Bg(e,a,b,f,d),c=(a=Ka(a,!1))&&a.find(0,!0),a&&(b.ch>c.from.ch||b.ch==c.from.ch&&0<b.xRel)){b=C(a=c.to.line)}else {return b}}}function Ke(c,a,d,b){b-=od(a);a=a.text.length;var e=rb(function(a){return ja(c,d,a-1).bottom<=b},a,0);a=rb(function(a){return ja(c,d,a).top>b},e,a);return {begin:e,end:a}}function Le(a,c,b,d){b||(b=Pa(a,c));d=tc(a,c,ja(a,b,d),'line').top;return Ke(a,c,b,d)}function sd(a,c,b,d){return a.bottom<=b?!1:a.top>b?!0:(d?a.left:a.right)>c}function Bg(e,c,k,g,f){f-=pa(c);var j=Pa(e,c),l=od(c),d=0,m=c.text.length,b=!0,a=ua(c,e.doc.direction);a&&(a=(e.options.lineWrapping?Cg:Dg)(e,c,k,j,a,g,f),d=(b=1!=a.level)?a.from:a.to-1,m=b?a.to:a.from-1);var n=null,h=null;a=rb(function(b){var a=ja(e,j,b);a.top+=l;a.bottom+=l;if(!sd(a,g,f,!1)){return !1}a.top<=f&&a.left<=g&&(n=b,h=a);return !0},d,m);var i=!1;h?(d=g-h.left<h.right-g,b=d==b,a=n+(b?0:1),b=b?'after':'before',d=d?h.left:h.right):(b||a!=m&&a!=d||a++,b=0==a?'after':a==c.text.length?'before':ja(e,j,a-(b?1:0)).bottom+l<=f==b?'after':'before',i=ka(e,p(k,a,b),'line',c,j),d=i.left,i=f<i.top||f>=i.bottom);a=Zd(c.text,a,1);return qd(k,a,b,i,g-d)}function Dg(f,g,h,i,c,j,d){var e=rb(function(a){a=c[a];var b=1!=a.level;return sd(ka(f,p(h,b?a.to:a.from,b?'before':'after'),'line',g,i),j,d,!0)},0,c.length-1),a=c[e];if(0<e){var b=1!=a.level;b=ka(f,p(h,b?a.from:a.to,b?'after':'before'),'line',g,i);sd(b,j,d,!0)&&b.top>d&&(a=c[e-1])}return a}function Cg(i,a,e,j,f,g,b){b=Ke(i,a,j,b);e=b.begin;b=b.end;/\s/.test(a.text.charAt(b-1))&&b--;for(var k=a=null,h=0;h<f.length;h++){var c=f[h];if(!(c.from>=b||c.to<=e)){var d=ja(i,j,1!=c.level?Math.min(b,c.to)-1:Math.max(e,c.from)).right;d=d<g?g-d+1000000000:d-g;if(!a||k>d){a=c,k=d}}}a||(a=f[f.length-1]);a.from<e&&(a={from:e,to:a.to,level:a.level});a.to>b&&(a={from:a.from,to:b,level:a.level});return a}function Qa(b){if(null!=b.cachedTextHeight){return b.cachedTextHeight}if(null==w){w=u('pre');for(var a=0;49>a;++a){w.appendChild(document.createTextNode('x')),w.appendChild(u('br'))}w.appendChild(document.createTextNode('x'))}aa(b.measure,w);a=w.offsetHeight/50;3<a&&(b.cachedTextHeight=a);ea(b.measure);return a||1}function Db(b){if(null!=b.cachedCharWidth){return b.cachedCharWidth}var a=u('span','xxxxxxxxxx'),c=u('pre',[a]);aa(b.measure,c);a=a.getBoundingClientRect();a=(a.right-a.left)/10;2<a&&(b.cachedCharWidth=a);return a||10}function md(c){for(var b=c.display,e={},f={},g=b.gutters.clientLeft,a=b.gutters.firstChild,d=0;a;a=a.nextSibling,++d){e[c.options.gutters[d]]=a.offsetLeft+a.clientLeft+g,f[c.options.gutters[d]]=a.clientWidth}return {fixedPos:td(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:e,gutterWidth:f,wrapperWidth:b.wrapper.clientWidth}}function td(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Me(a){var b=Qa(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Db(a.display)-3);return function(e){if(La(a.doc,e)){return 0}var g=0;if(e.widgets){for(var f=0;f<e.widgets.length;f++){e.widgets[f].height&&(g+=e.widgets[f].height)}}return c?g+(Math.ceil(e.text.length/d)||1)*b:g+b}}function ud(a){var b=a.doc,c=Me(a);b.iter(function(a){var b=c(a);b!=a.height&&na(a,b)})}function Sa(b,a,c,e){var g=b.display;if(!c&&'true'==(a.target||a.srcElement).getAttribute('cm-not-content')){return null}c=g.lineSpace.getBoundingClientRect();try{var f=a.clientX-c.left;var h=a.clientY-c.top}catch(aT){return null}a=rd(b,f,h);var d;e&&1==a.xRel&&(d=t(b.doc,a.line).text).length==a.ch&&(e=fa(d,d.length,b.options.tabSize)-d.length,a=p(a.line,Math.max(0,Math.round((f-Ae(b.display).left)/Db(b.display))-e)));return a}function Oa(c,a){if(a>=c.display.viewTo){return null}a-=c.display.viewFrom;if(0>a){return null}for(var d=c.display.view,b=0;b<d.length;b++){if(a-=d[b].size,0>a){return b}}}function Fb(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Ne(a,d){void 0===d&&(d=!0);for(var e=a.doc,f={},h=f.cursors=document.createDocumentFragment(),i=f.selection=document.createDocumentFragment(),c=0;c<e.sel.ranges.length;c++){if(d||c!=e.sel.primIndex){var b=e.sel.ranges[c];if(!(b.from().line>=a.display.viewTo||b.to().line<a.display.viewFrom)){var g=b.empty();(g||a.options.showCursorWhenSelecting)&&Oe(a,b.head,h);g||Eg(a,b,i)}}}return f}function Oe(b,a,d){a=ka(b,a,'div',null,null,!b.options.singleCursorHeightPerLine);var c=d.appendChild(u('div',' ','CodeMirror-cursor'));c.style.left=a.left+'px';c.style.top=a.top+'px';c.style.height=Math.max(0,a.bottom-a.top)*b.options.cursorHeight+'px';a.other&&(b=d.appendChild(u('div',' ','CodeMirror-cursor CodeMirror-secondarycursor')),b.style.display='',b.style.left=a.other.left+'px',b.style.top=a.other.top+'px',b.style.height=0.85*(a.other.bottom-a.other.top)+'px')}function uc(a,b){return a.top-b.top||a.left-b.left}function Eg(g,b,k){function d(c,a,d,b){0>a&&(a=0);a=Math.round(a);b=Math.round(b);f.appendChild(u('div',null,'CodeMirror-selected','position: absolute; left: '+c+'px;\n                             top: '+a+'px; width: '+(null==d?h-c:d)+'px;\n                             height: '+(b-a)+'px'))}function e(m,n,k){function a(b,a){return pd(g,p(m,b),'div',j,a)}function f(b,d,c){b=Le(g,j,null,b);d='ltr'==d==('after'==c)?'left':'right';c='after'==c?b.begin:b.end-(/\s/.test(j.text.charAt(b.end-1))?2:1);return a(c,d)[d]}var j=t(i,m),o=j.text.length,d,b,l=ua(j,i.direction);mg(l,n||0,null==k?o:k,function(m,p,t,s){var j='ltr'==t,g=a(m,j?'left':'right'),i=a(p-1,j?'right':'left'),r=null==n&&0==m,q=null==k&&p==o,u=0==s;s=!l||s==l.length-1;3>=i.top-g.top?(p=(c?r:q)&&u?e:(j?g:i).left,d(p,g.top,((c?q:r)&&s?h:(j?i:g).right)-p,g.bottom)):(j?(j=c&&r&&u?e:g.left,r=c?h:f(m,t,'before'),m=c?e:f(p,t,'after'),q=c&&q&&s?h:i.right):(j=c?f(m,t,'before'):e,r=!c&&r&&u?h:g.right,m=!c&&q&&s?e:i.left,q=c?f(p,t,'after'):h),d(j,g.top,r-j,g.bottom),g.bottom<i.top&&d(e,g.bottom,null,i.top),d(m,i.top,q-m,i.bottom));if(!d||0>uc(g,d)){d=g}0>uc(i,d)&&(d=i);if(!b||0>uc(g,b)){b=g}0>uc(i,b)&&(b=i)});return {start:d,end:b}}var a=g.display,i=g.doc,f=document.createDocumentFragment(),d=Ae(g.display),e=d.left,h=Math.max(a.sizerWidth,Na(g)-a.sizer.offsetLeft)-d.right,c='ltr'==i.direction;a=b.from();b=b.to();if(a.line==b.line){e(a.line,a.ch,b.ch)}else {var j=t(i,a.line);d=t(i,b.line);d=oa(j)==oa(d);a=e(a.line,a.ch,d?j.text.length+1:null).end;b=e(b.line,d?0:null,b.ch).start;d&&(a.top<b.top-2?(d(a.right,a.top,null,a.bottom),d(e,b.top,b.left,b.bottom)):d(a.right,a.top,b.left-a.right,a.bottom));a.bottom<b.top&&d(e,a.bottom,null,b.top)}k.appendChild(f)}function vd(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility='';0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?'':'hidden'},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility='hidden')}}function Pe(a){a.state.focused||(a.display.input.focus(),wd(a))}function Qe(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Gb(a))},100)}function wd(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);'nocursor'!=a.options.readOnly&&(a.state.focused||(G(a,'focus',a,b),a.state.focused=!0,Ga(a.display.wrapper,'CodeMirror-focused'),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),h&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),vd(a))}function Gb(a,b){a.state.delayingBlurEvent||(a.state.focused&&(G(a,'blur',a,b),a.state.focused=!1,x(a.display.wrapper,'CodeMirror-focused')),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function vc(d){d=d.display;for(var h=d.lineDiv.offsetTop,g=0;g<d.view.length;g++){var c=d.view[g];if(!c.hidden){if(b&&8>e){var f=c.node.offsetTop+c.node.offsetHeight;var a=f-h;h=f}else {a=c.node.getBoundingClientRect(),a=a.bottom-a.top}f=c.line.height-a;2>a&&(a=Qa(d));if(0.005<f||-0.005>f){if(na(c.line,a),Re(c.line),c.rest){for(a=0;a<c.rest.length;a++){Re(c.rest[a])}}}}}}function Re(a){if(a.widgets){for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}}function xd(e,c,a){var b=a&&null!=a.top?Math.max(0,a.top):e.scroller.scrollTop;b=Math.floor(b-e.lineSpace.offsetTop);var d=a&&null!=a.bottom?a.bottom:b+e.wrapper.clientHeight;b=Ja(c,b);d=Ja(c,d);if(a&&a.ensure){var f=a.ensure.from.line;a=a.ensure.to.line;f<b?(b=f,d=Ja(c,pa(t(c,f))+e.wrapper.clientHeight)):Math.min(a,c.lastLine())>=d&&(b=Ja(c,pa(t(c,a))-e.wrapper.clientHeight),d=a)}return {from:b,to:Math.max(d,b+1)}}function Se(d){var b=d.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&d.options.fixedGutter){for(var h=td(b)-b.scroller.scrollLeft+d.doc.scrollLeft,i=b.gutters.offsetWidth,e=h+'px',a=0;a<c.length;a++){if(!c[a].hidden){d.options.fixedGutter&&(c[a].gutter&&(c[a].gutter.style.left=e),c[a].gutterBackground&&(c[a].gutterBackground.style.left=e));var f=c[a].alignable;if(f){for(var g=0;g<f.length;g++){f[g].style.left=e}}}}d.options.fixedGutter&&(b.gutters.style.left=h+i+'px')}}function Te(c){if(!c.options.lineNumbers){return !1}var b=c.doc;b=Uc(c.options,b.first+b.size-1);var a=c.display;if(b.length!=a.lineNumChars){var d=a.measure.appendChild(u('div',[u('div',b)],'CodeMirror-linenumber CodeMirror-gutter-elt')),e=d.firstChild.offsetWidth;d=d.offsetWidth-e;a.lineGutter.style.width='';a.lineNumInnerWidth=Math.max(e,a.lineGutter.offsetWidth-d)+1;a.lineNumWidth=a.lineNumInnerWidth+d;a.lineNumChars=a.lineNumInnerWidth?b.length:-1;a.lineGutter.style.width=a.lineNumWidth+'px';yd(c);return !0}return !1}function zd(b,a){var d=b.display,g=Qa(b.display);0>a.top&&(a.top=0);var e=b.curOp&&null!=b.curOp.scrollTop?b.curOp.scrollTop:d.scroller.scrollTop,c=kd(b),f={};a.bottom-a.top>c&&(a.bottom=a.top+c);var h=b.doc.height+jd(d),i=a.top<g;g=a.bottom>h-g;a.top<e?f.scrollTop=i?0:a.top:a.bottom>e+c&&(c=Math.min(a.top,(g?h:a.bottom)-c),c!=e&&(f.scrollTop=c));e=b.curOp&&null!=b.curOp.scrollLeft?b.curOp.scrollLeft:d.scroller.scrollLeft;d=Na(b)-(b.options.fixedGutter?d.gutters.offsetWidth:0);if(c=a.right-a.left>d){a.right=a.left+d}10>a.left?f.scrollLeft=0:a.left<e?f.scrollLeft=Math.max(0,a.left-(c?0:10)):a.right>d+e-3&&(f.scrollLeft=a.right+(c?0:10)-d);return f}function wc(a,b){null!=b&&(xc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function fb(a){xc(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Hb(a,b,c){null==b&&null==c||xc(a);null!=b&&(a.curOp.scrollLeft=b);null!=c&&(a.curOp.scrollTop=c)}function xc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Je(a,b.from),d=Je(a,b.to);Ue(a,c,d,b.margin)}}function Ue(c,a,b,d){a=zd(c,{left:Math.min(a.left,b.left),top:Math.min(a.top,b.top)-d,right:Math.max(a.right,b.right),bottom:Math.max(a.bottom,b.bottom)+d});Hb(c,a.scrollLeft,a.scrollTop)}function Ib(a,b){2>Math.abs(a.doc.scrollTop-b)||(t||Ad(a,{top:b}),Ve(a,b,!0),t&&Ad(a),Jb(a,100))}function Ve(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b);if(a.display.scroller.scrollTop!=b||c){a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b)}}function Ua(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth);(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))&&!d||(a.doc.scrollLeft=b,Se(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function Kb(b){var a=b.display,c=a.gutters.offsetWidth,d=Math.round(b.doc.height+jd(b.display));return {clientHeight:a.scroller.clientHeight,viewHeight:a.wrapper.clientHeight,scrollWidth:a.scroller.scrollWidth,clientWidth:a.scroller.clientWidth,viewWidth:a.wrapper.clientWidth,barLeft:b.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+ra(b)+a.barHeight,nativeBarWidth:a.nativeBarWidth,gutterWidth:c}}function gb(a,b){b||(b=Kb(a));var c=a.display.barWidth,d=a.display.barHeight;We(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++){c!=a.display.barWidth&&a.options.lineWrapping&&vc(a),We(a,Kb(a)),c=a.display.barWidth,d=a.display.barHeight}}function We(c,d){var a=c.display,b=a.scrollbars.update(d);a.sizer.style.paddingRight=(a.barWidth=b.right)+'px';a.sizer.style.paddingBottom=(a.barHeight=b.bottom)+'px';a.heightForcer.style.borderBottom=b.bottom+'px solid transparent';b.right&&b.bottom?(a.scrollbarFiller.style.display='block',a.scrollbarFiller.style.height=b.bottom+'px',a.scrollbarFiller.style.width=b.right+'px'):a.scrollbarFiller.style.display='';b.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(a.gutterFiller.style.display='block',a.gutterFiller.style.height=b.bottom+'px',a.gutterFiller.style.width=d.gutterWidth+'px'):a.gutterFiller.style.display=''}function Xe(b){b.display.scrollbars&&(b.display.scrollbars.clear(),b.display.scrollbars.addClass&&x(b.display.wrapper,b.display.scrollbars.addClass));b.display.scrollbars=new aw[b.options.scrollbarStyle](function(c){b.display.wrapper.insertBefore(c,b.display.scrollbarFiller);a(c,'mousedown',function(){b.state.focused&&setTimeout(function(){return b.display.input.focus()},0)});c.setAttribute('cm-not-content','true')},function(a,c){'horizontal'==c?Ua(b,a):Ib(b,a)},b);b.display.scrollbars.addClass&&Ga(b.display.wrapper,b.display.scrollbars.addClass)}function Va(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++aC};a=a.curOp;C?C.ops.push(a):a.ownsGroup=C={ops:[a],delayedCallbacks:[]}}function Wa(a){yg(a.curOp,function(h){for(var e=0;e<h.ops.length;e++){h.ops[e].cm.curOp=null}h=h.ops;for(e=0;e<h.length;e++){var a=h[e],b=a.cm,f=b.display,g=b.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=ra(b)+'px',g.sizer.style.marginBottom=-g.nativeBarWidth+'px',g.sizer.style.borderRightWidth=ra(b)+'px',g.scrollbarsClipped=!0);a.updateMaxLine&&$c(b);a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<f.viewFrom||a.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&b.options.lineWrapping;a.update=a.mustUpdate&&new ae(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}for(e=0;e<h.length;e++){a=h[e],a.updatedDisplay=a.mustUpdate&&Bd(a.cm,a.update)}for(e=0;e<h.length;e++){if(a=h[e],b=a.cm,f=b.display,a.updatedDisplay&&vc(b),a.barMeasure=Kb(b),f.maxLineChanged&&!b.options.lineWrapping&&(g=f.maxLine.text.length,g=ja(b,Pa(b,f.maxLine),g,void 0),a.adjustWidthTo=g.left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+a.adjustWidthTo+ra(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+a.adjustWidthTo-Na(b))),a.updatedDisplay||a.selectionChanged){a.preparedSelection=f.input.prepareSelection()}}for(e=0;e<h.length;e++){a=h[e],b=a.cm,null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+'px',a.maxScrollLeft<b.doc.scrollLeft&&Ua(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1),f=a.focus&&a.focus==ta(),a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,f),(a.updatedDisplay||a.startHeight!=b.doc.height)&&gb(b,a.barMeasure),a.updatedDisplay&&Cd(b,a.barMeasure),a.selectionChanged&&vd(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),f&&Pe(a.cm)}for(e=0;e<h.length;e++){var j=void 0;a=h[e];b=a.cm;f=b.display;g=b.doc;a.updatedDisplay&&Ze(b,a.update);null==f.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(f.wheelStartX=f.wheelStartY=null);null!=a.scrollTop&&Ve(b,a.scrollTop,a.forceScroll);null!=a.scrollLeft&&Ua(b,a.scrollLeft,!0,!0);if(a.scrollToPos){var d=v(g,a.scrollToPos.from);var c=v(g,a.scrollToPos.to);var i=a.scrollToPos.margin;null==i&&(i=0);b.options.lineWrapping||d!=c||(d=d.ch?p(d.line,'before'==d.sticky?d.ch-1:d.ch,'after'):d,c='before'==d.sticky?p(d.line,d.ch+1,'before'):d);for(var l=0;5>l;l++){var m=!1;j=ka(b,d);var k=c&&c!=d?ka(b,c):j;j={left:Math.min(j.left,k.left),top:Math.min(j.top,k.top)-i,right:Math.max(j.left,k.left),bottom:Math.max(j.bottom,k.bottom)+i};k=zd(b,j);var n=b.doc.scrollTop,o=b.doc.scrollLeft;null!=k.scrollTop&&(Ib(b,k.scrollTop),1<Math.abs(b.doc.scrollTop-n)&&(m=!0));null!=k.scrollLeft&&(Ua(b,k.scrollLeft),1<Math.abs(b.doc.scrollLeft-o)&&(m=!0));if(!m){break}}c=j;K(b,'scrollCursorIntoView')||(i=b.display,l=i.sizer.getBoundingClientRect(),d=null,0>c.top+l.top?d=!0:c.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(d=!1),null==d||aD||(c=u('div','​',null,'position: absolute;\n                         top: '+(c.top-i.viewOffset-b.display.lineSpace.offsetTop)+'px;\n                         height: '+(c.bottom-c.top+ra(b)+i.barHeight)+'px;\n                         left: '+c.left+'px; width: '+Math.max(2,c.right-c.left)+'px;'),b.display.lineSpace.appendChild(c),c.scrollIntoView(d),b.display.lineSpace.removeChild(c)))}c=a.maybeHiddenMarkers;d=a.maybeUnhiddenMarkers;if(c){for(i=0;i<c.length;++i){c[i].lines.length||G(c[i],'hide')}}if(d){for(c=0;c<d.length;++c){d[c].lines.length&&G(d[c],'unhide')}}f.wrapper.offsetHeight&&(g.scrollTop=b.display.scroller.scrollTop);a.changeObjs&&G(b,'changes',b,a.changeObjs);a.update&&a.update.finish()}})}function Y(a,b){if(a.curOp){return b()}Va(a);try{return b()}finally{Wa(a)}}function L(a,b){return function(){if(a.curOp){return b.apply(a,arguments)}Va(a);try{return b.apply(a,arguments)}finally{Wa(a)}}}function S(a){return function(){if(this.curOp){return a.apply(this,arguments)}Va(this);try{return a.apply(this,arguments)}finally{Wa(this)}}}function M(a){return function(){var b=this.cm;if(!b||b.curOp){return a.apply(this,arguments)}Va(b);try{return a.apply(this,arguments)}finally{Wa(b)}}}function V(b,c,d,e){null==c&&(c=b.doc.first);null==d&&(d=b.doc.first+b.doc.size);e||(e=0);var a=b.display;e&&d<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>c)&&(a.updateLineNumbers=c);b.curOp.viewChanged=!0;if(c>=a.viewTo){u&&Yc(b.doc,c)<a.viewTo&&Aa(b)}else {if(d<=a.viewFrom){u&&fe(b.doc,d+e)>a.viewFrom?Aa(b):(a.viewFrom+=e,a.viewTo+=e)}else {if(c<=a.viewFrom&&d>=a.viewTo){Aa(b)}else {if(c<=a.viewFrom){var f=zc(b,d,d+e,1);f?(a.view=a.view.slice(f.index),a.viewFrom=f.lineN,a.viewTo+=e):Aa(b)}else {if(d>=a.viewTo){(f=zc(b,c,c,-1))?(a.view=a.view.slice(0,f.index),a.viewTo=f.lineN):Aa(b)}else {f=zc(b,c,c,-1);var g=zc(b,d,d+e,1);f&&g?(a.view=a.view.slice(0,f.index).concat(qc(b,f.lineN,g.lineN)).concat(a.view.slice(g.index)),a.viewTo+=e):Aa(b)}}}}}if(b=a.externalMeasured){d<b.lineN?b.lineN+=e:c<b.lineN+b.size&&(a.externalMeasured=null)}}function Ba(a,b,e){a.curOp.viewChanged=!0;var c=a.display,d=a.display.externalMeasured;d&&b>=d.lineN&&b<d.lineN+d.size&&(c.externalMeasured=null);b<c.viewFrom||b>=c.viewTo||(a=c.view[Oa(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==N(a,e)&&a.push(e)))}function Aa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function zc(d,b,c,e){var a=Oa(d,b),f=d.display.view;if(!u||c==d.doc.first+d.doc.size){return {index:a,lineN:c}}for(var g=d.display.viewFrom,h=0;h<a;h++){g+=f[h].size}if(g!=b){if(0<e){if(a==f.length-1){return null}b=g+f[a].size-b;a++}else {b=g-b}c+=b}for(;Yc(d.doc,c)!=c;){if(a==(0>e?0:f.length-1)){return null}c+=e*f[a-(0>e?1:0)].size;a+=e}return {index:a,lineN:c}}function $e(a){a=a.display.view;for(var d=0,b=0;b<a.length;b++){var c=a[b];c.hidden||c.node&&!c.changes||++d}return d}function Jb(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,Oc(Hg,a))}function Hg(a){var c=a.doc;if(!(c.highlightFrontier>=a.display.viewTo)){var e=+new Date()+a.options.workTime,b=yb(a,c.highlightFrontier),d=[];c.iter(b.line,Math.min(c.first+c.size,a.display.viewTo+500),function(f){if(b.line>=a.display.viewFrom){var i=f.styles,g=f.text.length>a.options.maxHighlightLength?Ma(c.mode,b.state):null,h=ke(a,f,b,!0);g&&(b.state=g);f.styles=h.styles;g=f.styleClasses;(h=h.classes)?f.styleClasses=h:g&&(f.styleClasses=null);h=!i||i.length!=f.styles.length||g!=h&&(!g||!h||g.bgClass!=h.bgClass||g.textClass!=h.textClass);for(g=0;!h&&g<i.length;++g){h=i[g]!=f.styles[g]}h&&d.push(b.line);f.stateAfter=b.save()}else {f.text.length<=a.options.maxHighlightLength&&fd(a,f.text,b),f.stateAfter=0==b.line%5?b.save():null}b.nextLine();if(+new Date()>e){return Jb(a,a.options.workDelay),!0}});c.highlightFrontier=b.line;c.modeFrontier=Math.max(c.modeFrontier,b.line);d.length&&Y(a,function(){for(var b=0;b<d.length;b++){Ba(a,d[b],'text')}})}}function Bd(e,f){var a=e.display,g=e.doc;if(f.editorIsHidden){return Aa(e),!1}if(!f.force&&f.visible.from>=a.viewFrom&&f.visible.to<=a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&0==$e(e)){return !1}Te(e)&&(Aa(e),f.dims=md(e));var b=g.first+g.size,c=Math.max(f.visible.from-e.options.viewportMargin,g.first),d=Math.min(b,f.visible.to+e.options.viewportMargin);a.viewFrom<c&&20>c-a.viewFrom&&(c=Math.max(g.first,a.viewFrom));a.viewTo>d&&20>a.viewTo-d&&(d=Math.min(b,a.viewTo));u&&(c=Yc(e.doc,c),d=fe(e.doc,d));g=c!=a.viewFrom||d!=a.viewTo||a.lastWrapHeight!=f.wrapperHeight||a.lastWrapWidth!=f.wrapperWidth;b=e.display;0==b.view.length||c>=b.viewTo||d<=b.viewFrom?(b.view=qc(e,c,d),b.viewFrom=c):(b.viewFrom>c?b.view=qc(e,c,b.viewFrom).concat(b.view):b.viewFrom<c&&(b.view=b.view.slice(Oa(e,c))),b.viewFrom=c,b.viewTo<d?b.view=b.view.concat(qc(e,b.viewTo,d)):b.viewTo>d&&(b.view=b.view.slice(0,Oa(e,d))));b.viewTo=d;a.viewOffset=pa(t(e.doc,a.viewFrom));e.display.mover.style.top=a.viewOffset+'px';d=$e(e);if(!g&&0==d&&!f.force&&a.renderedView==a.view&&(null==a.updateLineNumbers||a.updateLineNumbers>=a.viewTo)){return !1}e.hasFocus()?c=null:(c=ta())&&xa(e.display.lineDiv,c)?(c={activeElt:c},window.getSelection&&(b=window.getSelection(),b.anchorNode&&b.extend&&xa(e.display.lineDiv,b.anchorNode)&&(c.anchorNode=b.anchorNode,c.anchorOffset=b.anchorOffset,c.focusNode=b.focusNode,c.focusOffset=b.focusOffset))):c=null;4<d&&(a.lineDiv.style.display='none');Ig(e,a.updateLineNumbers,f.dims);4<d&&(a.lineDiv.style.display='');a.renderedView=a.view;(d=c)&&d.activeElt&&d.activeElt!=ta()&&(d.activeElt.focus(),d.anchorNode&&xa(document.body,d.anchorNode)&&xa(document.body,d.focusNode)&&(c=window.getSelection(),b=document.createRange(),b.setEnd(d.anchorNode,d.anchorOffset),b.collapse(!1),c.removeAllRanges(),c.addRange(b),c.extend(d.focusNode,d.focusOffset)));ea(a.cursorDiv);ea(a.selectionDiv);a.gutters.style.height=a.sizer.style.minHeight=0;g&&(a.lastWrapHeight=f.wrapperHeight,a.lastWrapWidth=f.wrapperWidth,Jb(e,400));a.updateLineNumbers=null;return !0}function Ze(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==Na(a)){if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+jd(a.display)-kd(a),c.top)}),b.visible=xd(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo){break}}if(!Bd(a,b)){break}vc(a);d=Kb(a);Fb(a);gb(a,d);Cd(a,d);b.force=!1}b.signal(a,'update',a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo){b.signal(a,'viewportChange',a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}}function Ad(a,d){var b=new ae(a,d);if(Bd(a,b)){vc(a);Ze(a,b);var c=Kb(a);Fb(a);gb(a,c);Cd(a,c);b.finish()}}function Ig(d,g,i){function d(a){var b=a.nextSibling;h&&n&&d.display.currentWheelTarget==a?a.style.display='none':a.parentNode.removeChild(a);return b}var c=d.display,k=d.options.lineNumbers,e=c.lineDiv,b=e.firstChild,j=c.view;c=c.viewFrom;for(var f=0;f<j.length;f++){var a=j[f];if(!a.hidden){if(a.node&&a.node.parentNode==e){for(;b!=a.node;){b=d(b)}b=k&&null!=g&&g<=c&&a.lineNumber;a.changes&&(-1<N(a.changes,'gutter')&&(b=!1),ve(d,a,c,i));b&&(ea(a.lineNumber),a.lineNumber.appendChild(document.createTextNode(Uc(d.options,c))));b=a.node.nextSibling}else {var l=Ag(d,a,c,i);e.insertBefore(l,b)}}c+=a.size}for(;b;){b=d(b)}}function yd(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+'px'}function Cd(a,b){a.display.sizer.style.minHeight=b.docHeight+'px';a.display.heightForcer.style.top=b.docHeight+'px';a.display.gutters.style.height=b.docHeight+a.display.barHeight+ra(a)+'px'}function af(a){var c=a.display.gutters,d=a.options.gutters;ea(c);for(var b=0;b<d.length;++b){var e=d[b],f=c.appendChild(u('div',null,'CodeMirror-gutter '+e));'CodeMirror-linenumbers'==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+'px')}c.style.display=b?'':'none';yd(a)}function Dd(a){var b=N(a.gutters,'CodeMirror-linenumbers');-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(['CodeMirror-linenumbers']):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function bf(a){var c=a.wheelDeltaX,b=a.wheelDeltaY;null==c&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(c=a.detail);null==b&&a.detail&&a.axis==a.VERTICAL_AXIS?b=a.detail:null==b&&(b=a.wheelDelta);return {x:c,y:b}}function Jg(a){a=bf(a);a.x*=l;a.y*=l;return a}function cf(e,j){var b=bf(j),i=b.x;b=b.y;var a=e.display,d=a.scroller,c=d.scrollWidth>d.clientWidth,f=d.scrollHeight>d.clientHeight;if(i&&c||b&&f){if(b&&n&&h){c=j.target;var g=a.view;a: for(;c!=d;c=c.parentNode){for(var k=0;k<g.length;k++){if(g[k].node==c){e.display.currentWheelTarget=c;break e}}}}!i||t||o||null==l?(b&&null!=l&&(f=b*l,c=e.doc.scrollTop,g=c+a.wrapper.clientHeight,0>f?c=Math.max(0,c+f-50):g=Math.min(e.doc.height,g+f+50),Ad(e,{top:c,bottom:g})),20>X&&(null==a.wheelStartX?(a.wheelStartX=d.scrollLeft,a.wheelStartY=d.scrollTop,a.wheelDX=i,a.wheelDY=b,setTimeout(function(){if(null!=a.wheelStartX){var b=d.scrollLeft-a.wheelStartX,c=d.scrollTop-a.wheelStartY;b=c&&a.wheelDY&&c/a.wheelDY||b&&a.wheelDX&&b/a.wheelDX;a.wheelStartX=a.wheelStartY=null;b&&(l=(l*X+b)/(X+1),++X)}},200)):(a.wheelDX+=i,a.wheelDY+=b))):(b&&f&&Ib(e,Math.max(0,d.scrollTop+b*l)),Ua(e,Math.max(0,d.scrollLeft+i*l)),(!b||b&&f)&&U(j),a.wheelStartX=null)}}function ma(a,f){var b=a[f];a.sort(function(a,b){return x(a.from(),b.from())});f=N(a,b);for(b=1;b<a.length;b++){var d=a[b],e=a[b-1];if(0<=x(e.to(),d.from())){var g=kc(e.from(),d.from()),h=jc(e.to(),d.to());d=e.empty()?d.from()==d.head:e.from()==e.head;b<=f&&--f;a.splice(--b,2,new c(d?h:g,d?g:h))}}return new m(a,f)}function wa(a,b){return new m([new c(a,b||a)],0)}function Ca(a){return a.text?p(a.from.line+a.text.length-1,z(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function df(b,a){if(0>x(b,a.from)){return b}if(0>=x(b,a.to)){return Ca(a)}var d=b.line+a.text.length-(a.to.line-a.from.line)-1,c=b.ch;b.line==a.to.line&&(c+=Ca(a).ch-a.to.ch);return p(d,c)}function Ed(a,d){for(var e=[],b=0;b<a.sel.ranges.length;b++){var f=a.sel.ranges[b];e.push(new c(df(f.anchor,d),df(f.head,d)))}return ma(e,a.sel.primIndex)}function ef(a,b,c){return a.line==b.line?p(c.line,a.ch-b.ch+c.ch):p(c.line+(a.line-b.line),a.ch)}function Fd(a){a.doc.mode=dd(a.options,a.doc.modeOption);Lb(a)}function Lb(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first;Jb(a,100);a.state.modeGen++;a.curOp&&V(a)}function ff(b,a){return 0==a.from.ch&&0==a.to.ch&&''==z(a.text)&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}function Gd(a,h,e,k){function e(a,b,c){a.text=b;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);be(a);ce(a,c);b=k?k(a):1;b!=a.height&&na(a,b);P(a,'change',a,h)}function f(d,f){for(var c=[],a=d;a<f;++a){c.push(new D(b[a],e?e[a]:null,k))}return c}var c=h.from,f=h.to,b=h.text,d=t(a,c.line),i=t(a,f.line),l=z(b),j=e?e[b.length-1]:null,g=f.line-c.line;h.full?(a.insert(0,f(0,b.length)),a.remove(b.length,a.size-b.length)):ff(a,h)?(f=f(0,b.length-1),e(i,i.text,j),g&&a.remove(c.line,g),f.length&&a.insert(c.line,f)):d==i?1==b.length?e(d,d.text.slice(0,c.ch)+l+d.text.slice(f.ch),j):(g=f(1,b.length-1),g.push(new D(l+d.text.slice(f.ch),j,k)),e(d,d.text.slice(0,c.ch)+b[0],e?e[0]:null),a.insert(c.line+1,g)):1==b.length?(e(d,d.text.slice(0,c.ch)+b[0]+i.text.slice(f.ch),e?e[0]:null),a.remove(c.line+1,g)):(e(d,d.text.slice(0,c.ch)+b[0],e?e[0]:null),e(i,l+i.text.slice(f.ch),j),j=f(1,b.length-1),1<g&&a.remove(c.line+1,g-1),a.insert(c.line+1,j));P(a,'change',a,h)}function Xa(a,b,c){function d(a,g,h){if(a.linked){for(var e=0;e<a.linked.length;++e){var d=a.linked[e];if(d.doc!=g){var f=h&&d.sharedHist;if(!c||f){b(d.doc,f),d(d.doc,a,f)}}}}}d(a,null,!0)}function gf(a,b){if(b.cm){throw Error('This document is already in use.')}a.doc=b;b.cm=a;ud(a);Fd(a);hf(a);a.options.lineWrapping||$c(a);a.options.mode=b.modeOption;V(a)}function hf(a){('rtl'==a.doc.direction?Ga:x)(a.display.lineDiv,'CodeMirror-rtl')}function Kg(a){Y(a,function(){hf(a);V(a)})}function Bc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Hd(b,a){var c={from:Wc(a.from),to:Ca(a),text:Ia(b,a.from,a.to)};jf(b,c,a.from.line,a.to.line+1);Xa(b,function(b){return jf(b,c,a.from.line,a.to.line+1)},!0);return c}function kf(a){for(;a.length;){if(z(a).ranges){a.pop()}else {break}}}function lf(d,b,i,e){var a=d.history;a.undone.length=0;var h=+new Date(),f;if(f=a.lastOp==e||a.lastOrigin==b.origin&&b.origin&&('+'==b.origin.charAt(0)&&d.cm&&a.lastModTime>h-d.cm.options.historyEventDelay||'*'==b.origin.charAt(0))){if(a.lastOp==e){kf(a.done);var c=z(a.done)}else {a.done.length&&!z(a.done).ranges?c=z(a.done):1<a.done.length&&!a.done[a.done.length-2].ranges?(a.done.pop(),c=z(a.done)):c=void 0}f=c}if(f){var g=z(c.changes);0==x(b.from,b.to)&&0==x(b.from,g.to)?g.to=Ca(b):c.changes.push(Hd(d,b))}else {for((c=z(a.done))&&c.ranges||Cc(d.sel,a.done),c={changes:[Hd(d,b)],generation:a.generation},a.done.push(c);a.done.length>a.undoDepth;){a.done.shift(),a.done[0].ranges||a.done.shift()}}a.done.push(i);a.generation=++a.maxGeneration;a.lastModTime=a.lastSelTime=h;a.lastOp=a.lastSelOp=e;a.lastOrigin=a.lastSelOrigin=b.origin;g||G(d,'historyAdded')}function Cc(b,c){var a=z(c);a&&a.ranges&&a.equals(b)||c.push(b)}function jf(a,b,e,f){var c=b['spans_'+a.id],d=0;a.iter(Math.max(a.first,e),Math.min(a.first+a.size,f),function(e){e.markedSpans&&((c||(c=b['spans_'+a.id]={}))[d]=e.markedSpans);++d})}function Lg(b){if(!b){return null}for(var a,c=0;c<b.length;++c){b[c].marker.explicitlyCleared?a||(a=b.slice(0,c)):a&&a.push(b[c])}return a?a.length?a:null:b}function mf(f,g){var a;if(a=g['spans_'+f.id]){for(var c=[],b=0;b<g.text.length;++b){c.push(Lg(a[b]))}a=c}else {a=null}c=Xc(f,g);if(!a){return c}if(!c){return a}for(b=0;b<a.length;++b){var e=a[b],d=c[b];if(e&&d){var h=0;a: for(;h<d.length;++h){for(var j=d[h],i=0;i<e.length;++i){if(e[i].marker==j.marker){continue f}}e.push(j)}}else {d&&(a[b]=d)}}return a}function ib(h,i,k){for(var d=[],e=0;e<h.length;++e){var a=h[e];if(a.ranges){d.push(k?m.prototype.deepCopy.call(a):a)}else {a=a.changes;var f=[];d.push({changes:f});for(var g=0;g<a.length;++g){var b=a[g],j;f.push({from:b.from,to:b.to,text:b.text});if(i){for(var c in b){(j=c.match(/^spans_(\d+)$/))&&-1<N(i,Number(j[1]))&&(z(f)[c]=b[c],delete b[c])}}}}}return d}function Id(b,a,d,e){return e?(b=b.anchor,d&&(e=0>x(a,b),e!=0>x(d,b)?(b=a,a=d):e!=0>x(a,d)&&(a=d)),new c(b,a)):new c(d||a,a)}function Dc(a,c,d,e,b){null==b&&(b=a.cm&&(a.cm.display.shift||a.extend));Q(a,new m([Id(a.sel.primary(),c,d,b)],0),e)}function nf(a,c,e){for(var d=[],f=a.cm&&(a.cm.display.shift||a.extend),b=0;b<a.sel.ranges.length;b++){d[b]=Id(a.sel.ranges[b],c[b],null,f)}c=ma(d,a.sel.primIndex);Q(a,c,e)}function Jd(a,c,d,e){var b=a.sel.ranges.slice(0);b[c]=d;Q(a,ma(b,a.sel.primIndex),e)}function Mg(b,d,a){a={ranges:d.ranges,update:function(d){this.ranges=[];for(var a=0;a<d.length;a++){this.ranges[a]=new c(v(b,d[a].anchor),v(b,d[a].head))}},origin:a&&a.origin};G(b,'beforeSelectionChange',b,a);b.cm&&G(b.cm,'beforeSelectionChange',b.cm,a);return a.ranges!=d.ranges?ma(a.ranges,a.ranges.length-1):d}function of(a,b,d){var c=a.history.done,e=z(c);e&&e.ranges?(c[c.length-1]=b,Ec(a,b,d)):Q(a,b,d)}function Q(b,d,e){Ec(b,d,e);d=b.sel;var g=b.cm?b.cm.curOp.id:NaN,a=b.history,f=e&&e.origin,c;if(!(c=g==a.lastSelOp)&&(c=f&&a.lastSelOrigin==f)&&!(c=a.lastModTime==a.lastSelTime&&a.lastOrigin==f)){c=z(a.done);var h=f.charAt(0);c='*'==h||'+'==h&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date()-b.history.lastSelTime<=(b.cm?b.cm.options.historyEventDelay:500)}c?a.done[a.done.length-1]=d:Cc(d,a.done);a.lastSelTime=+new Date();a.lastSelOrigin=f;a.lastSelOp=g;e&&!1!==e.clearRedo&&kf(a.undone)}function Ec(a,c,b){if(ha(a,'beforeSelectionChange')||a.cm&&ha(a.cm,'beforeSelectionChange')){c=Mg(a,c,b)}var d=b&&b.bias||(0>x(c.primary().head,a.sel.primary().head)?-1:1);pf(a,qf(a,c,d,!0));b&&!1===b.scroll||!a.cm||fb(a.cm)}function pf(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ge(a.cm)),P(a,'cursorActivity',a))}function rf(a){pf(a,qf(a,a.sel,null,!1))}function qf(f,b,h,i){for(var d,e=0;e<b.ranges.length;e++){var g=b.ranges[e],a=b.ranges.length==f.sel.ranges.length&&f.sel.ranges[e],j=Kd(f,g.anchor,a&&a.anchor,h,i);a=Kd(f,g.head,a&&a.head,h,i);if(d||j!=g.anchor||a!=g.head){d||(d=b.ranges.slice(0,e)),d[e]=new c(j,a)}}return d?ma(d,b.primIndex):b}function jb(h,b,f,e,i){var g=t(h,b.line);if(g.markedSpans){for(var a=0;a<g.markedSpans.length;++a){var c=g.markedSpans[a],d=c.marker;if((null==c.from||(d.inclusiveLeft?c.from<=b.ch:c.from<b.ch))&&(null==c.to||(d.inclusiveRight?c.to>=b.ch:c.to>b.ch))){if(i&&(G(d,'beforeCursorEnter'),d.explicitlyCleared)){if(g.markedSpans){--a;continue}else {break}}if(d.atomic){if(f){a=d.find(0>e?1:-1);c=void 0;if(0>e?d.inclusiveRight:d.inclusiveLeft){a=sf(h,a,-e,a&&a.line==b.line?g:null)}if(a&&a.line==b.line&&(c=x(a,f))&&(0>e?0>c:0<c)){return jb(h,a,b,e,i)}}f=d.find(0>e?-1:1);if(0>e?d.inclusiveLeft:d.inclusiveRight){f=sf(h,f,e,f.line==b.line?g:null)}return f?jb(h,f,b,e,i):null}}}}return b}function Kd(b,a,d,c,e){c=c||1;a=jb(b,a,d,c,e)||!e&&jb(b,a,d,c,!0)||jb(b,a,d,-c,e)||!e&&jb(b,a,d,-c,!0);return a?a:(b.cantEdit=!0,p(b.first,0))}function sf(b,a,c,d){return 0>c&&0==a.ch?a.line>b.first?v(b,p(a.line-1)):null:0<c&&a.ch==(d||t(b,a.line)).text.length?a.line<b.first+b.size-1?p(a.line+1,0):null:new p(a.line,a.ch+c)}function tf(a){a.setSelection(p(a.firstLine(),0),p(a.lastLine()),q)}function uf(b,c,d){var a={canceled:!1,from:c.from,to:c.to,text:c.text,origin:c.origin,cancel:function(){return a.canceled=!0}};d&&(a.update=function(c,d,e,f){c&&(a.from=v(b,c));d&&(a.to=v(b,d));e&&(a.text=e);void 0!==f&&(a.origin=f)});G(b,'beforeChange',b,a);b.cm&&G(b.cm,'beforeChange',b.cm,a);return a.canceled?null:{from:a.from,to:a.to,text:a.text,origin:a.origin}}function kb(a,b,c){if(a.cm){if(!a.cm.curOp){return L(a.cm,kb)(a,b,c)}if(a.cm.state.suppressEdits){return}}if(ha(a,'beforeChange')||a.cm&&ha(a.cm,'beforeChange')){if(b=uf(a,b,!0),!b){return}}if(c=aB&&!c&&lg(a,b.from,b.to)){for(var d=c.length-1;0<=d;--d){wf(a,{from:c[d].from,to:c[d].to,text:d?['']:b.text,origin:b.origin})}}else {wf(a,b)}}function wf(b,a){if(1!=a.text.length||''!=a.text[0]||0!=x(a.from,a.to)){var c=Ed(b,a);lf(b,a,c,b.cm?b.cm.curOp.id:NaN);Mb(b,a,c,Xc(b,a));var d=[];Xa(b,function(b,c){c||-1!=N(d,b.history)||(xf(b.history,a),d.push(b.history));Mb(b,a,null,Xc(b,a))})}}function Fc(a,h,e){if(!a.cm||!a.cm.state.suppressEdits||e){for(var b=a.history,c,f=a.sel,d='undo'==h?b.done:b.undone,i='undo'==h?b.undone:b.done,g=0;g<d.length&&(c=d[g],e?!c.ranges||c.equals(a.sel):c.ranges);g++){}if(g!=d.length){for(b.lastOrigin=b.lastSelOrigin=null;;){if(c=d.pop(),c.ranges){Cc(c,i);if(e&&!c.equals(a.sel)){Q(a,c,{clearRedo:!1});return}f=c}else {break}}var j=[];Cc(f,i);i.push({changes:j,generation:b.generation});b.generation=c.generation||++b.maxGeneration;var k=ha(a,'beforeChange')||a.cm&&ha(a.cm,'beforeChange');e=function(e){var b=c.changes[e];b.origin=h;if(k&&!uf(a,b,!1)){return d.length=0,{}}j.push(Hd(a,b));var g=e?Ed(a,b):z(d);Mb(a,b,g,mf(a,b));!e&&a.cm&&a.cm.scrollIntoView({from:b.from,to:Ca(b)});var f=[];Xa(a,function(a,c){c||-1!=N(f,a.history)||(xf(a.history,b),f.push(a.history));Mb(a,b,null,mf(a,b))})};for(b=c.changes.length-1;0<=b;--b){if(f=e(b)){return f.v}}}}}function yf(a,b){if(0!=b&&(a.first+=b,a.sel=new m(hc(a.sel.ranges,function(a){return new c(p(a.anchor.line+b,a.anchor.ch),p(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){V(a.cm,a.first,a.first-b,b);for(var e=a.cm.display,d=e.viewFrom;d<e.viewTo;d++){Ba(a.cm,d,'gutter')}}}function Mb(b,a,d,e){if(b.cm&&!b.cm.curOp){return L(b.cm,Mb)(b,a,d,e)}if(a.to.line<b.first){yf(b,a.text.length-1-(a.to.line-a.from.line))}else {if(!(a.from.line>b.lastLine())){if(a.from.line<b.first){var c=a.text.length-1-(b.first-a.from.line);yf(b,c);a={from:p(b.first,0),to:p(a.to.line+c,a.to.ch),text:[z(a.text)],origin:a.origin}}c=b.lastLine();a.to.line>c&&(a={from:a.from,to:p(c,t(b,c).text.length),text:[a.text[0]],origin:a.origin});a.removed=Ia(b,a.from,a.to);d||(d=Ed(b,a));b.cm?Ng(b.cm,a,e):Gd(b,a,e);Ec(b,d,q)}}}function Ng(a,b,e){var d=a.doc,f=a.display,c=b.from,g=b.to,h=!1,i=c.line;a.options.lineWrapping||(i=C(oa(t(d,c.line))),d.iter(i,g.line+1,function(a){if(a==f.maxLine){return h=!0}}));-1<d.sel.contains(b.from,b.to)&&ge(a);Gd(d,b,e,Me(a));a.options.lineWrapping||(d.iter(i,c.line+b.text.length,function(a){var b=mc(a);b>f.maxLineLength&&(f.maxLine=a,f.maxLineLength=b,f.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));sg(d,c.line);Jb(a,400);e=b.text.length-(g.line-c.line)-1;b.full?V(a):c.line!=g.line||1!=b.text.length||ff(a.doc,b)?V(a,c.line,g.line+1,e):Ba(a,c.line,'text');e=ha(a,'changes');if((d=ha(a,'change'))||e){b={from:c,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&P(a,'change',a,b),e&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b)}a.display.selForContextMenu=null}function lb(e,c,b,a,f){a||(a=b);if(0>x(a,b)){var d=[a,b];b=d[0];a=d[1];d}'string'==typeof c&&(c=e.splitLines(c));kb(e,{from:b,to:a,text:c,origin:f})}function zf(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Af(e,g,h,f){for(var d=0;d<e.length;++d){var a=e[d],c=!0;if(a.ranges){for(a.copied||(a=e[d]=a.deepCopy(),a.copied=!0),c=0;c<a.ranges.length;c++){zf(a.ranges[c].anchor,g,h,f),zf(a.ranges[c].head,g,h,f)}}else {for(var i=0;i<a.changes.length;++i){var b=a.changes[i];if(h<b.from.line){b.from=p(b.from.line+f,b.from.ch),b.to=p(b.to.line+f,b.to.ch)}else {if(g<=b.to.line){c=!1;break}}}c||(e.splice(0,d+1),d=0)}}}function xf(d,a){var b=a.from.line,c=a.to.line,e=a.text.length-(c-b)-1;Af(d.done,b,c,e);Af(d.undone,b,c,e)}function Nb(a,b,e,f){var c=b,d=b;'number'==typeof b?d=t(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):c=C(b);if(null==c){return null}f(d,c)&&a.cm&&Ba(a.cm,c,e);return d}function Ob(a){this.lines=a;this.parent=null;for(var c=0,b=0;b<a.length;++b){a[b].parent=this,c+=a[b].height}this.height=c}function Pb(a){this.children=a;for(var d=0,e=0,b=0;b<a.length;++b){var c=a[b];d+=c.chunkSize();e+=c.height;c.parent=this}this.size=d;this.height=e;this.parent=null}function Og(c,d,e,f){var a=new H(c,e,f),b=c.cm;b&&a.noHScroll&&(b.display.alignWidgets=!0);Nb(c,d,'widget',function(d){var e=d.widgets||(d.widgets=[]);null==a.insertAt?e.push(a):e.splice(Math.min(e.length-1,Math.max(0,a.insertAt)),0,a);a.line=d;b&&!La(c,d)&&(e=pa(d)<c.scrollTop,na(d,d.height+Cb(a)),e&&wc(b,a.height),b.curOp.forceUpdate=!0);return !0});P(b,'lineWidgetAdded',b,a,'number'==typeof d?d:C(d));return a}function mb(c,d,e,f,h){if(f&&f.shared){return Pg(c,d,e,f,h)}if(c.cm&&!c.cm.curOp){return L(c.cm,mb)(c,d,e,f,h)}var b=new r(c,h);h=x(d,e);f&&Ha(f,b,!1);if(0<h||0==h&&!1!==b.clearWhenEmpty){return b}b.replacedWith&&(b.collapsed=!0,b.widgetNode=ab('span',[b.replacedWith],'CodeMirror-widget'),f.handleMouseEvents||b.widgetNode.setAttribute('cm-ignore-events','true'),f.insertLeft&&(b.widgetNode.insertLeft=!0));if(b.collapsed){if(ee(c,d.line,d,e,b)||d.line!=e.line&&ee(c,e.line,d,e,b)){throw Error('Inserting collapsed marker partially overlapping an existing one')}u=!0}b.addToHistory&&lf(c,{from:d,to:e,origin:'markText'},c.sel,NaN);var i=d.line,g=c.cm,j;c.iter(i,e.line+1,function(a){g&&b.collapsed&&!g.options.lineWrapping&&oa(a)==g.display.maxLine&&(j=!0);b.collapsed&&i!=d.line&&na(a,0);var c=new lc(b,i==d.line?d.ch:null,i==e.line?e.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([c]):[c];c.marker.attachLine(a);++i});b.collapsed&&c.iter(d.line,e.line+1,function(a){La(c,a)&&na(a,0)});b.clearOnEnter&&a(b,'beforeCursorEnter',function(){return b.clear()});b.readOnly&&(aB=!0,(c.history.done.length||c.history.undone.length)&&c.clearHistory());b.collapsed&&(b.id=++ap,b.atomic=!0);if(g){j&&(g.curOp.updateMaxLine=!0);if(b.collapsed){V(g,d.line,e.line+1)}else {if(b.className||b.title||b.startStyle||b.endStyle||b.css){for(f=d.line;f<=e.line;f++){Ba(g,f,'text')}}}b.atomic&&rf(g.doc);P(g,'markerAdded',g,b)}return b}function Pg(c,d,e,a,f){a=Ha(a);a.shared=!1;var b=[mb(c,d,e,a,f)],g=b[0],h=a.widgetNode;Xa(c,function(c){h&&(a.widgetNode=h.cloneNode(!0));b.push(mb(c,v(c,d),v(c,e),a,f));for(var i=0;i<c.linked.length;++i){if(c.linked[i].isParent){return}}g=z(b)});return new I(b,g)}function Cf(a){return a.findMarks(p(a.first,0),a.clipPos(p(a.lastLine())),function(a){return a.parent})}function Qg(b){for(var c=function(a){a=b[a];var d=[a.primary.doc];Xa(a.primary.doc,function(a){return d.push(a)});for(var c=0;c<a.markers.length;c++){var e=a.markers[c];-1==N(d,e.doc)&&(e.parent=null,a.markers.splice(c--,1))}},a=0;a<b.length;a++){c(a)}}function Rg(f){var a=this;Df(a);if(!K(a,f)&&!va(a.display,f)){U(f);b&&(ar=+new Date());var c=Sa(a,f,!0),d=f.dataTransfer.files;if(c&&!a.isReadOnly()){if(d&&d.length&&window.FileReader&&window.File){for(var g=d.length,i=Array(g),j=0,h=function(d,e){if(!a.options.allowDropFileTypes||-1!=N(a.options.allowDropFileTypes,d.type)){var b=new FileReader();b.onload=L(a,function(){var d=b.result;/[\x00-\x08\x0e-\x1f]{2}/.test(d)&&(d='');i[e]=d;++j==g&&(c=v(a.doc,c),d={from:c,to:c,text:a.doc.splitLines(i.join(a.doc.lineSeparator())),origin:'paste'},kb(a.doc,d),of(a.doc,wa(c,Ca(d))))});b.readAsText(d)}},e=0;e<g;++e){h(d[e],e)}}else {if(a.state.draggingText&&-1<a.doc.sel.contains(c)){a.state.draggingText(f),setTimeout(function(){return a.display.input.focus()},20)}else {try{if(h=f.dataTransfer.getData('Text')){a.state.draggingText&&!a.state.draggingText.copy&&(e=a.listSelections());Ec(a.doc,wa(c,c));if(e){for(d=0;d<e.length;++d){lb(a.doc,'',e[d].anchor,e[d].head,'drag')}}a.replaceSelection(h,'around','paste');a.display.input.focus()}}catch(aT){}}}}}}function Df(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function Ff(d){if(document.getElementsByClassName){for(var b=document.getElementsByClassName('CodeMirror'),a=0;a<b.length;a++){var c=b[a].CodeMirror;c&&d(c)}}}function Sg(){var b;a(window,'resize',function(){null==b&&(b=setTimeout(function(){b=null;Ff(Tg)},100))});a(window,'blur',function(){return Ff(Gb)})}function Tg(b){var a=b.display;if(a.lastWrapHeight!=a.wrapper.clientHeight||a.lastWrapWidth!=a.wrapper.clientWidth){a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.scrollbarsClipped=!1,b.setSize()}}function Ug(a){var c=a.split(/-(?!$)/);a=c[c.length-1];for(var e,f,g,h,d=0;d<c.length-1;d++){var b=c[d];if(/^(cmd|meta|m)$/i.test(b)){h=!0}else {if(/^a(lt)?$/i.test(b)){e=!0}else {if(/^(c|ctrl|control)$/i.test(b)){f=!0}else {if(/^s(hift)?$/i.test(b)){g=!0}else {throw Error('Unrecognized modifier name: '+b)}}}}}e&&(a='Alt-'+a);f&&(a='Ctrl-'+a);h&&(a='Cmd-'+a);g&&(a='Shift-'+a);return a}function Vg(a){var c={},b;for(b in a){if(a.hasOwnProperty(b)){var h=a[b];if(!/^(name|fallthrough|(de|at)tach)$/.test(b)){if('...'!=h){for(var d=hc(b.split(' '),Ug),e=0;e<d.length;e++){if(e==d.length-1){var f=d.join(' ');var g=h}else {f=d.slice(0,e+1).join(' '),g='...'}var i=c[f];if(!i){c[f]=g}else {if(i!=g){throw Error('Inconsistent bindings for '+f)}}}}delete a[b]}}}for(var j in c){a[j]=c[j]}return a}function nb(c,a,d,e){a=Gc(a);var b=a.call?a.call(c,e):a[c];if(!1===b){return 'nothing'}if('...'===b){return 'multi'}if(null!=b&&d(b)){return 'handled'}if(a.fallthrough){if('[object Array]'!=Object.prototype.toString.call(a.fallthrough)){return nb(c,a.fallthrough,d,e)}for(b=0;b<a.fallthrough.length;b++){var f=nb(c,a.fallthrough[b],d,e);if(f){return f}}}}function Gf(a){a='string'==typeof a?a:s[a.keyCode];return 'Ctrl'==a||'Alt'==a||'Shift'==a||'Mod'==a}function Hf(a,b,d){var c=a;b.altKey&&'Alt'!=c&&(a='Alt-'+a);(as?b.metaKey:b.ctrlKey)&&'Ctrl'!=c&&(a='Ctrl-'+a);(as?b.ctrlKey:b.metaKey)&&'Cmd'!=c&&(a='Cmd-'+a);!d&&b.shiftKey&&'Shift'!=c&&(a='Shift-'+a);return a}function Jf(a,c){if(o&&34==a.keyCode&&a['char']){return !1}var b=s[a.keyCode];if(null==b||a.altGraphKey){return !1}3==a.keyCode&&a.code&&(b=a.code);return Hf(b,a,c)}function Gc(a){return 'string'==typeof a?J[a]:a}function ob(b,g){for(var e=b.doc.sel.ranges,a=[],d=0;d<e.length;d++){for(var c=g(e[d]);a.length&&0>=x(c.from,z(a).to);){var f=a.pop();if(0>x(f.from,c.from)){c.from=f.from;break}}a.push(c)}Y(b,function(){for(var c=a.length-1;0<=c;c--){lb(b.doc,'',a[c].from,a[c].to,'+delete')}fb(b)})}function Ld(b,a,c){a=Zd(b.text,a+c,c);return 0>a||a>b.text.length?null:a}function Md(a,b,c){a=Ld(a,b.ch,c);return null==a?null:new p(b.line,a,0>c?'after':'before')}function Nd(a,d,e,f,b){if(a&&(a=ua(e,d.doc.direction))){a=0>b?z(a):a[0];var g=0>b==(1==a.level)?'after':'before';if(0<a.level||'rtl'==d.doc.direction){var h=Pa(d,e);var c=0>b?e.text.length-1:0;var i=ja(d,h,c).top;c=rb(function(a){return ja(d,h,a).top==i},0>b==(1==a.level)?a.from:a.to-1,c);'before'==g&&(c=Ld(e,c,1))}else {c=0>b?a.to:a.from}return new p(f,c,g)}return new p(f,0>b?e.text.length:0,0>b?'before':'after')}function Wg(f,b,a,c){var g=ua(b,f.doc.direction);if(!g){return Md(b,a,c)}a.ch>=b.text.length?(a.ch=b.text.length,a.sticky='before'):0>=a.ch&&(a.ch=0,a.sticky='after');var h=vb(g,a.ch,a.sticky),d=g[h];if('ltr'==f.doc.direction&&0==d.level%2&&(0<c?d.to>a.ch:d.from<a.ch)){return Md(b,a,c)}var i=function(a,c){return Ld(b,a instanceof p?a.ch:a,c)},k,m=function(a){if(!f.options.lineWrapping){return {begin:0,end:b.text.length}}k=k||Pa(f,b);return Le(f,b,k,a)},e=m('before'==a.sticky?i(a,-1):a.ch);if('rtl'==f.doc.direction||1==d.level){var l=1==d.level==0>c,j=i(a,l?1:-1);if(null!=j&&(l?j<=d.to&&j<=e.end:j>=d.from&&j>=e.begin)){return new p(a.line,j,l?'before':'after')}}d=function(d,h,e){for(var j=function(b,c){return c?new p(a.line,i(b,1),'before'):new p(a.line,b,'after')};0<=d&&d<g.length;d+=h){var c=g[d],f=0<h==(1!=c.level),b=f?e.begin:i(e.end,-1);if(c.from<=b&&b<c.to){return j(b,f)}b=f?c.from:i(c.to,-1);if(e.begin<=b&&b<e.end){return j(b,f)}}};if(h=d(h+c,c,e)){return h}e=0<c?e.end:i(e.begin,-1);return null==e||0<c&&e==b.text.length||!(h=d(0<c?0:g.length-1,c,m(e)))?null:h}function Kf(c,a){var d=t(c.doc,a),b=oa(d);b!=d&&(a=C(b));return Nd(!0,c,b,a,1)}function Lf(d,c){var a=Kf(d,c.line),b=t(d.doc,a.line),e=ua(b,d.doc.direction);return e&&0!=e[0].level?a:(b=Math.max(0,b.text.search(/\S/)),p(a.line,c.line==a.line&&c.ch<=b&&c.ch?0:b,a.sticky))}function Hc(a,b,d){if('string'==typeof b&&(b=K[b],!b)){return !1}a.display.input.ensurePolled();var e=a.display.shift,c=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d&&(a.display.shift=!1),c=b(a)!=Y}finally{a.display.shift=e,a.state.suppressEdits=!1}return c}function Ub(a,b,d,e){var c=a.state.keySeq;if(c){if(Gf(b)){return 'handled'}/'$/.test(b)?a.state.keySeq=null:aE.set(50,function(){a.state.keySeq==c&&(a.state.keySeq=null,a.display.input.reset())});if(Mf(a,c+' '+b,d,e)){return !0}}return Mf(a,b,d,e)}function Mf(a,c,e,b){a: {for(var d=0;d<a.state.keyMaps.length;d++){var f=nb(c,a.state.keyMaps[d],b,a);if(f){b=f;break a}}b=a.options.extraKeys&&nb(c,a.options.extraKeys,b,a)||nb(c,a.options.keyMap,b,a)}'multi'==b&&(a.state.keySeq=c);'handled'==b&&P(a,'keyHandled',a,c,e);if('handled'==b||'multi'==b){U(e),vd(a)}return !!b}function Nf(a,b){var c=Jf(b,!0);return c?b.shiftKey&&!a.state.keySeq?Ub(a,'Shift-'+c,b,function(b){return Hc(a,b,!0)})||Ub(a,c,b,function(b){if('string'==typeof b?/^go[A-Z]/.test(b):b.motion){return Hc(a,b)}}):Ub(a,c,b,function(b){return Hc(a,b)}):!1}function Yg(a,b,c){return Ub(a,"'"+c+"'",b,function(b){return Hc(a,b,!0)})}function Of(a){this.curOp.focus=ta();if(!K(this,a)){b&&11>e&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;this.display.shift=16==c||a.shiftKey;var d=Nf(this,a);o&&(af=d?c:null,!d&&88==c&&!aF&&(n?a.metaKey:a.ctrlKey)&&this.replaceSelection('',null,'cut'));18!=c||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||$g(this)}}function $g(c){function b(a){18!=a.keyCode&&a.altKey||(x(b,'CodeMirror-crosshair'),ba(document,'keyup',b),ba(document,'mouseover',b))}var b=c.display.lineDiv;Ga(b,'CodeMirror-crosshair');a(document,'keyup',b);a(document,'mouseover',b)}function Pf(a){16==a.keyCode&&(this.doc.sel.shift=!1);K(this,a)}function Qf(a){if(!(va(this.display,a)||K(this,a)||a.ctrlKey&&!a.altKey||n&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(o&&b==af){af=null,U(a)}else {if(!o||a.which&&!(10>a.which)||!Nf(this,a)){if(b=String.fromCharCode(null==c?b:c),'\b'!=b&&!Yg(this,a,b)){this.display.input.onKeyPress(a)}}}}}function ah(a,b){var c=+new Date();if(L&&L.compare(c,a,b)){return M=L=null,'triple'}if(M&&M.compare(c,a,b)){return L=new ag(c,a,b),M=null,'double'}M=new ag(c,a,b);L=null;return 'single'}function Rf(a){var b=this.display;if(!(K(this,a)||b.activeTouch&&b.input.supportsTouch())){if(b.input.ensurePolled(),b.shift=a.shiftKey,va(b,a)){h||(b.scroller.draggable=!1,setTimeout(function(){return b.scroller.draggable=!0},100))}else {if(!Jc(this,a,'gutterClick',!0)){var c=Sa(this,a),d=ie(a),e=c?ah(c,d):'single';window.focus();1==d&&this.state.selectingText&&this.state.selectingText(a);c&&bh(this,d,c,e,a)||(1==d?c?ch(this,c,e,a):(a.target||a.srcElement)==b.scroller&&U(a):2==d?(c&&Dc(this.doc,c),setTimeout(function(){return b.input.focus()},20)):3==d&&(ah?Sf(this,a):Qe(this)))}}}}function bh(a,c,f,d,e){var b='Click';'double'==d?b='Double'+b:'triple'==d&&(b='Triple'+b);return Ub(a,Hf((1==c?'Left':2==c?'Middle':'Right')+b,e),e,function(b){'string'==typeof b&&(b=K[b]);if(!b){return !1}var c=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c=b(a,f)!=Y}finally{a.state.suppressEdits=!1}return c})}function ch(c,e,f,d){b?setTimeout(Oc(Pe,c),0):c.curOp.focus=ta();var a=c.getOption('configureMouse');a=a?a(c,f,d):{};null==a.unit&&(a.unit=(aG?d.shiftKey&&d.metaKey:d.altKey)?'rectangle':'single'==f?'char':'double'==f?'word':'line');if(null==a.extend||c.doc.extend){a.extend=c.doc.extend||d.shiftKey}null==a.addNew&&(a.addNew=n?d.metaKey:d.ctrlKey);null==a.moveOnDrag&&(a.moveOnDrag=!(n?d.altKey:d.ctrlKey));var h=c.doc.sel,g;c.options.dragDrop&&aH&&!c.isReadOnly()&&'single'==f&&-1<(g=h.contains(e))&&(0>x((g=h.ranges[g]).from(),e)||0<e.xRel)&&(0<x(g.to(),e)||0>e.xRel)?fh(c,d,e,a):gh(c,d,e,a)}function fh(d,j,m,i){var c=d.display,g=!1,f=L(d,function(a){h&&(c.scroller.draggable=!1);d.state.draggingText=!1;ba(document,'mouseup',f);ba(document,'mousemove',k);ba(c.scroller,'dragstart',l);ba(c.scroller,'drop',f);g||(U(a),i.addNew||Dc(d.doc,m,null,null,i.extend),h||b&&9==e?setTimeout(function(){document.body.focus();c.input.focus()},20):c.input.focus())}),k=function(a){g=g||10<=Math.abs(j.clientX-a.clientX)+Math.abs(j.clientY-a.clientY)},l=function(){return g=!0};h&&(c.scroller.draggable=!0);d.state.draggingText=f;f.copy=!i.moveOnDrag;c.scroller.dragDrop&&c.scroller.dragDrop();a(document,'mouseup',f);a(document,'mousemove',k);a(c.scroller,'dragstart',l);a(c.scroller,'drop',f);Qe(d);setTimeout(function(){return c.input.focus()},20)}function Tf(a,b,d){if('char'==d){return new c(b,b)}if('word'==d){return a.findWordAt(b)}if('line'==d){return new c(p(b.line,0),v(a.doc,p(b.line+1,0)))}a=d(a,b);return new c(a.from,a.to)}function gh(d,j,f,g){function e(a){if(0!=x(o,a)){if(o=a,'rectangle'==g.unit){var i=[],m=d.options.tabSize,n=fa(t(b,f.line).text,f.ch,m),j=fa(t(b,a.line).text,a.ch,m),l=Math.min(n,j);n=Math.max(n,j);j=Math.min(f.line,a.line);for(var r=Math.min(d.lastLine(),Math.max(f.line,a.line));j<=r;j++){var q=t(b,j).text,p=Pc(q,l,m);l==n?i.push(new c(p(j,p),p(j,p))):q.length>p&&i.push(new c(p(j,p),p(j,Pc(q,n,m))))}i.length||i.push(new c(f,f));Q(b,ma(k.ranges.slice(0,e).concat(i),e),{origin:'*mouse',scroll:!1});d.scrollIntoView(a)}else {i=h,l=Tf(d,a,g.unit),a=i.anchor,0<x(l.anchor,a)?(m=l.head,a=kc(i.from(),l.anchor)):(m=l.anchor,a=jc(i.to(),l.head)),i=k.ranges.slice(0),i[e]=hh(d,new c(v(b,a),m)),Q(b,ma(i,e),ai)}}}function f(a){var e=++n,c=Sa(d,a,!0,'rectangle'==g.unit);if(c){if(0!=x(c,o)){d.curOp.focus=ta();e(c);var f=xd(l,b);(c.line>=f.to||c.line<f.from)&&setTimeout(L(d,function(){n==e&&f(a)}),150)}else {var h=a.clientY<q.top?-20:a.clientY>q.bottom?20:0;h&&setTimeout(L(d,function(){n==e&&(l.scroller.scrollTop+=h,f(a))}),50)}}}function g(a){d.state.selectingText=!1;n=Infinity;U(a);l.input.focus();ba(document,'mousemove',r);ba(document,'mouseup',p);b.history.lastSelOrigin=null}var l=d.display,b=d.doc;U(j);var k=b.sel,i=k.ranges;if(g.addNew&&!g.extend){var e=b.sel.contains(f);var h=-1<e?i[e]:new c(f,f)}else {h=b.sel.primary(),e=b.sel.primIndex}'rectangle'==g.unit?(g.addNew||(h=new c(f,f)),f=Sa(d,j,!0,!0),e=-1):(j=Tf(d,f,g.unit),h=g.extend?Id(h,j.anchor,j.head,g.extend):j);g.addNew?-1==e?(e=i.length,Q(b,ma(i.concat([h]),e),{scroll:!1,origin:'*mouse'})):1<i.length&&i[e].empty()&&'char'==g.unit&&!g.extend?(Q(b,ma(i.slice(0,e).concat(i.slice(e+1)),0),{scroll:!1,origin:'*mouse'}),k=b.sel):Jd(b,e,h,ai):(e=0,Q(b,new m([h],0),ai),k=b.sel);var o=f,q=l.wrapper.getBoundingClientRect(),n=0,r=L(d,function(a){ie(a)?f(a):g(a)}),p=L(d,g);d.state.selectingText=p;a(document,'mousemove',r);a(document,'mouseup',p)}function hh(j,f){var b=f.anchor,e=f.head,a=t(j.doc,b.line);if(0==x(b,e)&&b.sticky==e.sticky){return f}a=ua(a);if(!a){return f}var h=vb(a,b.ch,b.sticky),i=a[h];if(i.from!=b.ch&&i.to!=b.ch){return f}var d=h+(i.from==b.ch==(1!=i.level)?0:1);if(0==d||d==a.length){return f}if(e.line!=b.line){var g=0<(e.line-b.line)*('ltr'==j.doc.direction?1:-1)}else {g=vb(a,e.ch,e.sticky),h=g-h||(e.ch-b.ch)*(1==i.level?-1:1),g=g==d-1||g==d?0>h:0<h}a=a[d+(g?-1:0)];a=(d=g==(1==a.level))?a.from:a.to;d=d?'after':'before';return b.ch==a&&b.sticky==d?f:new c(new p(b.line,a,d),e)}function Jc(b,a,g,d){if(a.touches){var e=a.touches[0].clientX;var f=a.touches[0].clientY}else {try{e=a.clientX,f=a.clientY}catch(aT){return !1}}if(e>=Math.floor(b.display.gutters.getBoundingClientRect().right)){return !1}d&&U(a);d=b.display;var c=d.lineDiv.getBoundingClientRect();if(f>c.bottom||!ha(b,g)){return ad(a)}f-=c.top-d.viewOffset;for(c=0;c<b.options.gutters.length;++c){var h=d.gutters.childNodes[c];if(h&&h.getBoundingClientRect().right>=e){return e=Ja(b.doc,f),G(b,g,b,e,b.options.gutters[c],a),ad(a)}}}function Sf(a,b){var c;(c=va(a.display,b))||(c=ha(a,'gutterContextMenu')?Jc(a,b,'gutterContextMenu',!1):!1);if(!c&&!K(a,b,'contextmenu')){a.display.input.onContextMenu(b)}}function Uf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,'')+a.options.theme.replace(/(^|\s)\s*/g,' cm-s-');Eb(a)}function Xb(a){af(a);V(a);Se(a)}function ih(d,b,c){!b!=!(c&&c!=E)&&(c=d.display.dragFunctions,b=b?a:ba,b(d.display.scroller,'dragstart',c.start),b(d.display.scroller,'dragenter',c.enter),b(d.display.scroller,'dragover',c.over),b(d.display.scroller,'dragleave',c.leave),b(d.display.scroller,'drop',c.drop))}function jh(a){a.options.lineWrapping?(Ga(a.display.wrapper,'CodeMirror-wrap'),a.display.sizer.style.minWidth='',a.display.sizerWidth=null):(x(a.display.wrapper,'CodeMirror-wrap'),$c(a));ud(a);V(a);Eb(a);setTimeout(function(){return gb(a)},100)}function E(i,a){var f=this;if(!(this instanceof E)){return new E(i,a)}this.options=a=a?Ha(a):{};Ha(at,a,!1);Dd(a);var c=a.value;'string'==typeof c&&(c=new j(c,a.mode,null,a.lineSeparator,a.direction));this.doc=c;var d=new E.inputStyles[a.inputStyle](this);d=this.display=new kg(i,c,d);d.wrapper.CodeMirror=this;af(this);Uf(this);a.lineWrapping&&(this.display.wrapper.className+=' CodeMirror-wrap');Xe(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new y(),keySeq:null,specialChars:null};a.autofocus&&!U&&d.input.focus();b&&11>e&&setTimeout(function(){return f.display.input.reset(!0)},20);kh(this);au||(Sg(),au=!0);Va(this);this.curOp.forceUpdate=!0;gf(this,c);a.autofocus&&!U||this.hasFocus()?setTimeout(Oc(wd,this),20):Gb(this);for(var g in Z){if(Z.hasOwnProperty(g)){Z[g](f,a[g],E)}}Te(this);a.finishInit&&a.finishInit(this);for(c=0;c<aj.length;++c){aj[c](f)}Wa(this);h&&a.lineWrapping&&'optimizelegibility'==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering='auto')}function kh(d){function b(){f.activeTouch&&(i=setTimeout(function(){return f.activeTouch=null},1000),h=f.activeTouch,h.end=+new Date())}function c(b,a){if(null==a.left){return !0}var d=a.left-b.left,c=a.top-b.top;return 400<d*d+c*c}var f=d.display;a(f.scroller,'mousedown',L(d,Rf));b&&11>e?a(f.scroller,'dblclick',L(d,function(a){if(!K(d,a)){var b=Sa(d,a);!b||Jc(d,a,'gutterClick',!0)||va(d.display,a)||(U(a),a=d.findWordAt(b),Dc(d.doc,a.anchor,a.head))}})):a(f.scroller,'dblclick',function(a){return K(d,a)||U(a)});ah||a(f.scroller,'contextmenu',function(a){return Sf(d,a)});var i,h={end:0};a(f.scroller,'touchstart',function(b){var a;if(a=!K(d,b)){1!=b.touches.length?a=!1:(a=b.touches[0],a=1>=a.radiusX&&1>=a.radiusY),a=!a}a&&!Jc(d,b,'gutterClick',!0)&&(f.input.ensurePolled(),clearTimeout(i),a=+new Date(),f.activeTouch={start:a,moved:!1,prev:300>=a-h.end?h:null},1==b.touches.length&&(f.activeTouch.left=b.touches[0].pageX,f.activeTouch.top=b.touches[0].pageY))});a(f.scroller,'touchmove',function(){f.activeTouch&&(f.activeTouch.moved=!0)});a(f.scroller,'touchend',function(e){var a=f.activeTouch;if(a&&!va(f,e)&&null!=a.left&&!a.moved&&300>new Date()-a.start){var b=d.coordsChar(f.activeTouch,'page');a=!a.prev||c(a,a.prev)?new c(b,b):!a.prev.prev||c(a,a.prev.prev)?d.findWordAt(b):new c(p(b.line,0),v(d.doc,p(b.line+1,0)));d.setSelection(a.anchor,a.head);d.focus();U(e)}b()});a(f.scroller,'touchcancel',b);a(f.scroller,'scroll',function(){f.scroller.clientHeight&&(Ib(d,f.scroller.scrollTop),Ua(d,f.scroller.scrollLeft,!0),G(d,'scroll',d))});a(f.scroller,'mousewheel',function(a){return cf(d,a)});a(f.scroller,'DOMMouseScroll',function(a){return cf(d,a)});a(f.wrapper,'scroll',function(){return f.wrapper.scrollTop=f.wrapper.scrollLeft=0});f.dragFunctions={enter:function(a){K(d,a)||xb(a)},over:function(a){if(!K(d,a)){var c=Sa(d,a);if(c){var b=document.createDocumentFragment();Oe(d,c,b);d.display.dragCursor||(d.display.dragCursor=u('div',null,'CodeMirror-cursors CodeMirror-dragcursors'),d.display.lineSpace.insertBefore(d.display.dragCursor,d.display.cursorDiv));aa(d.display.dragCursor,b)}xb(a)}},start:function(c){if(b&&(!d.state.draggingText||100>+new Date()-ar)){xb(c)}else {if(!K(d,c)&&!va(d.display,c)&&(c.dataTransfer.setData('Text',d.getSelection()),c.dataTransfer.effectAllowed='copyMove',c.dataTransfer.setDragImage&&!av)){var a=u('img',null,null,'position: fixed; left: 0; top: 0;');a.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';o&&(a.width=a.height=1,d.display.wrapper.appendChild(a),a._top=a.offsetTop);c.dataTransfer.setDragImage(a,0,0);o&&a.parentNode.removeChild(a)}}},drop:L(d,Rg),leave:function(a){K(d,a)||Df(d)}};var g=f.input.getField();a(g,'keyup',function(a){return Pf.call(d,a)});a(g,'keydown',L(d,Of));a(g,'keypress',L(d,Qf));a(g,'focus',function(a){return wd(d,a)});a(g,'blur',function(a){return Gb(d,a)})}function Yb(f,d,a,i){var g=f.doc,l;null==a&&(a='add');'smart'==a&&(g.mode.indent?l=yb(f,d).state:a='prev');var h=f.options.tabSize,e=t(g,d),k=fa(e.text,null,h);e.stateAfter&&(e.stateAfter=null);var j=e.text.match(/^\s*/)[0];if(!i&&!/\S/.test(e.text)){var b=0;a='not'}else {if('smart'==a&&(b=g.mode.indent(l,e.text.slice(j.length),e.text),b==Y||150<b)){if(!i){return}a='prev'}}'prev'==a?b=d>g.first?fa(t(g,d-1).text,null,h):0:'add'==a?b=k+f.options.indentUnit:'subtract'==a?b=k-f.options.indentUnit:'number'==typeof a&&(b=k+a);b=Math.max(0,b);a='';i=0;if(f.options.indentWithTabs){for(f=Math.floor(b/h);f;--f){i+=h,a+='\t'}}i<b&&(a+=Qc(b-i));if(a!=j){return lb(g,a,p(d,0),p(d,j.length),'+input'),e.stateAfter=null,!0}for(h=0;h<g.sel.ranges.length;h++){if(e=g.sel.ranges[h],e.head.line==d&&e.head.ch<j.length){d=p(d,j.length);Jd(g,h,new c(d,d));break}}}function Td(a,g,l,d,n){var m=a.doc;a.display.shift=!1;d||(d=m.sel);var i=a.state.pasteIncoming||'paste'==n,j=ak(g),e=null;if(i&&1<d.ranges.length){if(k&&k.text.join('\n')==g){if(0==d.ranges.length%k.text.length){e=[];for(var c=0;c<k.text.length;c++){e.push(m.splitLines(k.text[c]))}}}else {j.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(e=hc(j,function(a){return [a]}))}}for(c=d.ranges.length-1;0<=c;c--){var h=d.ranges[c];var b=h.from(),f=h.to();h.empty()&&(l&&0<l?b=p(b.line,b.ch-l):a.state.overwrite&&!i?f=p(f.line,Math.min(t(m,f.line).text.length,f.ch+z(j).length)):k&&k.lineWise&&k.text.join('\n')==g&&(b=f=p(b.line,0)));h=a.curOp.updateInput;b={from:b,to:f,text:e?e[c%e.length]:j,origin:n||(i?'paste':a.state.cutIncoming?'cut':'+input')};kb(a.doc,b);P(a,'inputRead',a,b)}g&&!i&&Yf(a,g);fb(a);a.curOp.updateInput=h;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Zf(b,a){var c=b.clipboardData&&b.clipboardData.getData('Text');if(c){return b.preventDefault(),a.isReadOnly()||a.options.disableInput||Y(a,function(){return Td(a,c,0,null,'paste')}),!0}}function Yf(a,h){if(a.options.electricChars&&a.options.smartIndent){for(var e=a.doc.sel,c=e.ranges.length-1;0<=c;c--){var b=e.ranges[c];if(!(100<b.head.ch||c&&e.ranges[c-1].head.line==b.head.line)){var d=a.getModeAt(b.head),f=!1;if(d.electricChars){for(var g=0;g<d.electricChars.length;g++){if(-1<h.indexOf(d.electricChars.charAt(g))){f=Yb(a,b.head.line,'smart');break}}}else {d.electricInput&&d.electricInput.test(t(a.doc,b.head.line).text.slice(0,b.head.ch))&&(f=Yb(a,b.head.line,'smart'))}f&&P(a,'electricInput',a,b.head.line)}}}}function $f(b){for(var d=[],e=[],c=0;c<b.doc.sel.ranges.length;c++){var a=b.doc.sel.ranges[c].head.line;a={anchor:p(a,0),head:p(a+1,0)};e.push(a);d.push(b.getRange(a.anchor,a.head))}return {text:d,ranges:e}}function ag(a,b){a.setAttribute('autocorrect','off');a.setAttribute('autocapitalize','off');a.setAttribute('spellcheck',!!b)}function bg(){var a=u('textarea',null,null,'position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none'),b=u('div',[a],null,'overflow: hidden; position: relative; width: 3px; height: 0px;');h?a.style.width='1000px':a.setAttribute('wrap','off');N&&(a.style.border='1px solid black');ag(a);return b}function Vd(b,a,c,d,j){function f(d){var e=j?Wg(b.cm,g,a,c):Md(g,a,c);if(null==e){if(d=!d){d=a.line+c,d<b.first||d>=b.first+b.size?d=!1:(a=new p(d,a.ch,a.sticky),d=g=t(b,d))}if(d){a=Nd(j,b.cm,g,a.line,c)}else {return !1}}else {a=e}return !0}var k=a,f=c,g=t(b,a.line);if('char'==d){f()}else {if('column'==d){f(!0)}else {if('word'==d||'group'==d){var i=null;d='group'==d;for(var l=b.cm&&b.cm.getHelper(a,'wordChars'),h=!0;!(0>c)||f(!h);h=!1){var e=g.text.charAt(a.ch)||'\n';e=ic(e,l)?'w':d&&'\n'==e?'n':!d||/\s/.test(e)?null:'p';!d||h||e||(e='s');if(i&&i!=e){0>c&&(c=1,f(),a.sticky='after');break}e&&(i=e);if(0<c&&!f(!h)){break}}}}}f=Kd(b,a,k,f,!0);Vc(k,f)&&(f.hitSide=!0);return f}function cg(d,a,c,e){var f=d.doc,g=a.left;if('page'==e){var b=Math.max(Math.min(d.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight)-0.5*Qa(d.display),3);b=(0<c?a.bottom:a.top)+c*b}else {'line'==e&&(b=0<c?a.bottom+3:a.top-3)}for(;;){a=rd(d,g,b);if(!a.outside){break}if(0>c?0>=b:b>=f.height){a.hitSide=!0;break}b+=5*c}return a}function dg(d,b){var a=ld(d,b.line);if(!a||a.hidden){return null}var c=t(d.doc,b.line);a=Be(a,c,b.line);c=ua(c,d.doc.direction);var e='left';c&&(e=vb(c,b.ch)%2?'right':'left');a=Ce(a.map,b.ch,e);a.offset='right'==a.collapse?a.end:a.start;return a}function lh(a){for(;a;a=a.parentNode){if(/CodeMirror-gutter-wrapper/.test(a.className)){return !0}}return !1}function qb(a,b){b&&(a.bad=!0);return a}function mh(d,b,f,g,h){function f(a){return function(b){return b.id==a}}function g(b){b&&(a&&(c+=e,a=!1),c+=b)}function h(b){if(1==b.nodeType){var f=b.getAttribute('cm-text');if(null!=f){g(f||b.textContent.replace(/\u200b/g,''))}else {f=b.getAttribute('cm-marker');var i;if(f){b=d.findMarks(p(g,0),p(h+1,0),f(+f)),b.length&&(i=b[0].find(0))&&g(Ia(d.doc,i.from,i.to).join(e))}else {if('false'!=b.getAttribute('contenteditable')){(i=/^(pre|div|p)$/i.test(b.nodeName))&&a&&(c+=e,a=!1);for(f=0;f<b.childNodes.length;f++){h(b.childNodes[f])}i&&(a=!0)}}}}else {3==b.nodeType&&g(b.nodeValue)}}for(var c='',a=!1,e=d.doc.lineSeparator();;){h(b);if(b==f){break}b=b.nextSibling}return c}function Lc(b,c,d){if(c==b.display.lineDiv){var a=b.display.lineDiv.childNodes[d];if(!a){return qb(b.clipPos(p(b.display.viewTo-1)),!0)}c=null;d=0}else {for(a=c;;a=a.parentNode){if(!a||a==b.display.lineDiv){return null}if(a.parentNode&&a.parentNode==b.display.lineDiv){break}}}for(var e=0;e<b.display.view.length;e++){var f=b.display.view[e];if(f.node==a){return nh(f,c,d)}}}function nh(f,a,c){function d(j,e,d){for(var a=-1;a<(h?h.length:0);a++){for(var c=0>a?i.map:h[a],b=0;b<c.length;b+=3){var g=c[b+2];if(g==j||g==e){e=C(0>a?f.line:f.rest[a]);a=c[b]+d;if(0>d||g!=j){a=c[b+(d?1:0)]}return p(e,a)}}}}var d=f.text.firstChild,g=!1;if(!a||!xa(d,a)){return qb(p(C(f.line),0),!0)}if(a==d&&(g=!0,a=d.childNodes[c],c=0,!a)){return c=f.rest?z(f.rest):f.line,qb(p(C(c),c.text.length),g)}var e=3==a.nodeType?a:null,b=a;e||1!=a.childNodes.length||3!=a.firstChild.nodeType||(e=a.firstChild,c&&(c=e.nodeValue.length));for(;b.parentNode!=d;){b=b.parentNode}var i=f.measure,h=i.maps;if(a=d(e,b,c)){return qb(a,g)}d=b.nextSibling;for(e=e?e.nodeValue.length-c:0;d;d=d.nextSibling){if(a=d(d,d.firstChild,0)){return qb(p(a.line,a.ch-e),g)}e+=d.textContent.length}for(b=b.previousSibling;b;b=b.previousSibling){if(a=d(b,b.firstChild,-1)){return qb(p(a.line,a.ch+c),g)}c+=b.textContent.length}}var i=navigator.userAgent,ax=navigator.platform,t=/gecko\/\d/i.test(i),ay=/MSIE \d/.test(i),az=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(i),F=/Edge\/(\d+)/.exec(i),b=ay||az||F,e=b&&(ay?document.documentMode||6:+(F||az)[1]),h=!F&&/WebKit\//.test(i),aL=h&&/Qt\/\d+\.\d+/.test(i),ac=!F&&/Chrome\//.test(i),o=/Opera\//.test(i),av=/Apple Computer/.test(navigator.vendor),aM=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(i),aD=/PhantomJS/.test(i),N=!F&&/AppleWebKit/.test(i)&&/Mobile\/\w+/.test(i),ad=/Android/.test(i),U=N||ad||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(i),n=N||/Mac/.test(ax),aG=/\bCrOS\b/.test(i),aN=/win/i.test(ax),z=o&&i.match(/Version\/(\d*\.\d*)/);z&&(z=Number(z[1]));z&&15<=z&&(o=!1,h=!0);var as=n&&(aL||o&&(null==z||12.11>z)),ah=t||b&&9<=e,x=function(c,e){var b=c.className,a=Fa(e).exec(b);if(a){var d=b.slice(a.index+a[0].length);c.className=b.slice(0,a.index)+(d?a[1]+d:'')}};var W=document.createRange?function(b,c,d,e){var a=document.createRange();a.setEnd(e||b,d);a.setStart(b,c);return a}:function(b,c,d){var a=document.body.createTextRange();try{a.moveToElementText(b.parentNode)}catch(aT){return a}a.collapse(!0);a.moveEnd('character',d);a.moveStart('character',c);return a};var O=function(a){a.select()};N?O=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:b&&(O=function(a){try{a.select()}catch(aT){}});var y=function(){this.id=null};y.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var Y={toString:function(){return 'CodeMirror.Pass'}},q={scroll:!1},ai={origin:'*mouse'},P={origin:'+move'},_=[''],aI=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,aJ=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,aB=!1,u=!1,V=null,aK=function(){function a(a){return 247>=a?'bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN'.charAt(a):1424<=a&&1524>=a?'R':1536<=a&&1785>=a?'nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111'.charAt(a-1536):1774<=a&&2220>=a?'r':8192<=a&&8203>=a?'w':8204==a?'b':'L'}function b(a,b,c){this.level=a;this.from=b;this.to=c}var e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,b=/[LRr]/,c=/[Lb1n]/,d=/[1n]/;return function(m,o){var j='ltr'==o?'L':'R';if(0==m.length||'ltr'==o&&!e.test(m)){return !1}for(var k=m.length,i=[],f=0;f<k;++f){i.push(a(m.charCodeAt(f)))}f=0;for(var g=j;f<k;++f){var h=i[f];'m'==h?i[f]=g:g=h}f=0;for(g=j;f<k;++f){h=i[f],'1'==h&&'r'==g?i[f]='n':b.test(h)&&(g=h,'r'==h&&(i[f]='R'))}f=1;for(g=i[0];f<k-1;++f){h=i[f],'+'==h&&'1'==g&&'1'==i[f+1]?i[f]='1':','!=h||g!=i[f+1]||'1'!=g&&'n'!=g||(i[f]=g),g=h}for(f=0;f<k;++f){if(g=i[f],','==g){i[f]='N'}else {if('%'==g){for(g=f+1;g<k&&'%'==i[g];++g){}for(h=f&&'!'==i[f-1]||g<k&&'1'==i[g]?'1':'N';f<g;++f){i[f]=h}f=g-1}}}f=0;for(g=j;f<k;++f){h=i[f],'L'==g&&'1'==h?i[f]='L':b.test(h)&&(g=h)}for(g=0;g<k;++g){if(a.test(i[g])){for(f=g+1;f<k&&a.test(i[f]);++f){}h='L'==(g?i[g-1]:j);for(h=h==('L'==(f<k?i[f]:j))?h?'L':'R':j;g<f;++g){i[g]=h}g=f-1}}j=[];var n;for(f=0;f<k;){if(c.test(i[f])){g=f;for(++f;f<k&&c.test(i[f]);++f){}j.push(new b(0,g,f))}else {var l=f;g=j.length;for(++f;f<k&&'L'!=i[f];++f){}for(h=l;h<f;){if(d.test(i[h])){l<h&&j.splice(g,0,new b(1,l,h));l=h;for(++h;h<f&&d.test(i[h]);++h){}j.splice(g,0,new b(2,l,h));l=h}else {++h}}l<f&&j.splice(g,0,new b(1,l,f))}}'ltr'==o&&(1==j[0].level&&(n=m.match(/^\s+/))&&(j[0].from=n[0].length,j.unshift(new b(0,0,n[0].length))),1==z(j).level&&(n=m.match(/\s+$/))&&(z(j).to-=n[0].length,j.push(new b(0,k-n[0].length,k))));return 'rtl'==o?j.reverse():j}}(),aa=[],a=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent('on'+b,c):(a=a._handlers||(a._handlers={}),a[b]=(a[b]||aa).concat(c))},aH=function(){if(b&&9>e){return !1}var a=u('div');return 'draggable' in a||'dragDrop' in a}(),al,an,ak=3!='\n\nb'.split(/\n/).length?function(b){for(var c=0,d=[],g=b.length;c<=g;){var a=b.indexOf('\n',c);-1==a&&(a=b.length);var e=b.slice(c,'\r'==b.charAt(a-1)?a-1:a),f=e.indexOf('\r');-1!=f?(d.push(e.slice(0,f)),c+=f+1):(d.push(e),c=a+1)}return d}:function(a){return a.split(/\r\n?|\n/)},aO=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(aT){return !1}}:function(b){try{var a=b.ownerDocument.selection.createRange()}catch(aT){}return a&&a.parentElement()==b?0!=a.compareEndPoints('StartToEnd',a):!1},aF=function(){var a=u('div');if('oncopy' in a){return !0}a.setAttribute('oncopy','return;');return 'function'==typeof a.oncopy}(),ao=null,am={},A={},B={},f=function(a,b,c){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=c};f.prototype.eol=function(){return this.pos>=this.string.length};f.prototype.sol=function(){return this.pos==this.lineStart};f.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};f.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};f.prototype.eat=function(a){var b=this.string.charAt(this.pos);if('string'==typeof a?b==a:b&&(a.test?a.test(b):a(b))){return ++this.pos,b}};f.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a);){}return this.pos>b};f.prototype.eatSpace=function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));){++this.pos}return this.pos>a};f.prototype.skipToEnd=function(){this.pos=this.string.length};f.prototype.skipTo=function(a){a=this.string.indexOf(a,this.pos);if(-1<a){return this.pos=a,!0}};f.prototype.backUp=function(a){this.pos-=a};f.prototype.column=function(){this.lastColumnPos<this.start&&(this.lastColumnValue=fa(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?fa(this.string,this.lineStart,this.tabSize):0)};f.prototype.indentation=function(){return fa(this.string,null,this.tabSize)-(this.lineStart?fa(this.string,this.lineStart,this.tabSize):0)};f.prototype.match=function(a,b,d){if('string'==typeof a){var c=function(a){return d?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(c(e)==c(a)){return !1!==b&&(this.pos+=a.length),!0}}else {if((a=this.string.slice(this.pos).match(a))&&0<a.index){return null}a&&!1!==b&&(this.pos+=a[0].length);return a}};f.prototype.current=function(){return this.string.slice(this.start,this.pos)};f.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}};f.prototype.lookAhead=function(b){var a=this.lineOracle;return a&&a.lookAhead(b)};f.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var ab=function(a,b){this.state=a;this.lookAhead=b},p=function(a,b,c,d){this.state=b;this.doc=a;this.line=c;this.maxLookAhead=d||0;this.baseTokens=null;this.baseTokenPos=1};p.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a);return b};p.prototype.baseToken=function(a){if(!this.baseTokens){return null}for(;this.baseTokens[this.baseTokenPos]<=a;){this.baseTokenPos+=2}var b=this.baseTokens[this.baseTokenPos+1];return {type:b&&b.replace(/( |^)overlay .*/,''),size:this.baseTokens[this.baseTokenPos]-a}};p.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};p.fromSaved=function(a,b,c){return b instanceof ab?new p(a,Ma(a.mode,b.state),c,b.lookAhead):new p(a,Ma(a.mode,b),c)};p.prototype.save=function(a){a=!1!==a?Ma(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new ab(a,this.maxLookAhead):a};var aA=function(a,b,c){this.start=a.start;this.end=a.pos;this.string=a.current();this.type=b||null;this.state=c},D=function(b,c,a){this.text=b;ce(this,c);this.height=a?a(this):1};D.prototype.lineNo=function(){return C(this)};bb(D);var aS={},aQ={},C=null,G=null,aq={left:0,right:0,top:0,bottom:0},w,v=function(f,g,h){this.cm=h;var c=this.vert=u('div',[u('div',null,null,'min-width: 1px')],'CodeMirror-vscrollbar'),d=this.horiz=u('div',[u('div',null,null,'height: 100%; min-height: 1px')],'CodeMirror-hscrollbar');f(c);f(d);a(c,'scroll',function(){c.clientHeight&&g(c.scrollTop,'vertical')});a(d,'scroll',function(){d.clientWidth&&g(d.scrollLeft,'horizontal')});this.checkedZeroWidth=!1;b&&8>e&&(this.horiz.style.minHeight=this.vert.style.minWidth='18px')};v.prototype.update=function(a){var c=a.scrollWidth>a.clientWidth+1,d=a.scrollHeight>a.clientHeight+1,b=a.nativeBarWidth;d?(this.vert.style.display='block',this.vert.style.bottom=c?b+'px':'0',this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+(a.viewHeight-(c?b:0)))+'px'):(this.vert.style.display='',this.vert.firstChild.style.height='0');c?(this.horiz.style.display='block',this.horiz.style.right=d?b+'px':'0',this.horiz.style.left=a.barLeft+'px',this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(d?b:0)))+'px'):(this.horiz.style.display='',this.horiz.firstChild.style.width='0');!this.checkedZeroWidth&&0<a.clientHeight&&(0==b&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return {right:d?b:0,bottom:c?b:0}};v.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,'horiz')};v.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,'vert')};v.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=n&&!aM?'12px':'18px';this.horiz.style.pointerEvents=this.vert.style.pointerEvents='none';this.disableHoriz=new y();this.disableVert=new y()};v.prototype.enableZeroWidthBar=function(a,b,c){function d(){var d=a.getBoundingClientRect();('vert'==c?document.elementFromPoint(d.right-1,(d.top+d.bottom)/2):document.elementFromPoint((d.right+d.left)/2,d.bottom-1))!=a?a.style.pointerEvents='none':b.set(1000,d)}a.style.pointerEvents='auto';b.set(1000,d)};v.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)};var Q=function(){};Q.prototype.update=function(){return {bottom:0,right:0}};Q.prototype.setScrollLeft=function(){};Q.prototype.setScrollTop=function(){};Q.prototype.clear=function(){};var aw={'native':v,'null':Q},aC=0,ae=function(a,c,d){var b=a.display;this.viewport=c;this.visible=xd(b,a.doc,c);this.editorIsHidden=!b.wrapper.offsetWidth;this.wrapperHeight=b.wrapper.clientHeight;this.wrapperWidth=b.wrapper.clientWidth;this.oldDisplayWidth=Na(a);this.force=d;this.dims=md(a);this.events=[]};ae.prototype.signal=function(a,b){ha(a,b)&&this.events.push(arguments)};ae.prototype.finish=function(){for(var a=0;a<this.events.length;a++){G.apply(null,this.events[a])}};var X=0,l=null;b?l=-0.53:t?l=15:ac?l=-0.7:av&&(l=-1/3);var m=function(a,b){this.ranges=a;this.primIndex=b};m.prototype.primary=function(){return this.ranges[this.primIndex]};m.prototype.equals=function(a){if(a==this){return !0}if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length){return !1}for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(!Vc(c.anchor,d.anchor)||!Vc(c.head,d.head)){return !1}}return !0};m.prototype.deepCopy=function(){for(var b=[],a=0;a<this.ranges.length;a++){b[a]=new c(Wc(this.ranges[a].anchor),Wc(this.ranges[a].head))}return new m(b,this.primIndex)};m.prototype.somethingSelected=function(){for(var a=0;a<this.ranges.length;a++){if(!this.ranges[a].empty()){return !0}}return !1};m.prototype.contains=function(c,b){b||(b=c);for(var a=0;a<this.ranges.length;a++){var d=this.ranges[a];if(0<=x(b,d.from())&&0>=x(c,d.to())){return a}}return -1};var c=function(a,b){this.anchor=a;this.head=b};c.prototype.from=function(){return kc(this.anchor,this.head)};c.prototype.to=function(){return jc(this.anchor,this.head)};c.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};Ob.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,d){for(var b=a,f=a+d;b<f;++b){var c=this.lines[b];this.height-=c.height;var e=c;e.parent=null;be(e);P(c,'delete')}this.lines.splice(a,d)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a){b[a].parent=this}},iterN:function(a,b,c){for(b=a+b;a<b;++a){if(c(this.lines[a])){return !0}}}};Pb.prototype={chunkSize:function(){return this.size},removeInner:function(b,d){this.size-=d;for(var a=0;a<this.children.length;++a){var c=this.children[a],e=c.chunkSize();if(b<e){var f=Math.min(d,e-b),g=c.height;c.removeInner(b,f);this.height-=g-c.height;e==f&&(this.children.splice(a--,1),c.parent=null);if(0==(d-=f)){break}b=0}else {b-=e}}25>this.size-d&&(1<this.children.length||!(this.children[0] instanceof Ob))&&(a=[],this.collapse(a),this.children=[new Ob(a)],this.children[0].parent=this)},collapse:function(b){for(var a=0;a<this.children.length;++a){this.children[a].collapse(b)}},insertInner:function(d,b,c){this.size+=b.length;this.height+=c;for(var e=0;e<this.children.length;++e){var a=this.children[e],f=a.chunkSize();if(d<=f){a.insertInner(d,b,c);if(a.lines&&50<a.lines.length){for(b=d=a.lines.length%25+25;b<a.lines.length;){c=new Ob(a.lines.slice(b,b+=25)),a.height-=c.height,this.children.splice(++e,0,c),c.parent=this}a.lines=a.lines.slice(0,d);this.maybeSpill()}break}d-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5);b=new Pb(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=N(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else {c=new Pb(a.children),c.parent=a,a.children=[c,b],a=c}b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(b,d,f){for(var c=0;c<this.children.length;++c){var e=this.children[c],a=e.chunkSize();if(b<a){a=Math.min(d,a-b);if(e.iterN(b,a,f)){return !0}if(0==(d-=a)){break}b=0}else {b-=a}}}};var H=function(c,d,a){if(a){for(var b in a){a.hasOwnProperty(b)&&(this[b]=a[b])}}this.doc=c;this.node=d};H.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,e=C(c);if(null!=e&&b){for(var d=0;d<b.length;++d){b[d]==this&&b.splice(d--,1)}b.length||(c.widgets=null);var f=Cb(this);na(c,Math.max(0,c.height-f));a&&(Y(a,function(){var b=-f;pa(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&wc(a,b);Ba(a,e,'widget')}),P(a,'lineWidgetCleared',a,this,e))}};H.prototype.changed=function(){var d=this,e=this.height,a=this.doc.cm,b=this.line;this.height=null;var c=Cb(this)-e;c&&(na(b,b.height+c),a&&Y(a,function(){a.curOp.forceUpdate=!0;pa(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&wc(a,c);P(a,'lineWidgetChanged',a,d,C(b))}))};bb(H);var ap=0,r=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++ap};r.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,j=a&&!a.curOp;j&&Va(a);if(ha(this,'clear')){var c=this.find();c&&P(this,'clear',c.from,c.to)}for(var g=c=null,d=0;d<this.lines.length;++d){var b=this.lines[d],e=ub(b.markedSpans,this);a&&!this.collapsed?Ba(a,C(b),'text'):a&&(null!=e.to&&(g=C(b)),null!=e.from&&(c=C(b)));for(var k=b,h=void 0,i=b.markedSpans,l=e,f=0;f<i.length;++f){i[f]!=l&&(h||(h=[])).push(i[f])}k.markedSpans=h;null==e.from&&this.collapsed&&!La(this.doc,b)&&a&&na(b,Qa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping){for(d=0;d<this.lines.length;++d){b=oa(this.lines[d]),e=mc(b),e>a.display.maxLineLength&&(a.display.maxLine=b,a.display.maxLineLength=e,a.display.maxLineChanged=!0)}}null!=c&&a&&this.collapsed&&V(a,c,g+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&rf(a.doc));a&&P(a,'markerCleared',a,this,c,g);j&&Wa(a);this.parent&&this.parent.clear()}};r.prototype.find=function(b,g){null==b&&'bookmark'==this.type&&(b=1);for(var c,e,f=0;f<this.lines.length;++f){var a=this.lines[f],d=ub(a.markedSpans,this);if(null!=d.from&&(c=p(g?a:C(a),d.from),-1==b)){return c}if(null!=d.to&&(e=p(g?a:C(a),d.to),1==b)){return e}}return c&&{from:c,to:e}};r.prototype.changed=function(){var d=this,c=this.find(-1,!0),b=this,a=this.doc.cm;c&&a&&Y(a,function(){var f=c.line,e=C(c.line);if(e=ld(a,e)){Ee(e),a.curOp.selectionChanged=a.curOp.forceUpdate=!0}a.curOp.updateMaxLine=!0;La(b.doc,f)||null==b.height||(e=b.height,b.height=null,(e=Cb(b)-e)&&na(f,f.height+e));P(a,'markerChanged',a,d)})};r.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var a=this.doc.cm.curOp;a.maybeHiddenMarkers&&-1!=N(a.maybeHiddenMarkers,this)||(a.maybeUnhiddenMarkers||(a.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)};r.prototype.detachLine=function(a){this.lines.splice(N(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};bb(r);var I=function(a,c){this.markers=a;this.primary=c;for(var b=0;b<a.length;++b){a[b].parent=this}};I.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a){this.markers[a].clear()}P(this,'clear')}};I.prototype.find=function(a,b){return this.primary.find(a,b)};bb(I);var aP=0,j=function(b,c,a,d,e){if(!(this instanceof j)){return new j(b,c,a,d,e)}null==a&&(a=0);Pb.call(this,[new Ob([new D('',null)])]);this.first=a;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=a;a=p(a,0);this.sel=wa(a);this.history=new Bc(null);this.id=++aP;this.modeOption=c;this.lineSep=d;this.direction='rtl'==e?'rtl':'ltr';this.extend=!1;'string'==typeof b&&(b=this.splitLines(b));Gd(this,{from:a,to:a,text:b});Q(this,wa(a),q)};j.prototype=Xd(Pb.prototype,{constructor:j,iter:function(a,c,b){b?this.iterN(a-this.first,c-a,b):this.iterN(this.first,this.first+this.size,a)},insert:function(d,a){for(var c=0,b=0;b<a.length;++b){c+=a[b].height}this.insertInner(d-this.first,a,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Tc(this,this.first,this.first+this.size);return !1===a?b:b.join(a||this.lineSeparator())},setValue:M(function(c){var a=p(this.first,0),b=this.first+this.size-1;kb(this,{from:a,to:p(b,t(this,b).text.length),text:this.splitLines(c),origin:'setValue',full:!0},!0);this.cm&&Hb(this.cm,0,0);Q(this,wa(a),q)}),replaceRange:function(c,a,b,d){a=v(this,a);b=b?v(this,b):a;lb(this,c,a,b,d)},getRange:function(a,c,b){a=Ia(this,v(this,a),v(this,c));return !1===b?a:a.join(b||this.lineSeparator())},getLine:function(a){return (a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(tb(this,a)){return t(this,a)}},getLineNumber:function(a){return C(a)},getLineHandleVisualStart:function(a){'number'==typeof a&&(a=t(this,a));return oa(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return v(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||'head'==a?b.head:'anchor'==a?b.anchor:'end'==a||'to'==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:M(function(a,b,c){a=v(this,'number'==typeof a?p(a,b||0):a);Q(this,wa(a,null),c)}),setSelection:M(function(a,b,c){var d=v(this,a);a=v(this,b||a);Q(this,wa(d,a),c)}),extendSelection:M(function(b,a,c){Dc(this,v(this,b),a&&v(this,a),c)}),extendSelections:M(function(a,b){nf(this,$d(this,a),b)}),extendSelectionsBy:M(function(a,b){var c=hc(this.sel.ranges,a);nf(this,$d(this,c),b)}),setSelections:M(function(a,d,f){if(a.length){for(var e=[],b=0;b<a.length;b++){e[b]=new c(v(this,a[b].anchor),v(this,a[b].head))}null==d&&(d=Math.min(a.length-1,this.sel.primIndex));Q(this,ma(e,d),f)}}),addSelection:M(function(b,d,e){var a=this.sel.ranges.slice(0);a.push(new c(v(this,b),v(this,d||b)));Q(this,ma(a,a.length-1),e)}),getSelection:function(d){for(var c=this.sel.ranges,a,b=0;b<c.length;b++){var e=Ia(this,c[b].from(),c[b].to());a=a?a.concat(e):e}return !1===d?a:a.join(d||this.lineSeparator())},getSelections:function(d){for(var e=[],b=this.sel.ranges,a=0;a<b.length;a++){var c=Ia(this,b[a].from(),b[a].to());!1!==d&&(c=c.join(d||this.lineSeparator()));e[a]=c}return e},replaceSelection:function(c,d,e){for(var b=[],a=0;a<this.sel.ranges.length;a++){b[a]=c}this.replaceSelections(b,d,e||'+input')},replaceSelections:M(function(a,f,h){for(var i=[],g=this.sel,b=0;b<g.ranges.length;b++){var e=g.ranges[b];i[b]={from:e.from(),to:e.to(),text:this.splitLines(a[b]),origin:h}}if(a=f&&'end'!=f){a=[];g=h=p(this.first,0);for(b=0;b<i.length;b++){var d=i[b];e=ef(d.from,h,g);var j=ef(Ca(d),h,g);h=d.to;g=j;'around'==f?(d=this.sel.ranges[b],d=0>x(d.head,d.anchor),a[b]=new c(d?j:e,d?e:j)):a[b]=new c(e,e)}a=new m(a,this.sel.primIndex)}f=a;for(a=i.length-1;0<=a;a--){kb(this,i[a])}f?of(this,f):this.cm&&fb(this.cm)}),undo:M(function(){Fc(this,'undo')}),redo:M(function(){Fc(this,'redo')}),undoSelection:M(function(){Fc(this,'undo',!0)}),redoSelection:M(function(){Fc(this,'redo',!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var b=this.history,c=0,d=0,a=0;a<b.done.length;a++){b.done[a].ranges||++c}for(a=0;a<b.undone.length;a++){b.undone[a].ranges||++d}return {undo:c,redo:d}},clearHistory:function(){this.history=new Bc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return {done:ib(this.history.done),undone:ib(this.history.undone)}},setHistory:function(a){var b=this.history=new Bc(this.history.maxGeneration);b.done=ib(a.done.slice(0),null,!0);b.undone=ib(a.undone.slice(0),null,!0)},setGutterMarker:M(function(b,c,a){return Nb(this,b,'gutter',function(b){var d=b.gutterMarkers||(b.gutterMarkers={});d[c]=a;!a&&Yd(d)&&(b.gutterMarkers=null);return !0})}),clearGutter:M(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Nb(b,c,'gutter',function(){c.gutterMarkers[a]=null;Yd(c.gutterMarkers)&&(c.gutterMarkers=null);return !0})})}),lineInfo:function(a){if('number'==typeof a){if(!tb(this,a)){return null}var b=a;a=t(this,a);if(!a){return null}}else {if(b=C(a),null==b){return null}}return {line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:M(function(c,a,b){return Nb(this,c,'gutter'==a?'gutter':'class',function(c){var d='text'==a?'textClass':'background'==a?'bgClass':'gutter'==a?'gutterClass':'wrapClass';if(c[d]){if(Fa(b).test(c[d])){return !1}c[d]+=' '+b}else {c[d]=b}return !0})}),removeLineClass:M(function(c,a,b){return Nb(this,c,'gutter'==a?'gutter':'class',function(e){var f='text'==a?'textClass':'background'==a?'bgClass':'gutter'==a?'gutterClass':'wrapClass',c=e[f];if(c){if(null==b){e[f]=null}else {var d=c.match(Fa(b));if(!d){return !1}var g=d.index+d[0].length;e[f]=c.slice(0,d.index)+(d.index&&g!=c.length?' ':'')+c.slice(g)||null}}else {return !1}return !0})}),addLineWidget:M(function(a,b,c){return Og(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(b,c,a){return mb(this,v(this,b),v(this,c),a,a&&a.type||'range')},setBookmark:function(b,a){var c={replacedWith:a&&(null==a.nodeType?a.widget:a),insertLeft:a&&a.insertLeft,clearWhenEmpty:!1,shared:a&&a.shared,handleMouseEvents:a&&a.handleMouseEvents};b=v(this,b);return mb(this,b,b,c,'bookmark')},findMarksAt:function(b){b=v(this,b);var e=[],c=t(this,b.line).markedSpans;if(c){for(var d=0;d<c.length;++d){var a=c[d];(null==a.from||a.from<=b.ch)&&(null==a.to||a.to>=b.ch)&&e.push(a.marker.parent||a.marker)}}return e},findMarks:function(a,b,d){a=v(this,a);b=v(this,b);var e=[],c=a.line;this.iter(a.line,b.line+1,function(g){if(g=g.markedSpans){for(var h=0;h<g.length;h++){var f=g[h];null!=f.to&&c==a.line&&a.ch>=f.to||null==f.from&&c!=a.line||null!=f.from&&c==b.line&&f.from>=b.ch||d&&!d(f.marker)||e.push(f.marker.parent||f.marker)}}++c});return e},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans){for(var c=0;c<b.length;++c){null!=b[c].from&&a.push(b[c].marker)}}});return a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;this.iter(function(e){e=e.text.length+d;if(e>a){return b=a,!0}a-=e;++c});return v(this,p(c,b))},indexFromPos:function(a){a=v(this,a);var b=a.ch;if(a.line<this.first||0>a.ch){return 0}var c=this.lineSeparator().length;this.iter(this.first,a.line,function(a){b+=a.text.length+c});return b},copy:function(b){var a=new j(Tc(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);a.scrollTop=this.scrollTop;a.scrollLeft=this.scrollLeft;a.sel=this.sel;a.extend=!1;b&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory()));return a},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new j(Tc(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Cf(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from);e=b.clipPos(e.to);x(f,e)&&(f=mb(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof E&&(a=a.doc);if(this.linked){for(var b=0;b<this.linked.length;++b){if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Qg(Cf(this));break}}}if(a.history==this.history){var c=[a.id];Xa(a,function(a){return c.push(a.id)},!0);a.history=new Bc(null);a.history.done=ib(this.history.done,c);a.history.undone=ib(this.history.undone,c)}},iterLinkedDocs:function(a){Xa(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):ak(a)},lineSeparator:function(){return this.lineSep||'\n'},setDirection:M(function(a){'rtl'!=a&&(a='ltr');a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&Kg(this.cm))})});j.prototype.eachLine=j.prototype.iter;for(var ar=0,au=!1,s={3:'Pause',8:'Backspace',9:'Tab',13:'Enter',16:'Shift',17:'Ctrl',18:'Alt',19:'Pause',20:'CapsLock',27:'Esc',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'Left',38:'Up',39:'Right',40:'Down',44:'PrintScrn',45:'Insert',46:'Delete',59:';',61:'=',91:'Mod',92:'Mod',93:'Mod',106:'*',107:'=',109:'-',110:'.',111:'/',127:'Delete',145:'ScrollLock',173:'-',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:"'",63232:'Up',63233:'Down',63234:'Left',63235:'Right',63272:'Delete',63273:'Home',63275:'End',63276:'PageUp',63277:'PageDown',63302:'Insert'},R=0;10>R;R++){s[R+48]=s[R+96]=String(R)}for(var $=65;90>=$;$++){s[$]=String.fromCharCode($)}for(var S=1;12>=S;S++){s[S+111]=s[S+63235]='F'+S}var J={basic:{Left:'goCharLeft',Right:'goCharRight',Up:'goLineUp',Down:'goLineDown',End:'goLineEnd',Home:'goLineStartSmart',PageUp:'goPageUp',PageDown:'goPageDown',Delete:'delCharAfter',Backspace:'delCharBefore','Shift-Backspace':'delCharBefore',Tab:'defaultTab','Shift-Tab':'indentAuto',Enter:'newlineAndIndent',Insert:'toggleOverwrite',Esc:'singleSelection'},pcDefault:{'Ctrl-A':'selectAll','Ctrl-D':'deleteLine','Ctrl-Z':'undo','Shift-Ctrl-Z':'redo','Ctrl-Y':'redo','Ctrl-Home':'goDocStart','Ctrl-End':'goDocEnd','Ctrl-Up':'goLineUp','Ctrl-Down':'goLineDown','Ctrl-Left':'goGroupLeft','Ctrl-Right':'goGroupRight','Alt-Left':'goLineStart','Alt-Right':'goLineEnd','Ctrl-Backspace':'delGroupBefore','Ctrl-Delete':'delGroupAfter','Ctrl-S':'save','Ctrl-F':'find','Ctrl-G':'findNext','Shift-Ctrl-G':'findPrev','Shift-Ctrl-F':'replace','Shift-Ctrl-R':'replaceAll','Ctrl-[':'indentLess','Ctrl-]':'indentMore','Ctrl-U':'undoSelection','Shift-Ctrl-U':'redoSelection','Alt-U':'redoSelection',fallthrough:'basic'},emacsy:{'Ctrl-F':'goCharRight','Ctrl-B':'goCharLeft','Ctrl-P':'goLineUp','Ctrl-N':'goLineDown','Alt-F':'goWordRight','Alt-B':'goWordLeft','Ctrl-A':'goLineStart','Ctrl-E':'goLineEnd','Ctrl-V':'goPageDown','Shift-Ctrl-V':'goPageUp','Ctrl-D':'delCharAfter','Ctrl-H':'delCharBefore','Alt-D':'delWordAfter','Alt-Backspace':'delWordBefore','Ctrl-K':'killLine','Ctrl-T':'transposeChars','Ctrl-O':'openLine'},macDefault:{'Cmd-A':'selectAll','Cmd-D':'deleteLine','Cmd-Z':'undo','Shift-Cmd-Z':'redo','Cmd-Y':'redo','Cmd-Home':'goDocStart','Cmd-Up':'goDocStart','Cmd-End':'goDocEnd','Cmd-Down':'goDocEnd','Alt-Left':'goGroupLeft','Alt-Right':'goGroupRight','Cmd-Left':'goLineLeft','Cmd-Right':'goLineRight','Alt-Backspace':'delGroupBefore','Ctrl-Alt-Backspace':'delGroupAfter','Alt-Delete':'delGroupAfter','Cmd-S':'save','Cmd-F':'find','Cmd-G':'findNext','Shift-Cmd-G':'findPrev','Cmd-Alt-F':'replace','Shift-Cmd-Alt-F':'replaceAll','Cmd-[':'indentLess','Cmd-]':'indentMore','Cmd-Backspace':'delWrappedLineLeft','Cmd-Delete':'delWrappedLineRight','Cmd-U':'undoSelection','Shift-Cmd-U':'redoSelection','Ctrl-Up':'goDocStart','Ctrl-Down':'goDocEnd',fallthrough:['basic','emacsy']}};J['default']=n?J.macDefault:J.pcDefault;var K={selectAll:tf,singleSelection:function(a){return a.setSelection(a.getCursor('anchor'),a.getCursor('head'),q)},killLine:function(a){return ob(a,function(b){if(b.empty()){var c=t(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:p(b.head.line+1,0)}:{from:b.head,to:p(b.head.line,c)}}return {from:b.from(),to:b.to()}})},deleteLine:function(a){return ob(a,function(b){return {from:p(b.from().line,0),to:v(a.doc,p(b.to().line+1,0))}})},delLineLeft:function(a){return ob(a,function(a){return {from:p(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return ob(a,function(b){var c=a.charCoords(b.head,'div').top+5;return {from:a.coordsChar({left:0,top:c},'div'),to:b.from()}})},delWrappedLineRight:function(a){return ob(a,function(c){var b=a.charCoords(c.head,'div').top+5;b=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},'div');return {from:c.from(),to:b}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(p(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(p(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return Kf(a,b.head.line)},{origin:'+move',bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return Lf(a,b.head)},{origin:'+move',bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){b=b.head.line;var d=t(a.doc,b);var c=d;for(var e;e=Ka(c,!1);){c=e.find(1,!0).line}c!=d&&(b=C(c));return Nd(!0,a,d,b,-1)},{origin:'+move',bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,'div').top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},'div')},P)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){b=a.cursorCoords(b.head,'div').top+5;return a.coordsChar({left:0,top:b},'div')},P)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(c){var b=a.cursorCoords(c.head,'div').top+5;b=a.coordsChar({left:0,top:b},'div');return b.ch<a.getLine(b.line).search(/\S/)?Lf(a,c.head):b},P)},goLineUp:function(a){return a.moveV(-1,'line')},goLineDown:function(a){return a.moveV(1,'line')},goPageUp:function(a){return a.moveV(-1,'page')},goPageDown:function(a){return a.moveV(1,'page')},goCharLeft:function(a){return a.moveH(-1,'char')},goCharRight:function(a){return a.moveH(1,'char')},goColumnLeft:function(a){return a.moveH(-1,'column')},goColumnRight:function(a){return a.moveH(1,'column')},goWordLeft:function(a){return a.moveH(-1,'word')},goGroupRight:function(a){return a.moveH(1,'group')},goGroupLeft:function(a){return a.moveH(-1,'group')},goWordRight:function(a){return a.moveH(1,'word')},delCharBefore:function(a){return a.deleteH(-1,'char')},delCharAfter:function(a){return a.deleteH(1,'char')},delWordBefore:function(a){return a.deleteH(-1,'word')},delWordAfter:function(a){return a.deleteH(1,'word')},delGroupBefore:function(a){return a.deleteH(-1,'group')},delGroupAfter:function(a){return a.deleteH(1,'group')},indentAuto:function(a){return a.indentSelection('smart')},indentMore:function(a){return a.indentSelection('add')},indentLess:function(a){return a.indentSelection('subtract')},insertTab:function(a){return a.replaceSelection('\t')},insertSoftTab:function(a){for(var e=[],f=a.listSelections(),c=a.options.tabSize,d=0;d<f.length;d++){var b=f[d].from();b=fa(a.getLine(b.line),b.ch,c);e.push(Qc(c-b%c))}a.replaceSelections(e)},defaultTab:function(a){a.somethingSelected()?a.indentSelection('add'):a.execCommand('insertTab')},transposeChars:function(a){return Y(a,function(){for(var g=a.listSelections(),h=[],e=0;e<g.length;e++){if(g[e].empty()){var b=g[e].head,d=t(a.doc,b.line).text;if(d){if(b.ch==d.length&&(b=new p(b.line,b.ch-1)),0<b.ch){b=new p(b.line,b.ch+1),a.replaceRange(d.charAt(b.ch-1)+d.charAt(b.ch-2),p(b.line,b.ch-2),b,'+transpose')}else {if(b.line>a.doc.first){var f=t(a.doc,b.line-1).text;f&&(b=new p(b.line,1),a.replaceRange(d.charAt(0)+a.doc.lineSeparator()+f.charAt(f.length-1),p(b.line-1,f.length-1),b,'+transpose'))}}}h.push(new c(b,b))}}a.setSelections(h)})},newlineAndIndent:function(a){return Y(a,function(){for(var c=a.listSelections(),b=c.length-1;0<=b;b--){a.replaceRange(a.doc.lineSeparator(),c[b].anchor,c[b].head,'+input')}c=a.listSelections();for(b=0;b<c.length;b++){a.indentLine(c[b].from().line,null,!0)}fb(a)})},openLine:function(a){return a.replaceSelection('\n','start')},toggleOverwrite:function(a){return a.toggleOverwrite()}},aE=new y(),af=null,ag=function(a,b,c){this.time=a;this.pos=b;this.button=c};ag.prototype.compare=function(a,b,c){return this.time+400>a&&0==x(b,this.pos)&&c==this.button};var M,L,E={toString:function(){return 'CodeMirror.Init'}},at={},Z={};E.defaults=at;E.optionHandlers=Z;var aj=[];E.defineInitHook=function(a){return aj.push(a)};var k=null,d=function(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new y();this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};d.prototype.init=function(g){function b(a){if(!K(b,a)){if(b.somethingSelected()){k={lineWise:!1,text:b.getSelections()},'cut'==a.type&&b.replaceSelection('',null,'cut')}else {if(b.options.lineWiseCopyCut){var e=$f(b);k={lineWise:!0,text:e.text};'cut'==a.type&&b.operation(function(){b.setSelections(e.ranges,0,q);b.replaceSelection('',null,'cut')})}else {return}}if(a.clipboardData){a.clipboardData.clearData();var g=k.text.join('\n');a.clipboardData.setData('Text',g);if(a.clipboardData.getData('Text')==g){a.preventDefault();return}}var c=bg();a=c.firstChild;b.display.lineSpace.insertBefore(c,b.display.lineSpace.firstChild);a.value=k.text.join('\n');var h=document.activeElement;O(a);setTimeout(function(){b.display.lineSpace.removeChild(c);h.focus();h==d&&f.showPrimarySelection()},50)}}var c=this,f=this,b=f.cm,d=f.div=g.lineDiv;ag(d,b.options.spellcheck);a(d,'paste',function(a){K(b,a)||Zf(a,b)||11>=e&&setTimeout(L(b,function(){return c.updateFromDOM()}),20)});a(d,'compositionstart',function(a){c.composing={data:a.data,done:!1}});a(d,'compositionupdate',function(a){c.composing||(c.composing={data:a.data,done:!1})});a(d,'compositionend',function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)});a(d,'touchstart',function(){return f.forceCompositionEnd()});a(d,'input',function(){c.composing||c.readFromDOMSoon()});a(d,'copy',b);a(d,'cut',b)};d.prototype.prepareSelection=function(){var a=Ne(this.cm,!1);a.focus=this.cm.state.focused;return a};d.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))};d.prototype.showPrimarySelection=function(){var b=window.getSelection(),c=this.cm,a=c.doc.sel.primary(),e=a.from();a=a.to();if(c.display.viewTo==c.display.viewFrom||e.line>=c.display.viewTo||a.line<c.display.viewFrom){b.removeAllRanges()}else {var d=Lc(c,b.anchorNode,b.anchorOffset),f=Lc(c,b.focusNode,b.focusOffset);if(!d||d.bad||!f||f.bad||0!=x(kc(d,f),e)||0!=x(jc(d,f),a)){if(d=c.display.view,e=e.line>=c.display.viewFrom&&dg(c,e)||{node:d[0].measure.map[2],offset:0},a=a.line<c.display.viewTo&&dg(c,a),a||(a=d[d.length-1].measure,a=a.maps?a.maps[a.maps.length-1]:a.map,a={node:a[a.length-1],offset:a[a.length-2]-a[a.length-3]}),e&&a){d=b.rangeCount&&b.getRangeAt(0);try{var g=W(e.node,e.offset,a.offset,a.node)}catch(aT){}g&&(!t&&c.state.focused?(b.collapse(e.node,e.offset),g.collapsed||(b.removeAllRanges(),b.addRange(g))):(b.removeAllRanges(),b.addRange(g)),d&&null==b.anchorNode?b.addRange(d):t&&this.startGracePeriod());this.rememberSelection()}else {b.removeAllRanges()}}}};d.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)};d.prototype.showMultipleSelections=function(a){aa(this.cm.display.cursorDiv,a.cursors);aa(this.cm.display.selectionDiv,a.selection)};d.prototype.rememberSelection=function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset};d.prototype.selectionInEditor=function(){var a=window.getSelection();if(!a.rangeCount){return !1}a=a.getRangeAt(0).commonAncestorContainer;return xa(this.div,a)};d.prototype.focus=function(){'nocursor'!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};d.prototype.blur=function(){this.div.blur()};d.prototype.getField=function(){return this.div};d.prototype.supportsTouch=function(){return !0};d.prototype.receivedFocus=function(){function a(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,a))}var a=this;this.selectionInEditor()?this.pollSelection():Y(this.cm,function(){return a.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)};d.prototype.selectionChanged=function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset};d.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;if(ad&&ac&&this.cm.options.gutters.length&&lh(a.anchorNode)){this.cm.triggerOnKeyDown({type:'keydown',keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus()}else {if(!this.composing){this.rememberSelection();var c=Lc(b,a.anchorNode,a.anchorOffset),d=Lc(b,a.focusNode,a.focusOffset);c&&d&&Y(b,function(){Q(b.doc,wa(c,d),q);if(c.bad||d.bad){b.curOp.selectionChanged=!0}})}}}};d.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var d=this.cm,a=d.display,g=d.doc.sel.primary(),e=g.from(),c=g.to();0==e.ch&&e.line>d.firstLine()&&(e=p(e.line-1,t(d.doc,e.line-1).length));c.ch==t(d.doc,c.line).text.length&&c.line<d.lastLine()&&(c=p(c.line+1,0));if(e.line<a.viewFrom||c.line>a.viewTo-1){return !1}var b;e.line==a.viewFrom||0==(b=Oa(d,e.line))?(g=C(a.view[0].line),b=a.view[0].node):(g=C(a.view[b].line),b=a.view[b-1].node.nextSibling);var f=Oa(d,c.line);f==a.view.length-1?(c=a.viewTo-1,a=a.lineDiv.lastChild):(c=C(a.view[f+1].line)-1,a=a.view[f+1].node.previousSibling);if(!b){return !1}a=d.doc.splitLines(mh(d,b,a,g,c));for(b=Ia(d.doc,p(g,0),p(c,t(d.doc,c).text.length));1<a.length&&1<b.length;){if(z(a)==z(b)){a.pop(),b.pop(),c--}else {if(a[0]==b[0]){a.shift(),b.shift(),g++}else {break}}}var h=0;f=0;for(var i=a[0],j=b[0],k=Math.min(i.length,j.length);h<k&&i.charCodeAt(h)==j.charCodeAt(h);){++h}i=z(a);j=z(b);for(k=Math.min(i.length-(1==a.length?h:0),j.length-(1==b.length?h:0));f<k&&i.charCodeAt(i.length-f-1)==j.charCodeAt(j.length-f-1);){++f}if(1==a.length&&1==b.length&&g==e.line){for(;h&&h>e.ch&&i.charCodeAt(i.length-f-1)==j.charCodeAt(j.length-f-1);){h--,f++}}a[a.length-1]=i.slice(0,i.length-f).replace(/^\u200b+/,'');a[0]=a[0].slice(h).replace(/\u200b+$/,'');e=p(g,h);g=p(c,b.length?z(b).length-f:0);if(1<a.length||a[0]||x(e,g)){return lb(d.doc,a,e,g,'+input'),!0}};d.prototype.ensurePolled=function(){this.forceCompositionEnd()};d.prototype.reset=function(){this.forceCompositionEnd()};d.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};d.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){a.readDOMTimeout=null;if(a.composing){if(a.composing.done){a.composing=null}else {return}}a.updateFromDOM()},80))};d.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||Y(this.cm,function(){return V(a.cm)})};d.prototype.setUneditable=function(a){a.contentEditable='false'};d.prototype.onKeyPress=function(a){0!=a.charCode&&(a.preventDefault(),this.cm.isReadOnly()||L(this.cm,Td)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))};d.prototype.readOnlyChanged=function(a){this.div.contentEditable=String('nocursor'!=a)};d.prototype.onContextMenu=function(){};d.prototype.resetPosition=function(){};d.prototype.needsContentAttribute=!0;var g=function(a){this.cm=a;this.prevInput='';this.pollingFast=!1;this.polling=new y();this.hasSelection=!1;this.composing=null};g.prototype.init=function(g){function b(a){if(!K(c,a)){if(c.somethingSelected()){k={lineWise:!1,text:c.getSelections()}}else {if(c.options.lineWiseCopyCut){var b=$f(c);k={lineWise:!0,text:b.text};'cut'==a.type?c.setSelections(b.ranges,null,q):(d.prevInput='',f.value=b.text.join('\n'),O(f))}else {return}}'cut'==a.type&&(c.state.cutIncoming=!0)}}var h=this,d=this,c=this.cm,i=this.wrapper=bg(),f=this.textarea=i.firstChild;g.wrapper.insertBefore(i,g.wrapper.firstChild);N&&(f.style.width='0px');a(f,'input',function(){b&&9<=e&&h.hasSelection&&(h.hasSelection=null);d.poll()});a(f,'paste',function(a){K(c,a)||Zf(a,c)||(c.state.pasteIncoming=!0,d.fastPoll())});a(f,'cut',b);a(f,'copy',b);a(g.scroller,'paste',function(a){va(g,a)||K(c,a)||(c.state.pasteIncoming=!0,d.focus())});a(g.lineSpace,'selectstart',function(a){va(g,a)||U(a)});a(f,'compositionstart',function(){var a=c.getCursor('from');d.composing&&d.composing.range.clear();d.composing={start:a,range:c.markText(a,c.getCursor('to'),{className:'CodeMirror-composing'})}});a(f,'compositionend',function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})};g.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Ne(a);if(a.options.moveInputWithCursor){a=ka(a,c.sel.primary().head,'div');c=b.wrapper.getBoundingClientRect();var e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d};g.prototype.showSelection=function(a){var b=this.cm.display;aa(b.cursorDiv,a.cursors);aa(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+'px',this.wrapper.style.left=a.teLeft+'px')};g.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var c=this.cm;c.somethingSelected()?(this.prevInput='',a=c.getSelection(),this.textarea.value=a,c.state.focused&&O(this.textarea),b&&9<=e&&(this.hasSelection=a)):a||(this.prevInput=this.textarea.value='',b&&9<=e&&(this.hasSelection=null))}};g.prototype.getField=function(){return this.textarea};g.prototype.supportsTouch=function(){return !1};g.prototype.focus=function(){if('nocursor'!=this.cm.options.readOnly&&(!U||ta()!=this.textarea)){try{this.textarea.focus()}catch(aT){}}};g.prototype.blur=function(){this.textarea.blur()};g.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};g.prototype.receivedFocus=function(){this.slowPoll()};g.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})};g.prototype.fastPoll=function(){function a(){a.poll()||b?(a.pollingFast=!1,a.slowPoll()):(b=!0,a.polling.set(60,a))}var b=!1,a=this;a.pollingFast=!0;a.polling.set(20,a)};g.prototype.poll=function(){var d=this,a=this.cm,i=this.textarea,f=this.prevInput;if(this.contextMenuPending||!a.state.focused||aO(i)&&!f&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq){return !1}var c=i.value;if(c==f&&!a.somethingSelected()){return !1}if(b&&9<=e&&this.hasSelection===c||n&&/[\uf700-\uf7ff]/.test(c)){return a.display.input.reset(),!1}if(a.doc.sel==a.display.selForContextMenu){var h=c.charCodeAt(0);8203!=h||f||(f='​');if(8666==h){return this.reset(),this.cm.execCommand('undo')}}var g=0;for(h=Math.min(f.length,c.length);g<h&&f.charCodeAt(g)==c.charCodeAt(g);){++g}Y(a,function(){Td(a,c.slice(g),f.length-g,null,d.composing?'*compose':null);1000<c.length||-1<c.indexOf('\n')?i.value=d.prevInput='':d.prevInput=c;d.composing&&(d.composing.range.clear(),d.composing.range=a.markText(d.composing.start,a.getCursor('to'),{className:'CodeMirror-composing'}))});return !0};g.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};g.prototype.onKeyPress=function(){b&&9<=e&&(this.hasSelection=null);this.fastPoll()};g.prototype.onContextMenu=function(j){function b(){if(null!=f.selectionStart){var a=c.somethingSelected(),b='​'+(a?f.value:'');f.value='⇚';f.value=b;g.prevInput=a?'':'​';f.selectionStart=1;f.selectionEnd=b.length;d.selForContextMenu=c.doc.sel}}function c(){g.contextMenuPending=!1;g.wrapper.style.cssText=n;f.style.cssText=m;b&&9>e&&d.scrollbars.setScrollTop(d.scroller.scrollTop=l);if(null!=f.selectionStart){(!b||b&&9>e)&&b();var h=0,a=function(){d.selForContextMenu==c.doc.sel&&0==f.selectionStart&&0<f.selectionEnd&&'​'==g.prevInput?L(c,tf)(c):10>h++?d.detectingSelectAll=setTimeout(a,500):(d.selForContextMenu=null,d.input.reset())};d.detectingSelectAll=setTimeout(a,200)}}var g=this,c=g.cm,d=c.display,f=g.textarea,i=Sa(c,j),l=d.scroller.scrollTop;if(i&&!o){c.options.resetSelectionOnContextMenu&&-1==c.doc.sel.contains(i)&&L(c,Q)(c.doc,wa(i),q);var m=f.style.cssText,n=g.wrapper.style.cssText;g.wrapper.style.cssText='position: absolute';i=g.wrapper.getBoundingClientRect();f.style.cssText='position: absolute; width: 30px; height: 30px;\n      top: '+(j.clientY-i.top-5)+'px; left: '+(j.clientX-i.left-5)+'px;\n      z-index: 1000; background: '+(b?'rgba(255, 255, 255, .05)':'transparent')+';\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);';if(h){var p=window.scrollY}d.input.focus();h&&window.scrollTo(null,p);d.input.reset();c.somethingSelected()||(f.value=g.prevInput=' ');g.contextMenuPending=!0;d.selForContextMenu=c.doc.sel;clearTimeout(d.detectingSelectAll);b&&9<=e&&b();if(ah){xb(j);var k=function(){ba(window,'mouseup',k);setTimeout(c,20)};a(window,'mouseup',k)}else {setTimeout(c,50)}}};g.prototype.readOnlyChanged=function(a){a||this.reset();this.textarea.disabled='nocursor'==a};g.prototype.setUneditable=function(){};g.prototype.needsContentAttribute=!1;(function(a){function b(d,e,c,f){a.defaults[d]=e;c&&(b[d]=f?function(b,d,a){a!=E&&c(b,d,a)}:c)}var b=a.optionHandlers;a.defineOption=b;a.Init=E;b('value','',function(a,b){return a.setValue(b)},!0);b('mode',null,function(a,b){a.doc.modeOption=b;Fd(a)},!0);b('indentUnit',2,Fd,!0);b('indentWithTabs',!1);b('smartIndent',!0);b('tabSize',4,function(a){Lb(a);Eb(a);V(a)},!0);b('lineSeparator',null,function(d,a){if(d.doc.lineSep=a){var b=[],e=d.doc.first;d.doc.iter(function(f){for(var d=0;;){var c=f.text.indexOf(a,d);if(-1==c){break}d=c+a.length;b.push(p(e,c))}e++});for(var c=b.length-1;0<=c;c--){lb(d.doc,a,b[c],p(b[c].line,b[c].ch+a.length))}}});b('specialChars',/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test('\t')?'':'|\t'),'g');c!=E&&a.refresh()});b('specialCharPlaceholder',xg,function(a){return a.refresh()},!0);b('electricChars',!0);b('inputStyle',U?'contenteditable':'textarea',function(){throw Error('inputStyle can not (yet) be changed in a running editor')},!0);b('spellcheck',!1,function(a,b){return a.getInputField().spellcheck=b},!0);b('rtlMoveVisually',!aN);b('wholeLineUpdateBefore',!0);b('theme','default',function(a){Uf(a);Xb(a)},!0);b('keyMap','default',function(c,b,a){b=Gc(b);(a=a!=E&&Gc(a))&&a.detach&&a.detach(c,b);b.attach&&b.attach(c,a||null)});b('extraKeys',null);b('configureMouse',null);b('lineWrapping',!1,jh,!0);b('gutters',[],function(a){Dd(a.options);Xb(a)},!0);b('fixedGutter',!0,function(a,b){a.display.gutters.style.left=b?td(a.display)+'px':'0';a.refresh()},!0);b('coverGutterNextToScrollbar',!1,function(a){return gb(a)},!0);b('scrollbarStyle','native',function(a){Xe(a);gb(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);b('lineNumbers',!1,function(a){Dd(a.options);Xb(a)},!0);b('firstLineNumber',1,Xb,!0);b('lineNumberFormatter',function(a){return a},Xb,!0);b('showCursorWhenSelecting',!1,Fb,!0);b('resetSelectionOnContextMenu',!0);b('lineWiseCopyCut',!0);b('pasteLinesPerSelection',!0);b('readOnly',!1,function(a,b){'nocursor'==b&&(Gb(a),a.display.input.blur());a.display.input.readOnlyChanged(b)});b('disableInput',!1,function(a,b){b||a.display.input.reset()},!0);b('dragDrop',!0,ih);b('allowDropFileTypes',null);b('cursorBlinkRate',530);b('cursorScrollMargin',0);b('cursorHeight',1,Fb,!0);b('singleCursorHeightPerLine',!0,Fb,!0);b('workTime',100);b('workDelay',100);b('flattenSpans',!0,Lb,!0);b('addModeClass',!1,Lb,!0);b('pollInterval',100);b('undoDepth',200,function(a,b){return a.doc.history.undoDepth=b});b('historyEventDelay',1250);b('viewportMargin',10,function(a){return a.refresh()},!0);b('maxHighlightLength',10000,Lb,!0);b('moveInputWithCursor',!0,function(a,b){b||a.display.input.resetPosition()});b('tabindex',null,function(a,b){return a.display.input.getField().tabIndex=b||''});b('autofocus',null);b('direction','ltr',function(a,b){return a.doc.setDirection(b)},!0)})(E);(function(a){var d=a.optionHandlers,b=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,e=c[a];if(c[a]!=b||'mode'==a){c[a]=b,d.hasOwnProperty(a)&&L(this,d[a])(this,b,e),G(this,'optionChange',this,a)}},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?'push':'unshift'](Gc(a))},removeKeyMap:function(c){for(var b=this.state.keyMaps,a=0;a<b.length;++a){if(b[a]==c||b[a].name==c){return b.splice(a,1),!0}}},addOverlay:S(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState){throw Error('Overlays may not be stateful.')}hg(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority});this.state.modeGen++;V(this)}),removeOverlay:S(function(b){for(var c=this.state.overlays,a=0;a<c.length;++a){var d=c[a].modeSpec;if(d==b||'string'==typeof b&&d.name==b){c.splice(a,1);this.state.modeGen++;V(this);break}}}),indentLine:S(function(b,a,c){'string'!=typeof a&&'number'!=typeof a&&(a=null==a?this.options.smartIndent?'smart':'prev':a?'add':'subtract');tb(this.doc,b)&&Yb(this,b,a,c)}),indentSelection:S(function(g){for(var e=this.doc.sel.ranges,d=-1,b=0;b<e.length;b++){var a=e[b];if(a.empty()){a.head.line>d&&(Yb(this,a.head.line,g,!0),d=a.head.line,b==this.doc.sel.primIndex&&fb(this))}else {var f=a.from();a=a.to();var h=Math.max(d,f.line);d=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(a=h;a<d;++a){Yb(this,a,g)}a=this.doc.sel.ranges;0==f.ch&&e.length==a.length&&0<a[b].from().ch&&Jd(this.doc,b,new c(f,a[b].to()),q)}}}),getTokenAt:function(a,b){return oe(this,a,b)},getLineTokens:function(a,b){return oe(this,p(a),b,!0)},getTokenTypeAt:function(b){b=v(this.doc,b);var a=me(this,t(this.doc,b.line)),c=0,e=(a.length-1)/2;b=b.ch;if(0==b){a=a[2]}else {for(;;){var d=c+e>>1;if((d?a[2*d-1]:0)>=b){e=d}else {if(a[2*d+1]<b){c=d+1}else {a=a[2*d+2];break}}}}c=a?a.indexOf('overlay '):-1;return 0>c?a:0==c?null:a.slice(0,c-1)},getModeAt:function(c){var b=this.doc.mode;return b.innerMode?a.innerMode(b,this.getTokenAt(c).state).mode:b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(h,d){var e=[];if(!b.hasOwnProperty(d)){return e}var c=b[d],a=this.getModeAt(h);if('string'==typeof a[d]){c[a[d]]&&e.push(c[a[d]])}else {if(a[d]){for(var f=0;f<a[d].length;f++){var g=c[a[d][f]];g&&e.push(g)}}else {a.helperType&&c[a.helperType]?e.push(c[a.helperType]):c[a.name]&&e.push(c[a.name])}}for(f=0;f<c._global.length;f++){g=c._global[f],g.pred(a,this)&&-1==N(e,g.val)&&e.push(g.val)}return e},getStateAfter:function(b,c){var a=this.doc;b=Math.max(a.first,Math.min(null==b?a.first+a.size-1:b,a.first+a.size-1));return yb(this,b+1,c).state},cursorCoords:function(b,c){var a=this.doc.sel.primary();a=null==b?a.head:'object'==typeof b?v(this.doc,b):b?a.from():a.to();return ka(this,a,c||'page')},charCoords:function(a,b){return pd(this,v(this.doc,a),b||'page')},coordsChar:function(a,b){a=Ie(this,a,b||'page');return rd(this,a.left,a.top)},lineAtHeight:function(a,b){a=Ie(this,{top:a,left:0},b||'page').top;return Ja(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,d,e){var b=!1;if('number'==typeof a){var c=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>c&&(a=c,b=!0);a=t(this.doc,a)}return tc(this,a,{top:0,left:0},d||'page',e||b).top+(b?this.doc.height-pa(a):0)},defaultTextHeight:function(){return Qa(this.display)},defaultCharWidth:function(){return Db(this.display)},getViewport:function(){return {from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(b,a,j,f,g){var d=this.display;b=ka(this,v(this.doc,b));var e=b.bottom,c=b.left;a.style.position='absolute';a.setAttribute('cm-ignore-events','true');this.display.input.setUneditable(a);d.sizer.appendChild(a);if('over'==f){e=b.top}else {if('above'==f||'near'==f){var i=Math.max(d.wrapper.clientHeight,this.doc.height),h=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);('above'==f||b.bottom+a.offsetHeight>i)&&b.top>a.offsetHeight?e=b.top-a.offsetHeight:b.bottom+a.offsetHeight<=i&&(e=b.bottom);c+a.offsetWidth>h&&(c=h-a.offsetWidth)}}a.style.top=e+'px';a.style.left=a.style.right='';'right'==g?(c=d.sizer.clientWidth-a.offsetWidth,a.style.right='0px'):('left'==g?c=0:'middle'==g&&(c=(d.sizer.clientWidth-a.offsetWidth)/2),a.style.left=c+'px');j&&(b=zd(this,{left:c,top:e,right:c+a.offsetWidth,bottom:e+a.offsetHeight}),null!=b.scrollTop&&Ib(this,b.scrollTop),null!=b.scrollLeft&&Ua(this,b.scrollLeft))},triggerOnKeyDown:S(Of),triggerOnKeyPress:S(Qf),triggerOnKeyUp:Pf,triggerOnMouseDown:S(Rf),execCommand:function(a){if(K.hasOwnProperty(a)){return K[a].call(null,this)}},triggerElectric:S(function(a){Yf(this,a)}),findPosH:function(a,b,e,f){var c=1;0>b&&(c=-1,b=-b);a=v(this.doc,a);for(var d=0;d<b&&(a=Vd(this.doc,a,c,e,f),!a.hitSide);++d){}return a},moveH:S(function(b,c){var a=this;this.extendSelectionsBy(function(d){return a.display.shift||a.doc.extend||d.empty()?Vd(a.doc,d.head,b,c,a.options.rtlMoveVisually):0>b?d.from():d.to()},P)}),deleteH:S(function(a,c){var b=this.doc;this.doc.sel.somethingSelected()?b.replaceSelection('',null,'+delete'):ob(this,function(d){var e=Vd(b,d.head,a,c,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(b,c,f,d){var e=1;0>c&&(e=-1,c=-c);var a=v(this.doc,b);for(b=0;b<c&&(a=ka(this,a,'div'),null==d?d=a.left:a.left=d,a=cg(this,a,e,f),!a.hitSide);++b){}return a},moveV:S(function(e,f){var b=this,a=this.doc,d=[],g=!this.display.shift&&!a.extend&&a.sel.somethingSelected();a.extendSelectionsBy(function(c){if(g){return 0>e?c.from():c.to()}var h=ka(b,c.head,'div');null!=c.goalColumn&&(h.left=c.goalColumn);d.push(h.left);var i=cg(b,h,e,f);'page'==f&&c==a.sel.primary()&&wc(b,pd(b,i,'div').top-h.top);return i},P);if(d.length){for(var c=0;c<a.sel.ranges.length;c++){a.sel.ranges[c].goalColumn=d[c]}}}),findWordAt:function(a){var d=t(this.doc,a.line).text,b=a.ch,e=a.ch;if(d){var g=this.getHelper(a,'wordChars');'before'!=a.sticky&&e!=d.length||!b?++e:--b;var f=d.charAt(b);for(f=ic(f,g)?function(a){return ic(a,g)}:/\s/.test(f)?function(a){return /\s/.test(a)}:function(a){return !/\s/.test(a)&&!ic(a)};0<b&&f(d.charAt(b-1));){--b}for(;e<d.length&&f(d.charAt(e));){++e}}return new c(p(a.line,b),p(a.line,e))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite){(this.state.overwrite=!this.state.overwrite)?Ga(this.display.cursorDiv,'CodeMirror-overwrite'):x(this.display.cursorDiv,'CodeMirror-overwrite'),G(this,'overwriteToggle',this,this.state.overwrite)}},hasFocus:function(){return this.display.input.getField()==ta()},isReadOnly:function(){return !(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:S(function(a,b){Hb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return {left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-ra(this)-this.display.barHeight,width:a.scrollWidth-ra(this)-this.display.barWidth,clientHeight:kd(this),clientWidth:Na(this)}},scrollIntoView:S(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):'number'==typeof a?a={from:p(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line){var c=a;xc(this);this.curOp.scrollToPos=c}else {Ue(this,a.from,a.to,a.margin)}}),setSize:S(function(b,c){var e=this,d=function(a){return 'number'==typeof a||/^\d+$/.test(String(a))?a+'px':a};null!=b&&(this.display.wrapper.style.width=d(b));null!=c&&(this.display.wrapper.style.height=d(c));this.options.lineWrapping&&Fe(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(b){if(b.widgets){for(var c=0;c<b.widgets.length;c++){if(b.widgets[c].noHScroll){Ba(e,a,'widget');break}}}++a});this.curOp.forceUpdate=!0;G(this,'refresh',this)}),operation:function(a){return Y(this,a)},startOperation:function(){return Va(this)},endOperation:function(){return Wa(this)},refresh:S(function(){var a=this.display.cachedTextHeight;V(this);this.curOp.forceUpdate=!0;Eb(this);Hb(this,this.doc.scrollLeft,this.doc.scrollTop);yd(this);(null==a||0.5<Math.abs(a-Qa(this.display)))&&ud(this);G(this,'refresh',this)}),swapDoc:S(function(a){var b=this.doc;b.cm=null;gf(this,a);Eb(this);this.display.input.reset();Hb(this,a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;P(this,'swapDoc',this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bb(a);a.registerHelper=function(c,d,e){b.hasOwnProperty(c)||(b[c]=a[c]={_global:[]});b[c][d]=e};a.registerGlobalHelper=function(c,e,f,d){a.registerHelper(c,e,d);b[c]._global.push({pred:f,val:d})}})(E);var aR='iter insert remove copy getEditor constructor'.split(' '),T;for(T in j.prototype){j.prototype.hasOwnProperty(T)&&0>N(aR,T)&&(E.prototype[T]=function(a){return function(){return a.apply(this.doc,arguments)}}(j.prototype[T]))}bb(j);E.inputStyles={textarea:g,contenteditable:d};E.defineMode=function(a){E.defaults.mode||'null'==a||(E.defaults.mode=a);pg.apply(this,arguments)};E.defineMIME=function(a,b){A[a]=b};E.defineMode('null',function(){return {token:function(a){return a.skipToEnd()}}});E.defineMIME('text/plain','null');E.defineExtension=function(a,b){E.prototype[a]=b};E.defineDocExtension=function(a,b){j.prototype[a]=b};E.fromTextArea=function(b,c){function c(){b.value=g.getValue()}c=c?Ha(c):{};c.value=b.value;!c.tabindex&&b.tabIndex&&(c.tabindex=b.tabIndex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=ta();c.autofocus=e==b||null!=b.getAttribute('autofocus')&&e==document.body}if(b.form&&(a(b.form,'submit',c),!c.leaveSubmitMethodAlone)){var d=b.form;var f=d.submit;try{var h=d.submit=function(){c();d.submit=f;d.submit();d.submit=h}}catch(aT){}}c.finishInit=function(a){a.save=c;a.getTextArea=function(){return b};a.toTextArea=function(){a.toTextArea=isNaN;c();b.parentNode.removeChild(a.getWrapperElement());b.style.display='';b.form&&(ba(b.form,'submit',c),'function'==typeof b.form.submit&&(b.form.submit=f))}};b.style.display='none';var g=E(function(a){return b.parentNode.insertBefore(a,b.nextSibling)},c);return g};(function(b){b.off=ba;b.on=a;b.wheelEventPixels=Jg;b.Doc=j;b.splitLines=ak;b.countColumn=fa;b.findColumn=Pc;b.isWordChar=Rc;b.Pass=Y;b.signal=G;b.Line=D;b.changeEnd=Ca;b.scrollbarModel=aw;b.Pos=p;b.cmpPos=x;b.modes=am;b.mimeModes=A;b.resolveMode=oc;b.getMode=dd;b.modeExtensions=B;b.extendMode=qg;b.copyState=Ma;b.startState=je;b.innerMode=ed;b.commands=K;b.keyMap=J;b.keyName=Jf;b.isModifierKey=Gf;b.lookupKey=nb;b.normalizeKeyMap=Vg;b.StringStream=f;b.SharedTextMarker=I;b.TextMarker=r;b.LineWidget=H;b.e_preventDefault=U;b.e_stopPropagation=he;b.e_stop=xb;b.addClass=Ga;b.contains=xa;b.rmClass=x;b.keyNames=s})(E);E.version='5.33.1';return E});